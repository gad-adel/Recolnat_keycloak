import{jsx as s,jsxs as E,Fragment as v}from"react/jsx-runtime";import{useState as i}from"react";import{u as w,f as A,d as C,e as y,g as M,r as N,O as j,P as x,j as m,A as G,b3 as O,dN as R,dO as S}from"./index-sihFV1NS.js";import{V}from"./ViewHeader-xo54NRb6.js";import{u as k,F as H}from"./useIsFeatureEnabled-qmmJPqO8.js";import{U as K,t as D}from"./UserForm-KWIpw6L8.js";/* empty css                     */import"react-dom";import"./ToolbarContent-46I9Yg7h.js";import"./FormAccess-EK-4wbwg.js";import"./copy-icon-WaWzxYgU.js";import"./Form-bfj-xQZn.js";import"./GroupPickerDialog-gC2-xBPw.js";import"./PaginatingTableToolbar--Dt3wwL6.js";import"./EmptyStateBody-jnnI7hpP.js";import"./EmptyStateSecondaryActions-G5doWCZ5.js";import"./TableToolbar-vuixsfwd.js";import"./useToggle-mZS4AEtR.js";import"./KeycloakTextInput--S1SG2UN.js";import"./Modal-uOAPm2rX.js";import"./ConfirmDialog-WMVurgkl.js";import"./DataListItemRow-te2VcAoi.js";import"./data-list-CDN1kyj9.js";import"./grip-vertical-icon-accuSWkz.js";import"./_baseRest-lI6NnEVt.js";import"./useFormatDate-kyFeutIw.js";function ue(){const{t:a}=w(),{addAlert:p,addError:l}=A(),u=C(),{realm:o}=y(),c=k(),n=M({mode:"onChange"}),[f,U]=i([]),[d,g]=i(),[h,F]=i();N(()=>Promise.all([m.realms.findOne({realm:o}),m.users.getProfileMetadata({realm:o})]),([r,e])=>{if(!r)throw new Error(a("notFound"));g(r);const t=c(H.DeclarativeUserProfile)&&r.attributes?.userProfileEnabled==="true";F(t?e:void 0)},[]);const P=async r=>{try{const e=await m.users.create({...D(r),groups:f.map(t=>t.path),enabled:!0});p(a("userCreated"),G.success),u(O({id:e.id,realm:o,tab:"settings"}))}catch(e){R(e)?S(e,n.setError,(t,b)=>a(t,{...b})):l("userCreateError",e)}};return d?E(v,{children:[s(V,{titleKey:a("createUser"),className:"kc-username-view-header"}),s(x,{variant:"light",children:s(K,{form:n,realm:d,userProfileMetadata:h,onGroupsUpdate:U,save:P})})]}):s(j,{})}export{ue as default};
//# sourceMappingURL=CreateUser-e0FYYz_z.js.map
