import{jsx as r,jsxs as q,Fragment as Te}from"react/jsx-runtime";import*as G from"react";import N,{useState as y,useEffect as De,useRef as oe,Fragment as Ae}from"react";import{_ as X,l as x,bJ as Le,a5 as Oe,bd as re,cB as Be,n as Re,av as ce,ck as le,ch as Me,d5 as Fe,bC as $e,ci as je,E as ve,u as J,f as ae,g as Ke,B as H,m as Ne,F as Ue,V as Z,j as M,A as ke,e as Ce,d as we,aG as qe,bL as He,r as Ee,Y as Je,bo as ze,bE as te,O as We,d6 as Ie,cU as de,I as Ye,ai as Qe,cl as Xe,K as P,aR as Ze,bM as Pe,bN as ue}from"./index-sihFV1NS.js";import{i as me,P as ye,L as fe}from"./PaginatingTableToolbar--Dt3wwL6.js";import{u as Y}from"./useToggle-mZS4AEtR.js";import{K as et}from"./KeycloakTextInput--S1SG2UN.js";import{M as Ge,a as ne}from"./Modal-uOAPm2rX.js";import{F as tt}from"./Form-bfj-xQZn.js";import{C as at}from"./ConfirmDialog-WMVurgkl.js";import{e as nt,D as st,a as it,c as ot,d as rt}from"./DataListItemRow-te2VcAoi.js";import{s as Q}from"./data-list-CDN1kyj9.js";import{h as he}from"./TableToolbar-vuixsfwd.js";import{b as ct}from"./_baseRest-lI6NnEVt.js";const xe=e=>{var{children:t,className:i,visibility:o,id:s,"aria-label":u,"aria-labelledby":m,isPlainButtonAction:a}=e,n=X(e,["children","className","visibility","id","aria-label","aria-labelledby","isPlainButtonAction"]);return G.createElement("div",Object.assign({className:x(Q.dataListItemAction,Le(o,Q),i)},n),a?G.createElement("div",{className:x(Q.dataListAction)},t):t)};xe.displayName="DataListAction";const _e=e=>{var{className:t="",onChange:i=(l,v)=>{},isValid:o=!0,isDisabled:s=!1,isChecked:u=!1,checked:m=!1,defaultChecked:a,otherControls:n=!1}=e,c=X(e,["className","onChange","isValid","isDisabled","isChecked","checked","defaultChecked","otherControls"]);const b=G.createElement("div",{className:x(Q.dataListCheck)},G.createElement("input",Object.assign({},c,{type:"checkbox",onChange:l=>i(l.currentTarget.checked,l),"aria-invalid":!o,disabled:s},[!0,!1].includes(a)&&{defaultChecked:a},![!0,!1].includes(a)&&{checked:u||m})));return G.createElement(G.Fragment,null,!n&&G.createElement("div",{className:x(Q.dataListItemControl,t)},b),n&&b)};_e.displayName="DataListCheck";const Se=e=>{var{isNested:t=!1,toolbar:i,children:o}=e,s=X(e,["isNested","toolbar","children"]);return G.createElement(G.Fragment,null,i&&G.createElement(G.Fragment,null,i,G.createElement(Oe,null)),G.createElement("ul",Object.assign({className:x("pf-c-tree-view__list"),role:t?"group":"tree"},s),o))};Se.displayName="TreeViewList";const I={badge:"pf-c-badge",modifiers:{compact:"pf-m-compact",guides:"pf-m-guides",expanded:"pf-m-expanded",noBackground:"pf-m-no-background",current:"pf-m-current",read:"pf-m-read",selectable:"pf-m-selectable",truncate:"pf-m-truncate"},themeDark:"pf-theme-dark",treeView:"pf-c-tree-view",treeViewAction:"pf-c-tree-view__action",treeViewContent:"pf-c-tree-view__content",treeViewListItem:"pf-c-tree-view__list-item",treeViewNode:"pf-c-tree-view__node",treeViewNodeCheck:"pf-c-tree-view__node-check",treeViewNodeContainer:"pf-c-tree-view__node-container",treeViewNodeContent:"pf-c-tree-view__node-content",treeViewNodeCount:"pf-c-tree-view__node-count",treeViewNodeIcon:"pf-c-tree-view__node-icon",treeViewNodeText:"pf-c-tree-view__node-text",treeViewNodeTitle:"pf-c-tree-view__node-title",treeViewNodeToggle:"pf-c-tree-view__node-toggle",treeViewNodeToggleIcon:"pf-c-tree-view__node-toggle-icon",treeViewSearch:"pf-c-tree-view__search"},lt=({name:e,title:t,id:i,isExpanded:o,defaultExpanded:s=!1,children:u=null,onSelect:m,onCheck:a,hasCheck:n=!1,checkProps:c={checked:!1},hasBadge:b=!1,customBadgeContent:l,badgeProps:v={isRead:!0},isSelectable:p=!1,isCompact:w,activeItems:_=[],itemData:$,parentItem:B,icon:F,expandedIcon:A,action:L,compareItems:V,useMemo:h})=>{const[k,T]=y(s);De(()=>{o!=null?T(o):s!=null&&T(k||s)},[o,s]);let S="button";n?S="label":p&&(S="div");const j=n||p?"button":"span",K=d=>N.createElement(j,Object.assign({className:x(I.treeViewNodeToggle),onClick:C=>{(p||n)&&T(!k),p&&C.stopPropagation()}},(n||p)&&{"aria-labelledby":`label-${d}`},{tabIndex:-1}),N.createElement("span",{className:x(I.treeViewNodeToggleIcon)},N.createElement(Re,{"aria-hidden":"true"}))),W=d=>N.createElement("span",{className:x(I.treeViewNodeCheck)},N.createElement("input",Object.assign({type:"checkbox",onChange:C=>a&&a(C,$,B),onClick:C=>C.stopPropagation(),ref:C=>C&&(C.indeterminate=c.checked===null)},c,{checked:c.checked===null?!1:c.checked,id:d,tabIndex:-1}))),U=N.createElement("span",{className:x(I.treeViewNodeIcon)},!k&&F,k&&(A||F)),z=()=>{const d=N.createElement(N.Fragment,null,w&&t&&N.createElement("span",{className:x(I.treeViewNodeTitle)},t),p?N.createElement("button",{tabIndex:-1,className:x(I.treeViewNodeText)},e):N.createElement("span",{className:x(I.treeViewNodeText)},e));return w?N.createElement("span",{className:x(I.treeViewNodeContent)},d):d},g=N.createElement(N.Fragment,null,b&&u&&N.createElement("span",{className:x(I.treeViewNodeCount)},N.createElement(re,Object.assign({},v),l||u.props.data.length)),b&&!u&&l!==void 0&&N.createElement("span",{className:x(I.treeViewNodeCount)},N.createElement(re,Object.assign({},v),l)));return N.createElement("li",Object.assign({id:i,className:x(I.treeViewListItem,k&&I.modifiers.expanded)},k&&{"aria-expanded":"true"},{role:"treeitem",tabIndex:-1}),N.createElement("div",{className:x(I.treeViewContent)},N.createElement(Be,{prefix:p?"selectable-id":"checkbox-id"},d=>N.createElement(S,Object.assign({className:x(I.treeViewNode,u&&(p||n)&&I.modifiers.selectable,(!u||p)&&_&&_.length>0&&_.some(C=>V&&C&&V(C,$))?I.modifiers.current:""),onClick:C=>{n||(m&&m(C,$,B),!p&&u&&C.isDefaultPrevented()!==!0&&T(!k))}},n&&{htmlFor:d},(n||p&&u)&&{id:`label-${d}`}),N.createElement("span",{className:x(I.treeViewNodeContainer)},u&&K(d),n&&W(d),F&&U,z(),g))),L&&N.createElement("div",{className:x(I.treeViewAction)},L)),k&&u)},Ve=N.memo(lt,(e,t)=>{if(!t.useMemo)return!1;const i=e.activeItems&&e.activeItems.length>0&&e.activeItems.some(s=>e.compareItems&&s&&e.compareItems(s,e.itemData)),o=t.activeItems&&t.activeItems.length>0&&t.activeItems.some(s=>t.compareItems&&s&&t.compareItems(s,t.itemData));return!(i||o||e.name!==t.name||e.title!==t.title||e.id!==t.id||e.isExpanded!==t.isExpanded||e.defaultExpanded!==t.defaultExpanded||e.onSelect!==t.onSelect||e.onCheck!==t.onCheck||e.hasCheck!==t.hasCheck||e.checkProps!==t.checkProps||e.hasBadge!==t.hasBadge||e.customBadgeContent!==t.customBadgeContent||e.badgeProps!==t.badgeProps||e.isCompact!==t.isCompact||e.icon!==t.icon||e.expandedIcon!==t.expandedIcon||e.action!==t.action||e.parentItem!==t.parentItem||e.itemData!==t.itemData)});Ve.displayName="TreeViewListItem";class dt extends G.Component{constructor(){super(...arguments),this.displayName="TreeViewRoot",this.treeRef=G.createRef(),this.handleKeys=t=>{var i,o,s,u,m,a,n;if(!this.treeRef.current.contains(t.target))return;const c=document.activeElement,b=t.key,l=Array.from((i=this.treeRef.current)===null||i===void 0?void 0:i.getElementsByClassName("pf-c-tree-view__node")).filter(v=>!v.classList.contains("pf-m-disabled"));if(b===ce.Space&&(c.click(),t.preventDefault()),he(t,l,v=>c===v,void 0,[],void 0,!0,!0),["ArrowLeft","ArrowRight"].includes(b)){const v=(s=(o=c?.firstElementChild)===null||o===void 0?void 0:o.firstElementChild)===null||s===void 0?void 0:s.classList.contains("pf-c-tree-view__node-toggle"),p=(u=c?.closest("li"))===null||u===void 0?void 0:u.classList.contains("pf-m-expanded");if(b==="ArrowLeft")if(v&&p)c.click();else{const w=(m=c?.closest("ul"))===null||m===void 0?void 0:m.parentElement;if(w?.tagName!=="DIV"){const _=w?.querySelector("button");c.tabIndex=-1,_&&(_.tabIndex=0,_.focus())}}else if(v&&!p){c.tabIndex=-1,c.click();const w=(n=(a=c?.closest("li"))===null||a===void 0?void 0:a.querySelector("ul > li"))===null||n===void 0?void 0:n.querySelector("button");w&&(w.tabIndex=0,w.focus())}t.preventDefault()}},this.handleKeysCheckbox=t=>{var i,o,s,u,m;if(!this.treeRef.current.contains(t.target))return;const a=document.activeElement,n=t.key;n===ce.Space&&(a.click(),t.preventDefault());const c=Array.from((i=this.treeRef.current)===null||i===void 0?void 0:i.getElementsByClassName("pf-c-tree-view__node"));he(t,c,b=>b.contains(a),b=>b.querySelector("button,input"),[],void 0,!0,!0),["ArrowLeft","ArrowRight"].includes(n)&&(n==="ArrowLeft"?a?.tagName==="INPUT"?!((o=a?.parentElement)===null||o===void 0)&&o.previousSibling&&a.parentElement.previousSibling.focus():a?.previousSibling&&(((s=a.previousElementSibling)===null||s===void 0?void 0:s.tagName)==="SPAN"?a.previousSibling.firstChild.focus():a.previousSibling.focus()):a?.tagName==="INPUT"?!((u=a.parentElement)===null||u===void 0)&&u.nextSibling&&a.parentElement.nextSibling.focus():a?.nextSibling&&(((m=a.nextElementSibling)===null||m===void 0?void 0:m.tagName)==="SPAN"?a.nextSibling.firstChild.focus():a.nextSibling.focus()),t.preventDefault())},this.variantStyleModifiers={default:"",compact:I.modifiers.compact,compactNoBackground:[I.modifiers.compact,I.modifiers.noBackground]}}componentDidMount(){var t;if(le&&window.addEventListener("keydown",this.props.hasChecks||this.props.hasSelectableNodes?this.handleKeysCheckbox:this.handleKeys),this.props.hasChecks||this.props.hasSelectableNodes){const i=this.treeRef.current.getElementsByClassName("pf-c-tree-view__node-toggle")[0];if(i&&(i.tabIndex=0),this.props.hasChecks){const o=this.treeRef.current.getElementsByTagName("INPUT")[0];o&&(o.tabIndex=0)}if(this.props.hasSelectableNodes){const o=this.treeRef.current.getElementsByClassName("pf-c-tree-view__node-text")[0];o&&(o.tabIndex=0)}}else((t=this.treeRef.current)===null||t===void 0?void 0:t.getElementsByClassName("pf-c-tree-view__node")[0]).tabIndex=0}componentWillUnmount(){le&&window.removeEventListener("keydown",this.props.hasChecks||this.props.hasSelectableNodes?this.handleKeysCheckbox:this.handleKeys)}render(){const t=this.props,{children:i,hasChecks:o,hasGuides:s,variant:u,className:m,hasSelectableNodes:a}=t,n=X(t,["children","hasChecks","hasGuides","variant","className","hasSelectableNodes"]);return G.createElement("div",Object.assign({className:x(I.treeView,s&&I.modifiers.guides,this.variantStyleModifiers[u],m),ref:this.treeRef},n),i)}}const se=e=>{var{data:t,isNested:i=!1,hasChecks:o=!1,hasBadges:s=!1,hasGuides:u=!1,hasSelectableNodes:m=!1,variant:a="default",defaultAllExpanded:n=!1,allExpanded:c,icon:b,expandedIcon:l,parentItem:v,onSelect:p,onCheck:w,toolbar:_,activeItems:$,compareItems:B=(h,k)=>h.id===k.id,className:F,useMemo:A}=e,L=X(e,["data","isNested","hasChecks","hasBadges","hasGuides","hasSelectableNodes","variant","defaultAllExpanded","allExpanded","icon","expandedIcon","parentItem","onSelect","onCheck","toolbar","activeItems","compareItems","className","useMemo"]);const V=G.createElement(Se,{isNested:i,toolbar:_},t.map(h=>{var k,T;return G.createElement(Ve,Object.assign({key:((k=h.id)===null||k===void 0?void 0:k.toString())||((T=h.name)===null||T===void 0?void 0:T.toString()),name:h.name,title:h.title,id:h.id,isExpanded:c,isSelectable:m,defaultExpanded:h.defaultExpanded!==void 0?h.defaultExpanded:n,onSelect:p,onCheck:w,hasCheck:h.hasCheck!==void 0?h.hasCheck:o,checkProps:h.checkProps,hasBadge:h.hasBadge!==void 0?h.hasBadge:s,customBadgeContent:h.customBadgeContent,badgeProps:h.badgeProps,activeItems:$,parentItem:v,itemData:h,icon:h.icon!==void 0?h.icon:b,expandedIcon:h.expandedIcon!==void 0?h.expandedIcon:l,action:h.action,compareItems:B,isCompact:a==="compact"||a==="compactNoBackground",useMemo:A},h.children&&{children:G.createElement(se,{data:h.children,isNested:!0,parentItem:h,hasChecks:o,hasBadges:s,hasGuides:u,hasSelectableNodes:m,variant:a,allExpanded:c,defaultAllExpanded:n,onSelect:p,onCheck:w,activeItems:$,icon:b,expandedIcon:l})}))}));return G.createElement(G.Fragment,null,v?V:G.createElement(dt,Object.assign({hasSelectableNodes:m,hasChecks:o,hasGuides:u,variant:a,className:F},L),V))};se.displayName="TreeView";var ut=ct(function(e){var t=Me(e);return me(t)&&(t=void 0),Fe(je(e,1,me,!0),$e(t))});const pe=ut,mt=({group:{path:e},onMouseEnter:t,...i})=>{const[o,s]=y(""),m=r("span",{onMouseEnter:a=>{s(e),t?.(a)},...i,children:e});return o!==""?r(ve,{content:o,isVisible:!0,children:m}):m},ge=({id:e,rename:t,handleModalToggle:i,refresh:o})=>{const{t:s}=J(),{addAlert:u,addError:m}=ae(),{register:a,handleSubmit:n,formState:{errors:c}}=Ke({defaultValues:{name:t?.name}}),b=async l=>{l.name=l.name?.trim();try{e?t?await M.groups.update({id:e},{...t,name:l.name}):await(l.id?M.groups.updateChildGroup({id:e},l):M.groups.createChildGroup({id:e},l)):await M.groups.create(l),o(t?{...t,name:l.name}:void 0),i(),u(s(t?"groupUpdated":"groupCreated"),ke.success)}catch(v){m("couldNotCreateGroup",v)}};return r(Ge,{variant:ne.small,title:s(t?"renameAGroup":"createAGroup"),isOpen:!0,onClose:i,actions:[r(H,{"data-testid":`${t?"rename":"create"}Group`,variant:"primary",type:"submit",form:"group-form",children:s(t?"rename":"create")},"confirm"),r(H,{id:"modal-cancel","data-testid":"cancel",variant:Ne.link,onClick:()=>{i()},children:s("cancel")},"cancel")],children:r(tt,{id:"group-form",isHorizontal:!0,onSubmit:n(b),children:r(Ue,{name:"create-modal-group",label:s("name"),fieldId:"create-group-name",helperTextInvalid:s("required"),validated:c.name?Z.error:Z.default,isRequired:!0,children:r(et,{"data-testid":"groupNameInput",autoFocus:!0,id:"create-group-name",validated:c.name?Z.error:Z.default,...a("name",{required:!0})})})})})},ft=({selectedRows:e,show:t,toggleDialog:i,refresh:o})=>{const{t:s}=J(),{addAlert:u,addError:m}=ae(),a=async()=>{try{for(const n of e)await M.groups.del({id:n.id});o(),u(s("groupDeleted",{count:e.length}))}catch(n){m("groupDeleteError",n)}};return r(at,{titleKey:s("deleteConfirmTitle",{count:e.length}),messageKey:s("deleteConfirmGroup",{count:e.length,groupName:e[0]?.name}),continueButtonLabel:"delete",continueButtonVariant:Ne.danger,onConfirm:a,open:t,toggleDialog:i})},ht=e=>e.id?M.groups.updateRoot(e):M.groups.create(e),pt=async(e,t)=>M.groups.updateChildGroup({id:t.id},e),gt=({source:e,onClose:t,refresh:i})=>{const{t:o}=J(),{addAlert:s,addError:u}=ae();return r(vt,{type:"selectOne",filterGroups:[e],text:{title:"moveToGroup",ok:"moveHere"},onClose:t,onConfirm:async a=>{try{await(a?pt(e,a[0]):ht(e)),i(),s(o("moveGroupSuccess"))}catch(n){u("moveGroupError",n)}},isMove:!0})};function ie(e){let t=e.length;for(const i of e)i.subGroups&&(t+=ie(i.subGroups));return t}const bt=({group:e,refresh:t})=>{const{t:i}=J(),[o,s]=Y(),[u,m]=Y(),[a,n]=Y(),[c,b]=Y(),[l,v]=Y(),p=we(),{realm:w}=Ce();return q(Te,{children:[u&&r(ge,{id:e.id,rename:e,refresh:()=>{p(te({realm:w})),t()},handleModalToggle:m}),a&&r(ge,{id:e.id,handleModalToggle:n,refresh:t}),c&&r(gt,{source:e,refresh:t,onClose:b}),r(ft,{show:l,toggleDialog:v,selectedRows:[e],refresh:()=>{p(te({realm:w})),t()}}),r(Ye,{toggle:r(Qe,{onToggle:s}),isOpen:o,isPlain:!0,position:Xe.right,dropdownItems:[r(P,{onClick:m,children:i("rename")},"rename"),r(P,{onClick:b,children:i("moveTo")},"move"),r(P,{onClick:n,children:i("createChildGroup")},"create"),r(Ze,{},"separator"),r(P,{onClick:v,children:i("delete")},"delete")]})]})},ee=50,Dt=({refresh:e,canViewDetails:t})=>{const{t:i}=J(),{realm:o}=Ce(),s=we(),{addAlert:u}=ae(),{hasAccess:m}=qe(),[a,n]=y(),[c,b]=y([]),{subGroups:l,setSubGroups:v}=He(),[p,w]=y(""),[_,$]=y(20),[B,F]=y(0),A=oe(0),L=oe(20),[V,h]=y(0),[k,T]=y(!1),[S,j]=y(),[K,W]=y(0),[U,z]=y(0),g=()=>{z(U+1),e()},d=(f,E)=>({id:f.id,name:r(ve,{content:f.name,children:r("span",{children:f.name})}),children:f.subGroups&&f.subGroups.length>0?f.subGroups.map(O=>d(O,E)):void 0,action:(m("manage-users")||f.access?.manage)&&r(bt,{group:f,refresh:E}),defaultExpanded:l.map(O=>O.id).includes(f.id)});Ee(async()=>{const f=await de("groups",Object.assign({first:`${B}`,max:`${_+1}`,exact:`${k}`,global:`${p!==""}`},p===""?null:{search:p}));let E=[];return S&&(E=await de(`groups/${S.id}/children`,{first:`${K}`,max:`${ee}`})),{groups:f,subGroups:E}},({groups:f,subGroups:E})=>{const O=[];if(S&&C(a||[],S.id,[],O),O.length&&E.length){const D=O.pop();D.children=[...(pe(D.children||[]).splice(0,ee),E.map(R=>d(R,g),"id")),...E.length===ee?[{id:"next",name:r(H,{variant:"plain",onClick:()=>W(K+ee),children:r(Ie,{})})}]:[]]}b(f),p||A.current!==B||L.current!==_?n(f.map(D=>d(D,g))):n(pe(a,f.map(D=>d(D,g)),"id")),h(ie(f)),A.current=B,L.current=_},[U,B,K,_,p,k,S]);const C=(f,E,O,D)=>f.map(R=>{D.length>0||("subGroups"in R&&R.subGroups?.length&&C(R.subGroups,E,[...O,R],D),"children"in R&&R.children&&C(R.children,E,[...O,R],D),R.id===E&&D.push(...O,R))});return a?r(ye,{count:V,first:B,max:_,onNextClick:F,onPreviousClick:F,onPerPageSelect:(f,E)=>{F(f),$(E)},inputGroupName:"searchForGroups",inputGroupPlaceholder:i("searchForGroups"),inputGroupOnEnter:w,toolbarItem:q(Je,{className:"pf-u-pt-sm",children:[r(ze,{id:"exact","data-testid":"exact-search",name:"exact",isChecked:k,onChange:f=>T(f)}),r("label",{htmlFor:"exact",className:"pf-u-pl-sm",children:i("exactSearch")})]}),children:a.length>0&&r(se,{data:a.slice(0,_),allExpanded:p.length>0,activeItems:S?[S]:void 0,hasGuides:!0,hasSelectableNodes:!0,className:"keycloak_groups_treeview",onSelect:(f,E)=>{if(E.id==="next")return;j(E);const O=E.id?.substring(E.id.lastIndexOf("/")+1),D=[];C(c,O,[],D),v(D),t||D.at(-1)?.access?.view?(s(te({realm:o,id:E.id})),g()):(u(i("noViewRights"),ke.warning),s(te({realm:o})))}})}):r(We,{})},vt=({id:e,type:t,filterGroups:i,text:o,canBrowse:s=!0,isMove:u=!1,onClose:m,onConfirm:a})=>{const{t:n}=J(),[c,b]=y([]),[l,v]=y([]),[p,w]=y([]),[_,$]=y(""),[B,F]=y([]),[A,L]=y(),[V,h]=y(!1),[k,T]=y(10),[S,j]=y(0),[K,W]=y(0),U=()=>l[l.length-1];Ee(async()=>{let g,d,C;if(A){if(!l.map(({id:f})=>f).includes(A)&&(g=await M.groups.findOne({id:A}),!g))throw new Error(n("notFound"));if(g?.id){const f={first:S,max:k+1,parentId:g.id};d=await M.groups.listSubGroups(f)}}else{const f={first:S,max:k+1};V&&(f.search=_),d=await M.groups.find(f)}return e&&(C=await M.users.listGroups({id:e})),{group:g,groups:d,existingUserGroups:C}},async({group:g,groups:d,existingUserGroups:C})=>{F(C||[]),g&&v([...l,g]),d&&(d.forEach(f=>{f.checked=!!c.find(E=>E.id===f.id)}),w(d)),W(V?ie(d||[]):d?.length||0)},[A,_,S,k]);const z=g=>[...B.map(d=>d.id),...(i||[]).map(d=>d.id)].some(d=>d===g?.id);return r(Ge,{variant:V?ne.medium:ne.small,title:n(o.title,{group1:i?.[0]?.name,group2:l.length?U().name:n("root")}),isOpen:!0,onClose:m,actions:[r(H,{"data-testid":`${o.ok}-button`,variant:"primary",form:"group-form",onClick:()=>{a(t==="selectMany"?c:l.length?[U()]:void 0)},isDisabled:t==="selectMany"&&c.length===0,children:n(o.ok)},"confirm")],children:q(ye,{count:K-(A||V?S:0),first:S,max:k,onNextClick:j,onPreviousClick:j,onPerPageSelect:(g,d)=>{j(g),T(d)},inputGroupName:"search",inputGroupOnEnter:g=>{$(g),h(g!==""),j(0),T(10),v([]),L(void 0)},inputGroupPlaceholder:n("searchForGroups"),children:[q(Pe,{children:[l.length>0&&r(ue,{children:r(H,{variant:"link",onClick:()=>{L(void 0),v([]),j(0),T(10)},children:n("groups")})},"home"),l.map((g,d)=>q(ue,{children:[l.length-1!==d&&r(H,{variant:"link",onClick:()=>{L(g.id),v([...l].slice(0,d)),j(0),T(10)},children:g.name}),l.length-1===d&&g.name]},d))]}),r(nt,{"aria-label":n("groups"),isCompact:!0,children:p.slice(A?S:0,k+(A?S:0)).map(g=>q(Ae,{children:[r(be,{group:g,isRowDisabled:z,onSelect:L,type:t,isSearching:V,setIsSearching:h,selectedRows:c,setSelectedRows:b,canBrowse:s},g.id),V&&g.subGroups?.map(d=>r(be,{group:d,isRowDisabled:z,onSelect:L,type:t,isSearching:V,setIsSearching:h,selectedRows:c,setSelectedRows:b,canBrowse:s},d.id))]},g.id))}),p.length===0&&!V&&r(fe,{hasIcon:!1,message:n("moveGroupEmpty"),instructions:u?n("moveGroupEmptyInstructions"):void 0}),p.length===0&&V&&r(fe,{message:n("noSearchResults"),instructions:n("noSearchResultsInstructions")})]})})},be=({group:e,type:t,isRowDisabled:i,isSearching:o,setIsSearching:s,onSelect:u,selectedRows:m,setSelectedRows:a,canBrowse:n})=>{const{t:c}=J();return r(st,{"aria-labelledby":e.name,id:e.id,onClick:b=>{t==="selectOne"?u(e.id):b.target.type!=="checkbox"&&(u(e.id),s(!1))},children:q(it,{className:`join-group-dialog-row${i(e)?"-m-disabled":""}`,"data-testid":e.name,children:[t==="selectMany"&&r(_e,{className:"kc-join-group-modal-check","data-testid":`${e.name}-check`,"aria-label":e.name,checked:e.checked,isDisabled:i(e),onChange:b=>{e.checked=b;let l=[];e.checked?l=[...m,e]:l=m.filter(v=>v.id!==e.id),a(l)},"aria-labelledby":`select-${e.name}`}),r(ot,{dataListCells:[r(rt,{className:"keycloak-groups-group-path",children:o?r(mt,{id:`select-${e.name}`,group:e}):r("span",{id:`select-${e.name}`,children:e.name})},`name-${e.id}`)]}),r(xe,{id:"actions","aria-labelledby":`select-${e.name}`,"aria-label":c("groupName"),isPlainButtonAction:!0,children:(n||t==="selectOne")&&r(H,{variant:"link","aria-label":c("select"),children:r(Ie,{})})})]})},e.id)};export{ft as D,vt as G,gt as M,ge as a,mt as b,Dt as c};
//# sourceMappingURL=GroupPickerDialog-gC2-xBPw.js.map
