import{jsxs as d,Fragment as F,jsx as e}from"react/jsx-runtime";import{useState as T}from"react";import{u as U,d as k,f as z,g as V,r as H,b7 as c,K as L,P as q,F as m,i as p,V as n,B as u,m as C,L as K,j as h,A as j}from"./index-sihFV1NS.js";import{F as B}from"./FormAccess-EK-4wbwg.js";import{K as f}from"./KeycloakTextInput--S1SG2UN.js";import{V as E}from"./ViewHeader-xo54NRb6.js";import{u as P}from"./useParams-OD1jI_R2.js";import{u as G}from"./useToggle-mZS4AEtR.js";import{D as R}from"./DeleteScopeDialog-7uqkIpOA.js";import{A as O}from"./Form-bfj-xQZn.js";import"react-dom";import"./copy-icon-WaWzxYgU.js";import"./ToolbarContent-46I9Yg7h.js";import"./ConfirmDialog-WMVurgkl.js";import"./Modal-uOAPm2rX.js";function ne(){const{t:a}=U(),{id:i,scopeId:r,realm:l}=P(),g=k(),{addAlert:y,addError:A}=z(),[N,b]=G(),[o,I]=T(),{register:s,reset:v,handleSubmit:D,formState:{errors:S}}=V({mode:"onChange"});H(async()=>{if(r){const t=await h.clients.getAuthorizationScope({id:i,scopeId:r});if(!t)throw new Error(a("notFound"));return t}},t=>{I(t),v({...t})},[]);const w=async t=>{try{r?(await h.clients.updateAuthorizationScope({id:i,scopeId:r},t),I(t)):(await h.clients.createAuthorizationScope({id:i},{name:t.name,displayName:t.displayName,iconUri:t.iconUri}),g(c({realm:l,clientId:i,tab:"scopes"}))),y(a((r?"update":"create")+"ScopeSuccess"),j.success)}catch(x){A("scopeSaveError",x)}};return d(F,{children:[e(R,{clientId:i,open:N,toggleDialog:b,selectedScope:o,refresh:()=>g(c({realm:l,clientId:i,tab:"scopes"}))}),e(E,{titleKey:r?o?.name:a("createAuthorizationScope"),dropdownItems:r?[e(L,{"data-testid":"delete-resource",onClick:()=>b(),children:a("delete")},"delete")]:void 0}),e(q,{variant:"light",children:d(B,{isHorizontal:!0,role:"view-clients",onSubmit:D(w),children:[e(m,{label:a("name"),fieldId:"name",labelIcon:e(p,{helpText:a("scopeNameHelp"),fieldLabelId:"name"}),helperTextInvalid:a("required"),validated:S.name?n.error:n.default,isRequired:!0,children:e(f,{id:"name",validated:S.name?n.error:n.default,isRequired:!0,...s("name",{required:!0})})}),e(m,{label:a("displayName"),fieldId:"displayName",labelIcon:e(p,{helpText:a("scopeDisplayNameHelp"),fieldLabelId:"displayName"}),children:e(f,{id:"displayName",...s("displayName")})}),e(m,{label:a("iconUri"),fieldId:"iconUri",labelIcon:e(p,{helpText:a("iconUriHelp"),fieldLabelId:"iconUri"}),children:e(f,{id:"iconUri",...s("iconUri")})}),e(O,{children:d("div",{className:"pf-u-mt-md",children:[e(u,{variant:C.primary,type:"submit","data-testid":"save",children:a("save")}),o?e(u,{variant:"link","data-testid":"revert",onClick:()=>v({...o}),children:a("revert")}):e(u,{variant:"link","data-testid":"cancel",component:t=>e(K,{...t,to:c({realm:l,clientId:i,tab:"scopes"})}),children:a("cancel")})]})})]})})]})}export{ne as default};
//# sourceMappingURL=ScopeDetails-1EErVsU8.js.map
