import{jsxs as o,jsx as e,Fragment as x}from"react/jsx-runtime";import{useState as I}from"react";import{u as b,af as y,A as f,F as l,g as S,e as V,f as F,d as N,aw as p,P as H,i as h,C as v,B as g,L,j as w}from"./index-sihFV1NS.js";import{b as D,F as M}from"./FormAccess-EK-4wbwg.js";import{V as j}from"./ViewHeader-xo54NRb6.js";import{T as P}from"./TimeSelector-UGEjvSE_.js";import{M as B,a as E}from"./Modal-uOAPm2rX.js";import{F as G,A as K}from"./Form-bfj-xQZn.js";import{N as O}from"./NumberInput-QtFengwl.js";import"react-dom";import"./copy-icon-WaWzxYgU.js";import"./ToolbarContent-46I9Yg7h.js";import"./minus-icon-3MARcJXf.js";import"./plus-icon-zbmNbCLY.js";const R=({token:t,toggleDialog:r})=>{const{t:n}=b();return o(B,{title:n("initialAccessTokenDetails"),isOpen:!0,onClose:r,variant:E.medium,children:[e(y,{title:n("copyInitialAccessToken"),titleHeadingLevel:"h2",isInline:!0,variant:f.warning}),e(G,{className:"pf-u-mt-md",children:e(l,{label:n("initialAccessToken"),fieldId:"initialAccessToken",children:e(D,{id:"initialAccessToken",isReadOnly:!0,children:t})})})]})};function ie(){const{t}=b(),{handleSubmit:r,control:n,formState:{isValid:k,errors:c}}=S({mode:"onChange"}),{realm:s}=V(),{addAlert:A,addError:C}=F(),T=N(),[u,d]=I("");return o(x,{children:[u&&e(R,{token:u,toggleDialog:()=>{d(""),A(t("tokenSaveSuccess"),f.success),T(p({realm:s,tab:"initial-access-token"}))}}),e(j,{titleKey:"createToken",subKey:"createTokenHelp"}),e(H,{variant:"light",children:o(M,{isHorizontal:!0,role:"create-client",onSubmit:r(async a=>{try{const i=await w.realms.createClientsInitialAccess({realm:s},a);d(i.token)}catch(i){C("tokenSaveError",i)}}),children:[e(l,{label:t("expiration"),fieldId:"expiration",labelIcon:e(h,{helpText:t("expirationHelp"),fieldLabelId:"expiration"}),helperTextInvalid:t("expirationValueNotValid"),validated:c.expiration?"error":"default",children:e(v,{name:"expiration",defaultValue:86400,control:n,rules:{min:1},render:({field:a})=>e(P,{"data-testid":"expiration",value:a.value,onChange:a.onChange,min:1,validated:c.expiration?"error":"default"})})}),e(l,{label:t("count"),fieldId:"count",labelIcon:e(h,{helpText:t("countHelp"),fieldLabelId:"count"}),children:e(v,{name:"count",defaultValue:1,control:n,render:({field:a})=>e(O,{"data-testid":"count",inputName:"count",inputAriaLabel:t("count"),min:1,value:a.value,onPlus:()=>a.onChange(a.value+1),onMinus:()=>a.onChange(a.value-1),onChange:i=>{const m=Number(i.target.value);a.onChange(m<1?1:m)}})})}),o(K,{children:[e(g,{variant:"primary",type:"submit","data-testid":"save",isDisabled:!k,children:t("save")}),e(g,{"data-testid":"cancel",variant:"link",component:a=>e(L,{...a,to:p({realm:s,tab:"initial-access-token"})}),children:t("cancel")})]})]})})]})}export{ie as default};
//# sourceMappingURL=CreateInitialAccessToken-msZHqREJ.js.map
