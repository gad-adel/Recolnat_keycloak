import{jsxs as s,Fragment as v,jsx as e}from"react/jsx-runtime";import{u as C,d as b,e as w,g as A,f as x,P as S,h as T,F as j,B as c,L as k,aw as I,G as E,aa as V,ab as P,j as i,ac as H,H as K,A as L,am as O}from"./index-sihFV1NS.js";import{useState as G}from"react";import{F as U}from"./FormAccess-EK-4wbwg.js";import{F as $}from"./FileUploadForm-NPdolxQM.js";import{K as z}from"./KeycloakTextInput--S1SG2UN.js";import{V as B}from"./ViewHeader-xo54NRb6.js";import{C as N,a as R}from"./ClientDescription-nfMy2LGM.js";import{L as W}from"./CodeEditor-7uqvO0EK.js";import{A as D}from"./Form-bfj-xQZn.js";import"react-dom";import"./copy-icon-WaWzxYgU.js";import"./FileUpload-LIezXv7x.js";import"./Modal-uOAPm2rX.js";import"./ToolbarContent-46I9Yg7h.js";import"./useIsFeatureEnabled-qmmJPqO8.js";import"./SwitchControl-KreblmOr.js";import"./EmptyStateBody-jnnI7hpP.js";import"./EmptyStateSecondaryActions-G5doWCZ5.js";const J=a=>a.match(/(<.[^(><.)]+>)/g);function ut(){const{t:a}=C(),m=b(),{realm:o}=w(),n=A(),{register:p,handleSubmit:d,setValue:u}=n,[h,f]=G({}),{addAlert:g,addError:l}=x(),y=async r=>{try{const t=await F(r);E(t,u),f(t)}catch(t){l("importParseError",t)}};async function F(r){if(!J(r))return JSON.parse(r);const t=await V(`${H(i.baseUrl)}admin/realms/${o}/client-description-converter`,{method:"POST",body:r,headers:P(await i.getAccessToken())});if(!t.ok)throw new Error(`Server responded with invalid status: ${t.statusText}`);return t.json()}return s(v,{children:[e(B,{titleKey:"importClient",subKey:"clientsExplain"}),e(S,{variant:"light",children:e(U,{isHorizontal:!0,onSubmit:d(async r=>{try{const t=await i.clients.create({...h,...K({...r,attributes:r.attributes||{}})});g(a("clientImportSuccess"),L.success),m(O({realm:o,clientId:t.id,tab:"settings"}))}catch(t){l("clientImportError",t)}}),role:"manage-clients",children:s(T,{...n,children:[e($,{id:"realm-file",language:W.json,extension:".json,.xml",helpText:a("helpFileUploadClient"),onChange:y}),e(N,{hasConfigureAccess:!0}),e(j,{label:a("type"),fieldId:"kc-type",children:e(z,{id:"kc-type",isReadOnly:!0,...p("protocol")})}),e(R,{unWrap:!0}),s(D,{children:[e(c,{variant:"primary",type:"submit",children:a("save")}),e(c,{variant:"link",component:r=>e(k,{...r,to:I({realm:o})}),children:a("cancel")})]})]})})})]})}export{ut as default};
//# sourceMappingURL=ImportForm-M6f6zi0g.js.map
