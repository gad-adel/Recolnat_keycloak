import*as e from"react";import{useState as Fe}from"react";import{ck as fe,o as ve,_ as D,l as w,av as Me,B as _,F as se,aM as le,cB as Ue,m as $,au as he,aN as ge,Y as z,bt as Ve,as as Ke,bd as qe,u as We,a5 as ze}from"./index-sihFV1NS.js";import{jsxs as ie,Fragment as Qe,jsx as O}from"react/jsx-runtime";import{T as oe,a as be,b as Ye}from"./ToolbarContent-46I9Yg7h.js";import{F as Je,A as Xe,a as Ze}from"./Form-bfj-xQZn.js";const et=(n,t,r=p=>document.activeElement.contains(p),s=p=>p,g=["A","BUTTON","INPUT"],b=!1,v=!1,I=!0,y=!0)=>{const p=document.activeElement,u=n.key;let o=null;if(!b&&["ArrowUp","ArrowDown"].includes(u)){n.preventDefault(),n.stopImmediatePropagation();let l=-1;t.forEach((N,m)=>{if(r(N)){let c=0;for(;!o&&c<t.length&&c*-1<t.length;)u==="ArrowUp"?c--:c++,l=m+c,l>=t.length&&(l=0),l<0&&(l=t.length-1),o=s(t[l])}})}if(!v&&["ArrowLeft","ArrowRight"].includes(u)){n.preventDefault(),n.stopImmediatePropagation();let l=-1;t.forEach((N,m)=>{if(r(N)){const c=t[m].querySelectorAll(g.join(","));if(!c.length||y){let h=p;for(;h;)if(h=u==="ArrowLeft"?h.previousElementSibling:h.nextElementSibling,h&&g.includes(h.tagName)){o=h;break}}else c.forEach((h,G)=>{n.target===h&&(l=G+(u==="ArrowLeft"?-1:1),l>=c.length&&(l=0),l<0&&(l=c.length-1),o=c[l])})}})}o&&(I&&(p.tabIndex=-1,o.tabIndex=0),o.focus())},mt=n=>{n&&n.length>0&&(n.forEach(t=>{t.tabIndex=-1}),n[0].tabIndex=0)};class Ee extends e.Component{constructor(){super(...arguments),this.keyHandler=t=>{const{isEventFromContainer:r}=this.props;if(r?!r(t):!this._isEventFromContainer(t))return;const{isActiveElement:s,getFocusableElement:g,noVerticalArrowHandling:b,noHorizontalArrowHandling:v,noEnterHandling:I,noSpaceHandling:y,updateTabIndex:p,validSiblingTags:u,additionalKeyHandler:o,createNavigableElements:l,onlyTraverseSiblings:N}=this.props;o&&o(t);const m=l();if(!m){console.warn("No navigable elements have been passed to the KeyboardHandler. Keyboard navigation provided by this component will be ignored.");return}const c=t.key;I||c==="Enter"&&(t.preventDefault(),t.stopImmediatePropagation(),document.activeElement.click()),y||c===" "&&(t.preventDefault(),t.stopImmediatePropagation(),document.activeElement.click()),et(t,m,s,g,u,b,v,p,N)},this._isEventFromContainer=t=>{const{containerRef:r}=this.props;return r.current&&r.current.contains(t.target)}}componentDidMount(){fe&&window.addEventListener("keydown",this.keyHandler)}componentWillUnmount(){fe&&window.removeEventListener("keydown",this.keyHandler)}render(){return null}}Ee.displayName="KeyboardHandler";Ee.defaultProps={containerRef:null,createNavigableElements:()=>null,isActiveElement:n=>document.activeElement===n,getFocusableElement:n=>n,validSiblingTags:["BUTTON","A"],onlyTraverseSiblings:!0,updateTabIndex:!0,noHorizontalArrowHandling:!1,noVerticalArrowHandling:!1,noEnterHandling:!1,noSpaceHandling:!1};const tt={name:"AngleUpIcon",height:512,width:320,svgPath:"M177 159.7l136 136c9.4 9.4 9.4 24.6 0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9 0L160 255.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9 0L7 329.7c-9.4-9.4-9.4-24.6 0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1z",yOffset:0,xOffset:0},nt=ve(tt),at=nt,rt={name:"ArrowRightIcon",height:512,width:448,svgPath:"M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z",yOffset:0,xOffset:0},st=ve(rt),lt=st,j={modifiers:{bordered:"pf-m-bordered",raised:"pf-m-raised",scrollable:"pf-m-scrollable"},panel:"pf-c-panel",panelFooter:"pf-c-panel__footer",panelHeader:"pf-c-panel__header",panelMain:"pf-c-panel__main",panelMainBody:"pf-c-panel__main-body"},it=n=>{var{className:t,children:r,variant:s,isScrollable:g,innerRef:b}=n,v=D(n,["className","children","variant","isScrollable","innerRef"]);return e.createElement("div",Object.assign({className:w(j.panel,s==="raised"&&j.modifiers.raised,s==="bordered"&&j.modifiers.bordered,g&&j.modifiers.scrollable,t),ref:b},v),r)},Ie=e.forwardRef((n,t)=>e.createElement(it,Object.assign({innerRef:t},n)));Ie.displayName="Panel";const xe=n=>{var{className:t,children:r,maxHeight:s}=n,g=D(n,["className","children","maxHeight"]);return e.createElement("div",Object.assign({className:w(j.panelMain,t),style:{"--pf-c-panel__main--MaxHeight":s}},g),r)};xe.displayName="PanelMain";const ye=n=>{var{className:t,children:r}=n,s=D(n,["className","children"]);return e.createElement("div",Object.assign({className:w(j.panelMainBody,t)},s),r)};ye.displayName="PanelMainBody";const Ne=({className:n,parentRef:t,parentInputRef:r,value:s="",attributes:g=[],formAdditionalItems:b,hasWordsAttrLabel:v="Has words",advancedSearchDelimiter:I,getAttrValueMap:y,onChange:p,onSearch:u,onClear:o,resetButtonLabel:l="Reset",submitSearchButtonLabel:N="Search",isSearchMenuOpen:m,onToggleAdvancedMenu:c})=>{const h=e.useRef(null),[G,S]=e.useState(!1);e.useEffect(()=>{g.length>0&&!I&&console.error("AdvancedSearchMenu: An advancedSearchDelimiter prop is required when advanced search attributes are provided using the attributes prop")}),e.useEffect(()=>{m&&h&&h.current?(h.current.focus(),S(!0)):!m&&G&&r&&r.current&&r.current.focus()},[m]),e.useEffect(()=>(document.addEventListener("mousedown",P),document.addEventListener("touchstart",P),document.addEventListener("keydown",F),function(){document.removeEventListener("mousedown",P),document.removeEventListener("touchstart",P),document.removeEventListener("keydown",F)}));const P=d=>{const f=t&&t.current.contains(d.target);m&&!f&&c(d)},F=d=>{m&&d.key===Me.Escape&&t&&t.current.contains(d.target)&&(c(d),r&&r.current.focus())},Q=d=>{d.preventDefault(),u&&u(d,s,y()),m&&c(d)},M=(d,f,E)=>{const k=y();k[d]=f;let x="";Object.entries(k).forEach(([R,B])=>{if(B.trim()!==""){const W=B.includes(" ")?`'${B.replace(/(^'|'$)/g,"")}'`:B;R!=="haswords"?x=`${x} ${R}${I}${W}`:x=`${x} ${W}`}}),p&&p(E,x.replace(/^\s+/g,""))},U=d=>{const f=y();return f.hasOwnProperty(d)?f[d]:""},Y=()=>{const d=[];return g.forEach((f,E)=>{const k=typeof f=="string"?f:f.display,x=typeof f=="string"?f:f.attr;E===0?d.push(e.createElement(se,{label:k,fieldId:`${x}_${E}`,key:`${f}_${E}`},e.createElement(le,{ref:h,type:"text",id:`${x}_${E}`,value:U(x),onChange:(R,B)=>M(x,R,B)}))):d.push(e.createElement(se,{label:k,fieldId:`${x}_${E}`,key:`${f}_${E}`},e.createElement(le,{type:"text",id:`${x}_${E}`,value:U(x),onChange:(R,B)=>M(x,R,B)})))}),d.push(e.createElement(Ue,{key:"hasWords"},f=>e.createElement(se,{label:v,fieldId:f},e.createElement(le,{type:"text",id:f,value:U("haswords"),onChange:(E,k)=>M("haswords",E,k)})))),d};return m?e.createElement(Ie,{variant:"raised",className:w(n)},e.createElement(xe,null,e.createElement(ye,null,e.createElement(Je,null,Y(),b||null,e.createElement(Xe,null,e.createElement(_,{variant:"primary",type:"submit",onClick:Q,isDisabled:!s},N),!!o&&e.createElement(_,{variant:"link",type:"reset",onClick:o},l)))))):null};Ne.displayName="SearchInput";const C={button:"pf-c-button",chipGroupMain:"pf-c-chip-group__main",modifiers:{disabled:"pf-m-disabled",plain:"pf-m-plain",icon:"pf-m-icon",hint:"pf-m-hint"},textInputGroup:"pf-c-text-input-group",textInputGroupGroup:"pf-c-text-input-group__group",textInputGroupIcon:"pf-c-text-input-group__icon",textInputGroupMain:"pf-c-text-input-group__main",textInputGroupText:"pf-c-text-input-group__text",textInputGroupTextInput:"pf-c-text-input-group__text-input",textInputGroupUtilities:"pf-c-text-input-group__utilities"},we=e.createContext({isDisabled:!1}),Ae=n=>{var{children:t,className:r,isDisabled:s,isPlain:g,innerRef:b}=n,v=D(n,["children","className","isDisabled","isPlain","innerRef"]);const I=e.useRef(null),y=b||I;return e.createElement(we.Provider,{value:{isDisabled:s}},e.createElement("div",Object.assign({ref:y,className:w(C.textInputGroup,s&&C.modifiers.disabled,g&&C.modifiers.plain,r)},v),t))};Ae.displayName="TextInputGroup";const Se=n=>{var{children:t,className:r,icon:s,type:g="text",hint:b,onChange:v=()=>{},onFocus:I,onBlur:y,"aria-label":p="Type to filter",value:u,placeholder:o,innerRef:l,name:N}=n,m=D(n,["children","className","icon","type","hint","onChange","onFocus","onBlur","aria-label","value","placeholder","innerRef","name"]);const{isDisabled:c}=e.useContext(we),h=e.useRef(null),G=l||h,S=P=>{v(P,P.currentTarget.value)};return e.createElement("div",Object.assign({className:w(C.textInputGroupMain,s&&C.modifiers.icon,r)},m),t,e.createElement("span",{className:w(C.textInputGroupText)},b&&e.createElement("input",{className:w(C.textInputGroupTextInput,C.modifiers.hint),type:"text",disabled:!0,"aria-hidden":"true",value:b}),s&&e.createElement("span",{className:w(C.textInputGroupIcon)},s),e.createElement("input",{ref:G,type:g,className:w(C.textInputGroupTextInput),"aria-label":p,disabled:c,onChange:S,onFocus:I,onBlur:y,value:u||"",placeholder:o,name:N})))};Se.displayName="TextInputGroupMain";const Te=n=>{var{children:t,className:r}=n,s=D(n,["children","className"]);return e.createElement("div",Object.assign({className:w(C.textInputGroupUtilities,r)},s),t)};Te.displayName="TextInputGroupUtilities";const Ce=n=>{var{className:t,value:r="",attributes:s=[],formAdditionalItems:g,hasWordsAttrLabel:b="Has words",advancedSearchDelimiter:v,placeholder:I,hint:y,onChange:p,onSearch:u,onClear:o,onToggleAdvancedSearch:l,isAdvancedSearchOpen:N,resultsCount:m,onNextClick:c,onPreviousClick:h,innerRef:G,expandableInput:S,"aria-label":P="Search input",resetButtonLabel:F="Reset",openMenuButtonAriaLabel:Q="Open advanced search",previousNavigationButtonAriaLabel:M="Previous",isPreviousNavigationButtonDisabled:U=!1,isNextNavigationButtonDisabled:Y=!1,nextNavigationButtonAriaLabel:d="Next",submitSearchButtonLabel:f="Search",isDisabled:E=!1,appendTo:k,removeFindDomNode:x=!1,zIndex:R=9999,type:B="text",name:W}=n,J=D(n,["className","value","attributes","formAdditionalItems","hasWordsAttrLabel","advancedSearchDelimiter","placeholder","hint","onChange","onSearch","onClear","onToggleAdvancedSearch","isAdvancedSearchOpen","resultsCount","onNextClick","onPreviousClick","innerRef","expandableInput","aria-label","resetButtonLabel","openMenuButtonAriaLabel","previousNavigationButtonAriaLabel","isPreviousNavigationButtonDisabled","isNextNavigationButtonDisabled","nextNavigationButtonAriaLabel","submitSearchButtonLabel","isDisabled","appendTo","removeFindDomNode","zIndex","type","name"]);const[V,X]=e.useState(!1),[Z,ee]=e.useState(r),K=e.useRef(null),ke=e.useRef(null),L=G||ke,q=e.useRef(null),[ce,ue]=e.useState(!1),{isExpanded:H,onToggleExpand:Be,toggleAriaLabel:Pe}=S||{};e.useEffect(()=>{var a,i;if(ce)H?(a=L?.current)===null||a===void 0||a.focus():(i=q?.current)===null||i===void 0||i.focus();else return;ue(!1)},[ce,H,L,q]),e.useEffect(()=>{ee(r)},[r]),e.useEffect(()=>{s.length>0&&!v&&console.error("An advancedSearchDelimiter prop is required when advanced search attributes are provided using the attributes prop")}),e.useEffect(()=>{X(N)},[N]);const Le=(a,i)=>{p&&p(a,i),ee(i)},de=a=>{const i=!V;X(i),l&&l(a,i)},pe=a=>{a.preventDefault(),u&&u(a,r,me()),X(!1)},Re=a=>{let i;return a.match(/\\?.|^$/g).reduce((T,A)=>(A==="'"||A==='"'?(i||(i=A),A===i&&(T.quote=!T.quote)):!T.quote&&A===" "?T.a.push(""):T.a[T.a.length-1]+=A.replace(/\\(.)/,"$1"),T),{a:[""]}).a},me=()=>{const a={};return Re(Z).map(T=>{const A=T.split(v);A.length===2?a[A[0]]=A[1].replace(/(^'|'$)/g,""):A.length===1&&(a.haswords=a.hasOwnProperty("haswords")?`${a.haswords} ${A[0]}`:A[0])}),a},_e=a=>{a.key==="Enter"&&pe(a)},Ge=a=>{o&&o(a),L&&L.current&&L.current.focus()},Oe=a=>{ee(""),Be(a,H),ue(!0)},He=r&&(m||!!c&&!!h||!!o&&!S),te=(a={})=>{var i=D(a,[]);return e.createElement(Ae,Object.assign({isDisabled:E},i),e.createElement(Se,{hint:y,icon:e.createElement(ge,null),innerRef:L,value:Z,placeholder:I,"aria-label":P,onKeyDown:_e,onChange:Le,type:B,name:W}),He&&e.createElement(Te,null,m&&e.createElement(qe,{isRead:!0},m),!!c&&!!h&&e.createElement("div",{className:"pf-c-text-input-group__group"},e.createElement(_,{variant:$.plain,"aria-label":M,isDisabled:E||U,onClick:h},e.createElement(at,null)),e.createElement(_,{variant:$.plain,"aria-label":d,isDisabled:E||Y,onClick:c},e.createElement(Ze,null))),!!o&&!S&&e.createElement(_,{variant:$.plain,isDisabled:E,"aria-label":F,onClick:Ge},e.createElement(he,null))))},ne=e.createElement(_,{variant:$.plain,"aria-label":Pe,"aria-expanded":H,icon:H?e.createElement(he,null):e.createElement(ge,null),onClick:Oe,ref:q}),$e=(a={})=>{var i=D(a,[]);return e.createElement(z,Object.assign({},i),te(),ne)},je=(a={})=>{var i=D(a,[]);return S?$e(Object.assign({},i)):te(Object.assign({},i))},ae=(a={})=>{var i=D(a,[]);return e.createElement(z,Object.assign({},i),te(),(s.length>0||l)&&e.createElement(_,{className:V&&"pf-m-expanded",variant:$.control,"aria-label":Q,onClick:de,isDisabled:E,"aria-expanded":V},e.createElement(Ke,null)),!!u&&e.createElement(_,{type:"submit",variant:$.control,"aria-label":f,onClick:pe,isDisabled:E||!Z},e.createElement(lt,null)),S&&ne)},re=Object.assign(Object.assign({},J),{className:t&&w(t),innerRef:K});if(S&&!H)return e.createElement(z,Object.assign({},re),ne);if(u||s.length>0||l){if(s.length>0){const a=e.createElement("div",null,e.createElement(Ne,{value:r,parentRef:K,parentInputRef:L,onSearch:u,onClear:o,onChange:p,onToggleAdvancedMenu:de,resetButtonLabel:F,submitSearchButtonLabel:f,attributes:s,formAdditionalItems:g,hasWordsAttrLabel:b,advancedSearchDelimiter:v,getAttrValueMap:me,isSearchMenuOpen:V})),i=e.createElement("div",Object.assign({className:w(t),ref:K},J),e.createElement(Ve,{trigger:ae(),popper:a,isVisible:V,enableFlip:!0,appendTo:()=>k||K.current,removeFindDomNode:x,zIndex:R})),T=e.createElement("div",Object.assign({className:w(t),ref:K},J),ae(),a);return k!=="inline"?i:T}return ae(Object.assign({},re))}return je(re)};Ce.displayName="SearchInputBase";const De=e.forwardRef((n,t)=>e.createElement(Ce,Object.assign({},n,{innerRef:t})));De.displayName="SearchInput";const ft=({toolbarItem:n,subToolbar:t,toolbarItemFooter:r,children:s,searchTypeComponent:g,inputGroupName:b,inputGroupPlaceholder:v,inputGroupOnEnter:I})=>{const{t:y}=We(),[p,u]=Fe(""),o=()=>{p!==""?(u(p),I?.(p)):(u(""),I?.(""))},l=N=>{N.key==="Enter"&&o()};return ie(Qe,{children:[O(oe,{children:ie(be,{children:[b&&O(Ye,{children:ie(z,{"data-testid":b,children:[g,v&&O(De,{placeholder:v,"aria-label":y("search"),value:p,onChange:(N,m)=>{u(m)},onSearch:o,onKeyDown:l,onClear:()=>{u(""),I?.("")}})]})}),n]})}),t&&O(oe,{children:O(be,{children:t})}),O(ze,{}),s,O(oe,{children:r})]})};export{st as A,Ee as K,Ie as P,De as S,ft as T,ye as a,mt as b,et as h,j as s};
//# sourceMappingURL=TableToolbar-vuixsfwd.js.map
