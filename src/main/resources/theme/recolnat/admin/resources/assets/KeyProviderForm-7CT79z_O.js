import{jsxs as p,Fragment as S,jsx as r}from"react/jsx-runtime";import{u as y,d as V,P as E,de as O,f as R,a4 as j,df as m,g as q,r as w,F as u,i as f,V as v,C as H,aM as k,h as D,B as h,j as d,A as I}from"./index-sihFV1NS.js";import{D as N}from"./DynamicComponents-f6aNOnzT.js";import{F as B}from"./FormAccess-EK-4wbwg.js";import{K as G}from"./KeycloakTextInput--S1SG2UN.js";import{V as L}from"./ViewHeader-xo54NRb6.js";import{u as g}from"./useParams-OD1jI_R2.js";import{A as Y}from"./Form-bfj-xQZn.js";import"react";import"react-dom";import"./ClientSelect-sh5SEoBO.js";import"./FileUpload-LIezXv7x.js";import"./CodeEditor-7uqvO0EK.js";import"./copy-icon-WaWzxYgU.js";import"./EmptyStateBody-jnnI7hpP.js";import"./EmptyStateSecondaryActions-G5doWCZ5.js";import"./GroupPickerDialog-gC2-xBPw.js";import"./PaginatingTableToolbar--Dt3wwL6.js";import"./TableToolbar-vuixsfwd.js";import"./ToolbarContent-46I9Yg7h.js";import"./useToggle-mZS4AEtR.js";import"./Modal-uOAPm2rX.js";import"./ConfirmDialog-WMVurgkl.js";import"./DataListItemRow-te2VcAoi.js";import"./data-list-CDN1kyj9.js";import"./grip-vertical-icon-accuSWkz.js";import"./_baseRest-lI6NnEVt.js";import"./ActionListItem-1jrwMZdM.js";import"./Flex-W2FoLD7u.js";import"./FlexItem-Mxf6oLng.js";import"./MultiLineInput-MBnUzZD_.js";import"./PasswordInput-P6txGPqu.js";import"./AddRoleMappingModal-uxjjMt5W.js";import"./useLocaleSort-K-jL4v2R.js";import"./KeycloakDataTable-Q3kZYP9q.js";import"./Td-uwYquKT4.js";import"./resource-BRtaBrSc.js";import"./filter-icon-0B3gA_nj.js";import"./KeycloakTextArea-NBwG1p2x.js";const _=({providerType:o,onClose:i})=>{const{t}=y(),{id:a}=g(),{addAlert:l,addError:b}=R(),P=j().componentTypes?.[m]??[],c=q({mode:"onChange"}),{register:T,control:F,handleSubmit:A,formState:{errors:C},reset:x}=c,K=async e=>{e.config&&Object.entries(e.config).forEach(([s,n])=>e.config[s]=Array.isArray(n)?n:[n]);try{a?(await d.components.update({id:a},{...e,providerType:m}),l(t("saveProviderSuccess"),I.success)):(await d.components.create({...e,providerId:o,providerType:m}),l(t("saveProviderSuccess"),I.success),i?.())}catch(s){b("saveProviderError",s)}};return w(async()=>{if(a)return await d.components.findOne({id:a})},e=>{e&&x({...e})},[]),p(B,{isHorizontal:!0,role:"manage-realm",onSubmit:A(K),children:[a&&r(u,{label:t("providerId"),labelIcon:r(f,{helpText:t("mapperNameHelp"),fieldLabelId:"providerId"}),fieldId:"providerId",isRequired:!0,children:r(G,{id:"providerId","data-testid":"providerId-input",isReadOnly:!0,...T("id")})}),r(u,{label:t("name"),labelIcon:r(f,{helpText:t("mapperNameHelp"),fieldLabelId:"name"}),fieldId:"name",isRequired:!0,validated:C.name?v.error:v.default,helperTextInvalid:t("required"),children:r(H,{name:"name",control:F,rules:{required:!0},defaultValue:o,render:({field:e})=>r(k,{id:"name",value:e.value,onChange:e.onChange,"data-testid":"name-input"})})}),r(D,{...c,children:r(N,{properties:P.find(e=>e.id===o)?.properties||[]})}),p(Y,{children:[r(h,{"data-testid":"add-provider-button",variant:"primary",type:"submit",children:t("save")}),r(h,{onClick:()=>i?.(),variant:"link",children:t("cancel")})]})]})};function Or(){const{t:o}=y(),i=g(),t=V();return p(S,{children:[r(L,{titleKey:o("editProvider"),subKey:i.providerType}),r(E,{variant:"light",children:r(_,{...i,onClose:()=>t(O({realm:i.realm,tab:"providers"}))})})]})}export{_ as KeyProviderForm,Or as default};
//# sourceMappingURL=KeyProviderForm-7CT79z_O.js.map
