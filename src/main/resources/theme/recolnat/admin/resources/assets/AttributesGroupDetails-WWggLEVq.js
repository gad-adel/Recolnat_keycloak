import{jsxs as d,Fragment as H,jsx as e}from"react/jsx-runtime";import{useMemo as I,useEffect as k}from"react";import{u as v,e as T,d as G,M as A,g as P,P as D,F as p,i as c,X as K,z as L,h as S,B as h,L as j,dx as y}from"./index-sihFV1NS.js";import{F as O}from"./FormAccess-EK-4wbwg.js";import{K as U}from"./KeyValueInput-CbiNnu-2.js";import{K as u}from"./KeycloakTextInput--S1SG2UN.js";import{V}from"./ViewHeader-xo54NRb6.js";import{u as q,U as B}from"./UserProfileContext-1YYbbzWi.js";/* empty css                               */import{A as R}from"./Form-bfj-xQZn.js";import"react-dom";import"./copy-icon-WaWzxYgU.js";import"./useToggle-mZS4AEtR.js";import"./minus-icon-3MARcJXf.js";import"./ActionListItem-1jrwMZdM.js";import"./EmptyStateBody-jnnI7hpP.js";import"./ToolbarContent-46I9Yg7h.js";function w(t){return Object.entries(t).reduce((i,[o,s])=>typeof s=="string"?[...i,{key:o,value:s}]:[...i],[])}function z(t){return Object.fromEntries(t.filter(i=>i.key.length>0).map(i=>[i.key,i.value]))}const b={annotations:[],displayDescription:"",displayHeader:"",name:""};function E(){const{t}=v(),{realm:i}=T(),{config:o,save:s}=q(),g=G(),x=A(),a=P({defaultValues:b}),r=I(()=>o?.groups?.find(({name:n})=>n===x.name),[o?.groups]);k(()=>{if(!r)return;const n=r.annotations?w(r.annotations):[];a.reset({...b,...r,annotations:n})},[r]);const F=async n=>{if(!o)return;const l=[...o.groups??[]],m=r?l.indexOf(r):-1,f={...n,annotations:z(n.annotations)};m===-1?l.push(f):l[m]=f,await s({...o,groups:l})&&g(y({realm:i,tab:"attributes-group"}))};return d(H,{children:[e(V,{titleKey:r?"editGroupText":"createGroupText",divider:!0}),e(D,{variant:"light",onSubmit:a.handleSubmit(F),children:d(O,{isHorizontal:!0,role:"manage-realm",children:[d(p,{label:t("nameField"),fieldId:"kc-name",isRequired:!0,helperTextInvalid:t("required"),validated:a.formState.errors.name?"error":"default",labelIcon:e(c,{helpText:t("nameHintHelp"),fieldLabelId:"nameField"}),children:[e(u,{id:"kc-name",isReadOnly:!!r,...a.register("name",{required:!0})}),!!r&&e("input",{type:"hidden",...a.register("name")})]}),e(p,{label:t("displayHeaderField"),fieldId:"kc-display-header",labelIcon:e(c,{helpText:t("displayHeaderHintHelp"),fieldLabelId:"displayHeaderField"}),children:e(u,{id:"kc-display-header",...a.register("displayHeader")})}),e(p,{label:t("displayDescriptionField"),fieldId:"kc-display-description",labelIcon:e(c,{helpText:t("displayDescriptionHintHelp"),fieldLabelId:"displayDescriptionField"}),children:e(u,{id:"kc-display-description",...a.register("displayDescription")})}),e(K,{children:e(L,{component:"h2",children:t("annotationsText")})}),e(p,{label:t("annotationsText"),fieldId:"kc-annotations",children:e(S,{...a,children:e(U,{name:"annotations"})})}),d(R,{children:[e(h,{variant:"primary",type:"submit","data-testid":"saveGroupBtn",children:t("save")}),e(h,{variant:"link",component:n=>e(j,{...n,to:y({realm:i,tab:"attributes-group"})}),children:t("cancel")})]})]})})]})}const se=()=>e(B,{children:e(E,{})});export{se as default};
//# sourceMappingURL=AttributesGroupDetails-WWggLEVq.js.map
