import{jsxs as f,Fragment as b,jsx as e}from"react/jsx-runtime";import{useState as k}from"react";import{u as I,a as T,Z as m,F as h,V as n,i as A,C as _,S as x,b as y,c as S,a4 as O,aD as K,M as D}from"./index-sihFV1NS.js";import{K as E}from"./KeycloakTextArea-NBwG1p2x.js";import{K as R}from"./KeycloakTextInput--S1SG2UN.js";import{T as g,S as U,F}from"./discovery-settings-sDKXSACJ.js";import{E as j}from"./ExpandableSection-JW5wd_BH.js";import{C as z}from"./ClientIdSecret-xi11Xph8.js";import{R as P,D as V}from"./DisplayOrder-DqQik7ga.js";const M=["plain","S256"],w=({readOnly:t})=>{const{t:l}=I(),[i,r]=k(!1),{register:o,control:c,formState:{errors:u}}=T(),v=m({control:c,name:"config.validateSignature"}),p=m({control:c,name:"config.useJwksUrl"}),s=m({control:c,name:"config.pkceEnabled"});return f("div",{className:"pf-c-form pf-m-horizontal",children:[e(h,{label:l("authorizationUrl"),fieldId:"kc-authorization-url",isRequired:!0,validated:u.config?.authorizationUrl?n.error:n.default,helperTextInvalid:l("required"),children:e(R,{type:"url","data-testid":"authorizationUrl",id:"kc-authorization-url",validated:u.config?.authorizationUrl?n.error:n.default,isReadOnly:t,...o("config.authorizationUrl",{required:!0})})}),e(h,{label:l("tokenUrl"),fieldId:"tokenUrl",isRequired:!0,validated:u.config?.tokenUrl?n.error:n.default,helperTextInvalid:l("required"),children:e(R,{type:"url",id:"tokenUrl","data-testid":"tokenUrl",validated:u.config?.tokenUrl?n.error:n.default,isReadOnly:t,...o("config.tokenUrl",{required:!0})})}),e(g,{field:"config.logoutUrl",label:"logoutUrl",isReadOnly:t}),e(g,{field:"config.userInfoUrl",label:"userInfoUrl",isReadOnly:t}),e(g,{field:"config.issuer",label:"issuer",isReadOnly:t}),e(U,{field:"config.validateSignature",label:"validateSignature",isReadOnly:t}),v==="true"&&f(b,{children:[e(U,{field:"config.useJwksUrl",label:"useJwksUrl","data-testid":"useJwksUrl",isReadOnly:t}),p==="true"?e(g,{field:"config.jwksUrl",label:"jwksUrl",isReadOnly:t}):f(b,{children:[e(F,{label:"validatingPublicKey",children:e(E,{"data-testid":"validatingPublicKey",...o("config.publicKeySignatureVerifier")})}),e(g,{field:"config.publicKeySignatureVerifierKeyId",label:"validatingPublicKeyId",isReadOnly:t})]})]}),e(U,{field:"config.pkceEnabled",label:"pkceEnabled",isReadOnly:t}),s==="true"&&e(h,{className:"pf-u-pb-3xl",label:l("pkceMethod"),labelIcon:e(A,{helpText:l("pkceMethodHelp"),fieldLabelId:"pkceMethod"}),fieldId:"pkceMethod",children:e(_,{name:"config.pkceMethod",defaultValue:M[0],control:c,render:({field:a})=>e(x,{toggleId:"pkceMethod",required:!0,direction:"down",onToggle:()=>r(!i),onSelect:(d,q)=>{a.onChange(q),r(!1)},selections:l(`${a.value}`),variant:y.single,"aria-label":l("pkceMethod"),isOpen:i,children:M.map(d=>e(S,{selected:d===a.value,value:d,children:l(`${d}`)},d))})})})]})},Q=({readOnly:t})=>{const{t:l}=I(),[i,r]=k(!1);return f(b,{children:[t&&e(j,{className:"keycloak__discovery-settings__metadata",toggleText:l(i?"hideMetaData":"showMetaData"),onToggle:()=>r(!i),isExpanded:i,children:e(w,{readOnly:t})}),!t&&e(w,{readOnly:t})]})},C=["client_secret_post","client_secret_basic","client_secret_jwt","private_key_jwt"],X=({create:t=!0})=>{const l=O().providers.clientSignature.providers,{t:i}=I(),{control:r}=T(),[o,c]=k(!1),[u,v]=k(!1),p=m({control:r,name:"config.clientAuthMethod"});return f(b,{children:[e(h,{label:i("clientAuthentication"),labelIcon:e(A,{helpText:i("clientAuthenticationHelp"),fieldLabelId:"clientAuthentication"}),fieldId:"clientAuthentication",children:e(_,{name:"config.clientAuthMethod",defaultValue:C[0],control:r,render:({field:s})=>e(x,{toggleId:"clientAuthentication",required:!0,onToggle:()=>c(!o),onSelect:(a,d)=>{s.onChange(d),c(!1)},selections:s.value,variant:y.single,"aria-label":i("clientAuthentication"),isOpen:o,children:C.map(a=>e(S,{selected:a===s.value,value:a,children:i(`clientAuthentications.${a}`)},a))})})}),e(z,{secretRequired:p!=="private_key_jwt",create:t}),e(h,{label:i("clientAssertionSigningAlg"),labelIcon:e(A,{helpText:i("clientAssertionSigningAlgHelp"),fieldLabelId:"clientAssertionSigningAlg"}),fieldId:"clientAssertionSigningAlg",children:e(_,{name:"config.clientAssertionSigningAlg",defaultValue:"",control:r,render:({field:s})=>e(x,{maxHeight:200,toggleId:"clientAssertionSigningAlg",onToggle:()=>v(!u),onSelect:(a,d)=>{s.onChange(d.toString()),v(!1)},selections:s.value||i("algorithmNotSpecified"),variant:y.single,isOpen:u,children:[e(S,{selected:s.value==="",value:"",children:i("algorithmNotSpecified")},""),...K(l).map(a=>e(S,{selected:a===s.value,value:a},a))]})})}),(p==="private_key_jwt"||p==="client_secret_jwt")&&e(g,{field:"config.clientAssertionAudience",label:"clientAssertionAudience"})]})},Y=()=>{const{t}=I(),{tab:l}=D(),{register:i,control:r,formState:{errors:o}}=T(),c=m({control:r,name:"alias"});return f(b,{children:[e(P,{id:c}),e(h,{label:t("alias"),labelIcon:e(A,{helpText:t("aliasHelp"),fieldLabelId:"alias"}),fieldId:"alias",isRequired:!0,validated:o.alias?n.error:n.default,helperTextInvalid:t("required"),children:e(R,{isReadOnly:l==="settings",isRequired:!0,id:"alias","data-testid":"alias",validated:o.alias?n.error:n.default,...i("alias",{required:!0})})}),e(g,{field:"displayName",label:"displayName"}),e(V,{})]})};export{Q as D,Y as O,X as a};
//# sourceMappingURL=OIDCGeneralSettings-x9esjFKG.js.map
