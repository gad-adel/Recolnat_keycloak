import{jsx as e,jsxs as g,Fragment as P}from"react/jsx-runtime";import{useState as b}from"react";import{u as k,a as D,Z as A,F as o,i as s,V as p,C as f,S as I,b as y,c as l,e as K,ba as B}from"./index-sihFV1NS.js";import{K as V}from"./KeycloakTextArea-NBwG1p2x.js";import{K as v}from"./KeycloakTextInput--S1SG2UN.js";import{S as u,F as j,T as G}from"./discovery-settings-sDKXSACJ.js";import{E as X}from"./ExpandableSection-JW5wd_BH.js";import{N as R}from"./NumberInput-QtFengwl.js";import{F as Q}from"./ViewHeader-xo54NRb6.js";import{R as $,D as W}from"./DisplayOrder-DqQik7ga.js";const L=({readOnly:t})=>{const{t:i}=k(),{register:c,control:r,formState:{errors:m}}=D(),[T,h]=b(!1),[E,x]=b(!1),[_,C]=b(!1),[F,N]=b(!1),[H,w]=b(!1),O=A({control:r,name:"config.wantAuthnRequestsSigned"}),q=A({control:r,name:"config.wantAssertionsEncrypted"}),M=A({control:r,name:"config.validateSignature"}),U=A({control:r,name:"config.principalType"});return g("div",{className:"pf-c-form pf-m-horizontal",children:[e(o,{label:i("serviceProviderEntityId"),fieldId:"kc-saml-service-provider-entity-id",labelIcon:e(s,{helpText:i("serviceProviderEntityIdHelp"),fieldLabelId:"serviceProviderEntityId"}),children:e(v,{"data-testid":"serviceProviderEntityId",id:"kc-saml-service-provider-entity-id",...c("config.entityId")})}),e(o,{label:i("identityProviderEntityId"),fieldId:"kc-identity-provider-entity-id",labelIcon:e(s,{helpText:i("identityProviderEntityIdHelp"),fieldLabelId:"identityProviderEntityId"}),children:e(v,{"data-testid":"identityProviderEntityId",id:"kc-identity-provider-entity-id",...c("config.idpEntityId")})}),e(o,{label:i("ssoServiceUrl"),labelIcon:e(s,{helpText:i("ssoServiceUrlHelp"),fieldLabelId:"ssoServiceUrl"}),fieldId:"kc-sso-service-url",isRequired:!0,validated:m.config?.singleSignOnServiceUrl?p.error:p.default,helperTextInvalid:i("required"),children:e(v,{type:"url","data-testid":"sso-service-url",id:"kc-sso-service-url",validated:m.config?.singleSignOnServiceUrl?p.error:p.default,isReadOnly:t,...c("config.singleSignOnServiceUrl",{required:!0})})}),e(o,{label:i("singleLogoutServiceUrl"),labelIcon:e(s,{helpText:i("singleLogoutServiceUrlHelp"),fieldLabelId:"singleLogoutServiceUrl"}),fieldId:"single-logout-service-url","data-testid":"single-logout-service-url",validated:m.config?.singleLogoutServiceUrl?p.error:p.default,helperTextInvalid:i("required"),children:e(v,{type:"url",id:"single-logout-service-url",isReadOnly:t,...c("config.singleLogoutServiceUrl")})}),e(u,{field:"config.backchannelSupported",label:"backchannelLogout","data-testid":"backchannelLogout",isReadOnly:t}),e(o,{label:i("nameIdPolicyFormat"),labelIcon:e(s,{helpText:i("nameIdPolicyFormatHelp"),fieldLabelId:"nameIdPolicyFormat"}),fieldId:"kc-nameIdPolicyFormat",helperTextInvalid:i("required"),children:e(f,{name:"config.nameIDPolicyFormat",defaultValue:"urn:oasis:names:tc:SAML:2.0:nameid-format:persistent",control:r,render:({field:a})=>g(I,{toggleId:"kc-nameIdPolicyFormat",onToggle:n=>h(n),isOpen:T,onSelect:(n,d)=>{a.onChange(d),h(!1)},selections:a.value,variant:y.single,isDisabled:t,children:[e(l,{"data-testid":"persistent-option",value:"urn:oasis:names:tc:SAML:2.0:nameid-format:persistent",isPlaceholder:!0,children:i("persistent")}),e(l,{"data-testid":"transient-option",value:"urn:oasis:names:tc:SAML:2.0:nameid-format:transient",children:i("transient")}),e(l,{"data-testid":"email-option",value:"urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress",children:i("email")}),e(l,{"data-testid":"kerberos-option",value:"urn:oasis:names:tc:SAML:2.0:nameid-format:kerberos",children:i("kerberos")}),e(l,{"data-testid":"x509-option",value:"urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName",children:i("x509")}),e(l,{"data-testid":"windowsDomainQN-option",value:"urn:oasis:names:tc:SAML:1.1:nameid-format:WindowsDomainQualifiedName",children:i("windowsDomainQN")}),e(l,{"data-testid":"unspecified-option",value:"urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified",children:i("unspecified")})]})})}),e(o,{label:i("principalType"),labelIcon:e(s,{helpText:i("principalTypeHelp"),fieldLabelId:"principalType"}),fieldId:"kc-principalType",helperTextInvalid:i("required"),children:e(f,{name:"config.principalType",defaultValue:i("subjectNameId"),control:r,render:({field:a})=>g(I,{toggleId:"kc-principalType",onToggle:n=>x(n),isOpen:E,onSelect:(n,d)=>{a.onChange(d.toString()),x(!1)},selections:a.value,variant:y.single,isDisabled:t,children:[e(l,{"data-testid":"subjectNameId-option",value:"SUBJECT",isPlaceholder:!0,children:i("subjectNameId")}),e(l,{"data-testid":"attributeName-option",value:"ATTRIBUTE",children:i("attributeName")}),e(l,{"data-testid":"attributeFriendlyName-option",value:"FRIENDLY_ATTRIBUTE",children:i("attributeFriendlyName")})]})})}),U?.includes("ATTRIBUTE")&&e(o,{label:i("principalAttribute"),labelIcon:e(s,{helpText:i("principalAttributeHelp"),fieldLabelId:"principalAttribute"}),fieldId:"principalAttribute",children:e(v,{id:"principalAttribute","data-testid":"principalAttribute",isReadOnly:t,...c("config.principalAttribute")})}),e(u,{field:"config.allowCreate",label:"allowCreate",isReadOnly:t}),e(u,{field:"config.postBindingResponse",label:"httpPostBindingResponse",isReadOnly:t}),e(u,{field:"config.postBindingAuthnRequest",label:"httpPostBindingAuthnRequest",isReadOnly:t}),e(u,{field:"config.postBindingLogout",label:"httpPostBindingLogout",isReadOnly:t}),e(u,{field:"config.wantAuthnRequestsSigned",label:"wantAuthnRequestsSigned",isReadOnly:t}),O==="true"&&g(P,{children:[e(o,{label:i("signatureAlgorithm"),labelIcon:e(s,{helpText:i("signatureAlgorithmHelp"),fieldLabelId:"signatureAlgorithm"}),fieldId:"kc-signatureAlgorithm",children:e(f,{name:"config.signatureAlgorithm",defaultValue:"RSA_SHA256",control:r,render:({field:a})=>g(I,{toggleId:"kc-signatureAlgorithm",onToggle:n=>C(n),isOpen:_,onSelect:(n,d)=>{a.onChange(d.toString()),C(!1)},selections:a.value,variant:y.single,isDisabled:t,children:[e(l,{value:"RSA_SHA1"}),e(l,{value:"RSA_SHA256",isPlaceholder:!0}),e(l,{value:"RSA_SHA256_MGF1"}),e(l,{value:"RSA_SHA512"}),e(l,{value:"RSA_SHA512_MGF1"}),e(l,{value:"DSA_SHA1"})]})})}),e(o,{label:i("samlSignatureKeyName"),labelIcon:e(s,{helpText:i("samlSignatureKeyNameHelp"),fieldLabelId:"samlSignatureKeyName"}),fieldId:"kc-samlSignatureKeyName",children:e(f,{name:"config.xmlSigKeyInfoKeyNameTransformer",defaultValue:i("keyID"),control:r,render:({field:a})=>g(I,{toggleId:"kc-samlSignatureKeyName",onToggle:n=>w(n),isOpen:H,onSelect:(n,d)=>{a.onChange(d.toString()),w(!1)},selections:a.value,variant:y.single,isDisabled:t,children:[e(l,{value:"NONE"}),e(l,{value:i("keyID"),isPlaceholder:!0}),e(l,{value:i("certSubject")})]})})})]}),e(u,{field:"config.wantAssertionsSigned",label:"wantAssertionsSigned",isReadOnly:t}),e(u,{field:"config.wantAssertionsEncrypted",label:"wantAssertionsEncrypted",isReadOnly:t}),q==="true"&&e(o,{label:i("encryptionAlgorithm"),labelIcon:e(s,{helpText:i("encryptionAlgorithmHelp"),fieldLabelId:"encryptionAlgorithm"}),fieldId:"kc-encryptionAlgorithm",children:e(f,{name:"config.encryptionAlgorithm",defaultValue:"RSA-OAEP",control:r,render:({field:a})=>g(I,{toggleId:"kc-encryptionAlgorithm",onToggle:n=>N(n),isOpen:F,onSelect:(n,d)=>{a.onChange(d.toString()),N(!1)},selections:a.value,variant:y.single,isDisabled:t,children:[e(l,{value:"RSA-OAEP"}),e(l,{value:"RSA1_5"})]})})}),e(u,{field:"config.forceAuthn",label:"forceAuthentication",isReadOnly:t}),e(u,{field:"config.validateSignature",label:"validateSignature",isReadOnly:t}),M==="true"&&e(j,{label:"validatingX509Certs",children:e(V,{id:"validatingX509Certs","data-testid":"validatingX509Certs",isReadOnly:t,...c("config.signingCertificate")})}),e(u,{field:"config.signSpMetadata",label:"signServiceProviderMetadata","data-testid":"signServiceProviderMetadata",isReadOnly:t}),e(u,{field:"config.loginHint",label:"passSubject","data-testid":"passSubject",isReadOnly:t}),e(o,{label:i("allowedClockSkew"),labelIcon:e(s,{helpText:i("allowedClockSkewHelp"),fieldLabelId:"allowedClockSkew"}),fieldId:"allowedClockSkew",helperTextInvalid:i("required"),children:e(f,{name:"config.allowedClockSkew",defaultValue:0,control:r,render:({field:a})=>{const n=Number(a.value);return e(R,{"data-testid":"allowedClockSkew",inputName:"allowedClockSkew",min:0,max:2147483,value:n,readOnly:!0,onPlus:()=>a.onChange(n+1),onMinus:()=>a.onChange(n-1),onChange:d=>{const S=Number(d.target.value);a.onChange(S<0?0:S)}})}})}),e(o,{label:i("attributeConsumingServiceIndex"),labelIcon:e(s,{helpText:i("attributeConsumingServiceIndexHelp"),fieldLabelId:"attributeConsumingServiceIndex"}),fieldId:"attributeConsumingServiceIndex",helperTextInvalid:i("required"),children:e(f,{name:"config.attributeConsumingServiceIndex",defaultValue:0,control:r,render:({field:a})=>{const n=Number(a.value);return e(R,{"data-testid":"attributeConsumingServiceIndex",inputName:"attributeConsumingServiceIndex",min:0,max:2147483,value:n,readOnly:!0,onPlus:()=>a.onChange(n+1),onMinus:()=>a.onChange(n-1),onChange:d=>{const S=Number(d.target.value);a.onChange(S<0?0:S)}})}})}),e(o,{label:i("attributeConsumingServiceName"),labelIcon:e(s,{helpText:i("attributeConsumingServiceNameHelp"),fieldLabelId:"attributeConsumingServiceName"}),fieldId:"attributeConsumingServiceName",helperTextInvalid:i("required"),children:e(v,{id:"attributeConsumingServiceName","data-testid":"attributeConsumingServiceName",isReadOnly:t,...c("config.attributeConsumingServiceName")})})]})},re=({readOnly:t})=>{const{t:i}=k(),[c,r]=b(!1);return t?e(X,{className:"keycloak__discovery-settings__metadata",toggleText:i(c?"hideMetaData":"showMetaData"),onToggle:m=>r(m),isExpanded:c,children:e(L,{readOnly:t})}):e(L,{readOnly:t})},oe=({isAliasReadonly:t=!1})=>{const{t:i}=k(),{realm:c}=K(),{register:r,control:m,formState:{errors:T}}=D(),h=A({control:m,name:"alias"});return g(P,{children:[e($,{id:h}),e(o,{label:i("alias"),labelIcon:e(s,{helpText:i("aliasHelp"),fieldLabelId:"alias"}),fieldId:"alias",isRequired:!0,validated:T.alias?p.error:p.default,helperTextInvalid:i("required"),children:e(v,{isRequired:!0,id:"alias","data-testid":"alias",isReadOnly:t,validated:T.alias?p.error:p.default,...r("alias",{required:!0})})}),e(G,{field:"displayName",label:"displayName","data-testid":"displayName"}),e(W,{}),t?e(o,{label:i("endpoints"),fieldId:"endpoints",labelIcon:e(s,{helpText:i("aliasHelp"),fieldLabelId:"alias"}),className:"keycloak__identity-providers__saml_link",children:e(Q,{title:i("samlEndpointsLabel"),href:`${B.authUrl}/realms/${c}/broker/${h}/endpoint/descriptor`,isInline:!0})}):null]})};export{re as D,oe as S};
//# sourceMappingURL=SamlGeneralSettings-0TsojIjh.js.map
