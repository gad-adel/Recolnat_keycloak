import{jsxs as z,Fragment as R,jsx as e}from"react/jsx-runtime";import{useState as O,useMemo as U}from"react";import{o as M,e as c,cp as T,d as V,u as j,f as x,ak as B,B as E,L as h,b3 as F,am as P,d8 as N,j as p,d9 as W,da as y}from"./index-sihFV1NS.js";import{u as q}from"./ConfirmDialog-WMVurgkl.js";import{L as G}from"./PaginatingTableToolbar--Dt3wwL6.js";import{K as H}from"./KeycloakDataTable-Q3kZYP9q.js";import{i as g}from"./utils-ATQIxiIC.js";import{u as J}from"./useFormatDate-kyFeutIw.js";import{b as Q}from"./ToolbarContent-46I9Yg7h.js";import{L as X,a as Y,b as Z}from"./ListItem-zTOCxRJG.js";const _={name:"CubesIcon",height:512,width:512,svgPath:"M488.6 250.2L392 214V105.5c0-15-9.3-28.4-23.4-33.7l-100-37.5c-8.1-3.1-17.1-3.1-25.3 0l-100 37.5c-14.1 5.3-23.4 18.7-23.4 33.7V214l-96.6 36.2C9.3 255.5 0 268.9 0 283.9V394c0 13.6 7.7 26.1 19.9 32.2l100 50c10.1 5.1 22.1 5.1 32.2 0l103.9-52 103.9 52c10.1 5.1 22.1 5.1 32.2 0l100-50c12.2-6.1 19.9-18.6 19.9-32.2V283.9c0-15-9.3-28.4-23.4-33.7zM358 214.8l-85 31.9v-68.2l85-37v73.3zM154 104.1l102-38.2 102 38.2v.6l-102 41.4-102-41.4v-.6zm84 291.1l-85 42.5v-79.1l85-38.8v75.4zm0-112l-102 41.4-102-41.4v-.6l102-38.2 102 38.2v.6zm240 112l-85 42.5v-79.1l85-38.8v75.4zm0-112l-102 41.4-102-41.4v-.6l102-38.2 102 38.2v.6z",yOffset:0,xOffset:0},$=M(_),ee=t=>{const{realm:a}=c();return e(h,{to:F({realm:a,id:t.userId,tab:"sessions"}),children:t.username})},se=t=>{const{realm:a}=c();return e(X,{variant:Y.inline,children:Object.entries(t.clients).map(([o,n])=>e(Z,{children:e(h,{to:P({realm:a,clientId:o,tab:"sessions"}),children:n})},o))})};function de({loader:t,hiddenColumns:a=[],emptyInstructions:o,logoutUser:n,filter:C,isSearching:v,isPaginated:b}){const{realm:l}=c(),{whoAmI:L}=T(),m=V(),{t:i}=j(),{addError:S}=x(),u=J(),[K,A]=O(0),d=()=>A(s=>s+1),f=!!B(N.path),I=U(()=>[{name:"username",displayKey:"user",cellRenderer:ee},{name:"type",displayKey:"type"},{name:"start",displayKey:"started",cellRenderer:r=>u(new Date(r.start))},{name:"lastAccess",displayKey:"lastAccess",cellRenderer:r=>u(new Date(r.lastAccess))},{name:"ipAddress",displayKey:"ipAddress"},{name:"clients",displayKey:"clients",cellRenderer:se}].filter(({name:r})=>!a.includes(r)),[l,a]),[k,D]=q({titleKey:"logoutAllSessions",messageKey:"logoutAllDescription",continueButtonLabel:"confirm",onConfirm:async()=>{try{await p.users.logout({id:n}),f&&g(n)?m(y({realm:l})):d()}catch(s){S("logoutAllSessionsError",s)}}});async function w(s){await p.realms.deleteSession({realm:l,session:s.id}),s.userId===L.getUserId()?await W.logout({redirectUri:""}):f&&g(s.userId)?m(y({realm:l})):d()}return z(R,{children:[e(D,{}),e(H,{loader:t,ariaLabelKey:"titleSessions",searchPlaceholderKey:"searchForSession",isPaginated:b,isSearching:v,searchTypeComponent:C,toolbarItem:n&&e(Q,{children:e(E,{onClick:k,children:i("logoutAllSessions")})}),columns:I,actions:[{title:i("signOut"),onRowClick:w}],emptyState:e(G,{hasIcon:!0,icon:$,message:i("noSessions"),instructions:o||i("noSessionsDescription")})},K)]})}export{$ as C,de as S};
//# sourceMappingURL=SessionsTable-fP9nbE0z.js.map
