import{jsx as t,jsxs as f,Fragment as L}from"react/jsx-runtime";import{useState as g}from"react";import{u as K,d as N,f as j,e as b,r as E,m as I,j as u,A as h,O as T,B as v,L as p,bg as w,aj as D,bF as B,i as P}from"./index-sihFV1NS.js";import{u as V}from"./ConfirmDialog-WMVurgkl.js";import{L as $}from"./PaginatingTableToolbar--Dt3wwL6.js";import{K as q}from"./KeycloakDataTable-Q3kZYP9q.js";const z=({defaultRoleName:m,toDetail:c,messageBundle:l,...a})=>{const{t:s}=K(l),{realm:d}=b();return a.name!==m?t(p,{to:c(a.id),children:a.name}):f(L,{children:[f(p,{to:B({realm:d,tab:"user-registration"}),children:[a.name," "]}),t(P,{helpText:s(`${l}:defaultRole`),fieldLabelId:"defaultRole"})]})},W=({loader:m,paginated:c=!0,parentRoleId:l,messageBundle:a="roles",toCreate:s,toDetail:d,isReadOnly:i})=>{const{t:o}=K(),C=N(),{addAlert:R,addError:F}=j(),{realm:S}=b(),[n,A]=g(),[r,y]=g();E(()=>u.realms.findOne({realm:S}),e=>{A(e)},[]);const[k,x]=V({titleKey:"roleDeleteConfirm",messageKey:o("roleDeleteConfirmDialog",{selectedRoleName:r?r.name:""}),continueButtonLabel:"delete",continueButtonVariant:I.danger,onConfirm:async()=>{try{l?await u.roles.delCompositeRoles({id:l},[r]):await u.roles.delById({id:r.id}),y(void 0),R(o("roleDeletedSuccess"),h.success)}catch(e){F("roleDeleteError",e)}}});return n?f(L,{children:[t(x,{}),t(q,{loader:m,ariaLabelKey:"roleList",searchPlaceholderKey:"searchForRoles",isPaginated:c,toolbarItem:!i&&t(v,{"data-testid":"create-role",component:e=>t(p,{...e,to:s}),children:o("createRole")}),actions:i?[]:[{title:o("delete"),onRowClick:e=>{y(e),n.defaultRole&&e.name===n.defaultRole.name?R(o("defaultRoleDeleteError"),h.danger):k()}}],columns:[{name:"name",displayKey:"roleName",cellRenderer:e=>t(z,{...e,defaultRoleName:n.defaultRole?.name,toDetail:d,messageBundle:a})},{name:"composite",displayKey:"composite",cellFormatters:[w(),D()]},{name:"description",displayKey:"description",cellFormatters:[D()]}],emptyState:t($,{hasIcon:!0,message:o(`noRoles-${a}`),instructions:i?"":o(`noRolesInstructions-${a}`),primaryActionText:i?"":o("createRole"),onPrimaryAction:()=>C(s)})},r?r.id:"roleList")]}):t(T,{})};export{W as R};
//# sourceMappingURL=RolesList-Cfnu9UtK.js.map
