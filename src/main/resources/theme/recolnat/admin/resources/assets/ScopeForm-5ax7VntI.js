import{jsxs as f,jsx as e}from"react/jsx-runtime";import{useState as v,useEffect as G}from"react";import{u as j,g as w,e as B,an as _,Z as C,ao as l,G as $,F as o,i as r,V as i,h as z,ap as Q,C as c,S as F,b as O,c as W,Q as V,B as L,L as Z,ad as J}from"./index-sihFV1NS.js";import{g as M}from"./utils-9X4NJJvK.js";import{D as U}from"./SwitchControl-KreblmOr.js";import{b as H,d as X}from"./ClientScopeTypes-Hwl8E8GJ.js";import{F as Y}from"./FormAccess-EK-4wbwg.js";import{K as ee}from"./KeycloakTextArea-NBwG1p2x.js";import{K as h}from"./KeycloakTextInput--S1SG2UN.js";import{u as ne,F as ae}from"./useIsFeatureEnabled-qmmJPqO8.js";import{A as te}from"./Form-bfj-xQZn.js";const he=({clientScope:d,save:D})=>{const{t:n}=j(),u=w({mode:"onChange"}),{register:m,control:s,handleSubmit:A,setValue:g,formState:{errors:p,isDirty:E,isValid:N}}=u,{realm:P}=B(),y=_(),I=ne()(ae.DynamicScopes),[R,S]=v(!1),[q,T]=v(!1),k=C({control:s,name:l("attributes.display.on.consent.screen"),defaultValue:d?.attributes?.["display.on.consent.screen"]??"true"}),K=C({control:s,name:l("attributes.is.dynamic.scope"),defaultValue:"false"}),x=(a,t)=>g(l("attributes.dynamic.scope.regexp"),t?`${a}:*`:a);return G(()=>{$(d??{},g)},[d]),f(Y,{role:"manage-clients",onSubmit:A(D),isHorizontal:!0,children:[e(o,{label:n("name"),labelIcon:e(r,{helpText:n("scopeNameHelp"),fieldLabelId:"name"}),fieldId:"kc-name",validated:p.name?i.error:i.default,helperTextInvalid:n("required"),isRequired:!0,children:e(h,{id:"kc-name",validated:p.name?i.error:i.default,isRequired:!0,...m("name",{required:!0,onChange:a=>{I&&x(a.target.value,!0)}})})}),I&&f(z,{...u,children:[e(U,{name:l("attributes.is.dynamic.scope"),label:n("dynamicScope"),labelIcon:n("dynamicScopeHelp"),onChange:a=>{x(a&&u.getValues("name")||"",a)},stringify:!0}),K==="true"&&e(Q,{name:l("attributes.dynamic.scope.regexp"),label:n("dynamicScopeFormat"),labelIcon:n("dynamicScopeFormatHelp"),isDisabled:!0})]}),e(o,{label:n("description"),labelIcon:e(r,{helpText:n("scopeDescriptionHelp"),fieldLabelId:"description"}),fieldId:"kc-description",validated:p.description?i.error:i.default,helperTextInvalid:n("maxLength",{length:255}),children:e(h,{id:"kc-description",validated:p.description?i.error:i.default,...m("description",{maxLength:255})})}),e(o,{label:n("type"),labelIcon:e(r,{helpText:n("scopeTypeHelp"),fieldLabelId:"type"}),fieldId:"kc-type",children:e(c,{name:"type",defaultValue:H[0],control:s,render:({field:a})=>e(F,{toggleId:"kc-type",variant:O.single,isOpen:q,selections:a.value,onToggle:T,onSelect:(t,b)=>{a.onChange(b),T(!1)},children:X(n,H)})})}),!d&&e(o,{label:n("protocol"),labelIcon:e(r,{helpText:n("protocolHelp"),fieldLabelId:"protocol"}),fieldId:"kc-protocol",children:e(c,{name:"protocol",defaultValue:y[0],control:s,render:({field:a})=>e(F,{toggleId:"kc-protocol",onToggle:S,onSelect:(t,b)=>{a.onChange(b),S(!1)},selections:a.value,variant:O.single,isOpen:R,children:y.map(t=>e(W,{selected:t===a.value,value:t,"data-testid":`option-${t}`,children:M(n,t)},t))})})}),e(o,{hasNoPaddingTop:!0,label:n("displayOnConsentScreen"),labelIcon:e(r,{helpText:n("displayOnConsentScreenHelp"),fieldLabelId:"displayOnConsentScreen"}),fieldId:"kc-display-on-consent-screen",children:e(c,{name:l("attributes.display.on.consent.screen"),control:s,defaultValue:k,render:({field:a})=>e(V,{id:"kc-display-on-consent-screen",label:n("on"),labelOff:n("off"),isChecked:a.value==="true",onChange:t=>a.onChange(t.toString())})})}),k==="true"&&e(o,{label:n("consentScreenText"),labelIcon:e(r,{helpText:n("consentScreenTextHelp"),fieldLabelId:"consentScreenText"}),fieldId:"kc-consent-screen-text",children:e(ee,{id:"kc-consent-screen-text",...m(l("attributes.consent.screen.text"))})}),e(o,{hasNoPaddingTop:!0,label:n("includeInTokenScope"),labelIcon:e(r,{helpText:n("includeInTokenScopeHelp"),fieldLabelId:"includeInTokenScope"}),fieldId:"kc-include-in-token-scope",children:e(c,{name:l("attributes.include.in.token.scope"),control:s,defaultValue:"true",render:({field:a})=>e(V,{id:"kc-include-in-token-scope",label:n("on"),labelOff:n("off"),isChecked:a.value==="true",onChange:t=>a.onChange(t.toString())})})}),e(o,{label:n("guiOrder"),labelIcon:e(r,{helpText:n("guiOrderHelp"),fieldLabelId:"guiOrder"}),fieldId:"kc-gui-order",children:e(c,{name:l("attributes.gui.order"),defaultValue:"",control:s,render:({field:a})=>e(h,{id:"kc-gui-order",type:"number",value:a.value,min:0,onChange:a.onChange})})}),f(te,{children:[e(L,{variant:"primary",type:"submit",isDisabled:!E||!N,children:n("save")}),e(L,{variant:"link",component:a=>e(Z,{...a,to:J({realm:P})}),children:n("cancel")})]})]})};export{he as S};
//# sourceMappingURL=ScopeForm-5ax7VntI.js.map
