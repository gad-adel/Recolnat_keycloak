import{jsxs as F,Fragment as k,jsx as i}from"react/jsx-runtime";import{useState as c,useEffect as w}from"react";import{u as T,a as U,j,F as u,i as m,Q as C,ba as H}from"./index-sihFV1NS.js";import{K as q}from"./KeycloakTextInput--S1SG2UN.js";const O=({id:o,fileUpload:E,children:d})=>{const{t:e}=T(),{setValue:f,register:h,setError:D,watch:b,clearErrors:a,formState:{errors:s}}=U(),l=b("discoveryEndpoint"),[t,g]=c(!0),[p,n]=c(!1),[y,I]=c(),x=r=>{Object.keys(r).map(v=>f(`config.${v}`,r[v]))};return w(()=>{if(!l){n(!1);return}(async()=>{a("discoveryError");try{const r=await j.identityProviders.importFromUrl({providerId:o,fromUrl:l});x(r),I(r)}catch(r){D("discoveryError",{type:"manual",message:r.message})}n(!1)})()},[p]),F(k,{children:[i(u,{label:e(o==="oidc"?"useDiscoveryEndpoint":"useEntityDescriptor"),fieldId:"kc-discovery-endpoint",labelIcon:i(m,{helpText:e(o==="oidc"?"useDiscoveryEndpointHelp":"useEntityDescriptorHelp"),fieldLabelId:"discoveryEndpoint"}),children:i(C,{id:"kc-discovery-endpoint-switch",label:e("on"),labelOff:e("off"),isChecked:t,onChange:r=>{a("discoveryError"),g(r)},"aria-label":e(o==="oidc"?"useDiscoveryEndpoint":"useEntityDescriptor")})}),t&&i(u,{label:e(o==="oidc"?"discoveryEndpoint":"samlEntityDescriptor"),fieldId:"kc-discovery-endpoint",labelIcon:i(m,{helpText:e(o==="oidc"?"discoveryEndpointHelp":"samlEntityDescriptorHelp"),fieldLabelId:"discoveryEndpoint"}),validated:s.discoveryError||s.discoveryEndpoint?"error":y?"success":"default",helperTextInvalid:s.discoveryEndpoint?e("required"):e("noValidMetaDataFound",{error:s.discoveryError?.message}),isRequired:!0,children:i(q,{type:"url","data-testid":"discoveryEndpoint",id:"kc-discovery-endpoint",placeholder:o==="oidc"?"https://hostname/auth/realms/master/.well-known/openid-configuration":"",validated:s.discoveryError||s.discoveryEndpoint?"error":y?"success":"default",customIconUrl:p?H.resourceUrl+"/discovery-load-indicator.svg":"",...h("discoveryEndpoint",{required:!0,onBlur:()=>n(!0)})})}),!t&&E,t&&!s.discoveryError&&d(!0),!t&&d(!1)]})};export{O as D};
//# sourceMappingURL=DiscoveryEndpointField--MEYVRbO.js.map
