{"version":3,"file":"UserForm-KWIpw6L8.js","sources":["../../src/user/FederatedUserLink.tsx","../../src/user/form-state.ts","../../src/user/user-credentials/RequiredActionMultiSelect.tsx","../../src/user/UserForm.tsx"],"sourcesContent":["import type ComponentRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/componentRepresentation\";\nimport type UserRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/userRepresentation\";\nimport { Button } from \"@patternfly/react-core\";\nimport { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\n\nimport { adminClient } from \"../admin-client\";\nimport { useAccess } from \"../context/access/Access\";\nimport { useRealm } from \"../context/realm-context/RealmContext\";\nimport { toCustomUserFederation } from \"../user-federation/routes/CustomUserFederation\";\nimport { useFetch } from \"../utils/useFetch\";\n\ntype FederatedUserLinkProps = {\n  user: UserRepresentation;\n};\n\nexport const FederatedUserLink = ({ user }: FederatedUserLinkProps) => {\n  const access = useAccess();\n  const { realm } = useRealm();\n\n  const [component, setComponent] = useState<ComponentRepresentation>();\n\n  useFetch(\n    () =>\n      access.hasAccess(\"view-realm\")\n        ? adminClient.components.findOne({\n            id: (user.federationLink || user.origin)!,\n          })\n        : adminClient.userStorageProvider.name({\n            id: (user.federationLink || user.origin)!,\n          }),\n    setComponent,\n    [],\n  );\n\n  if (!component) return null;\n\n  if (!access.hasAccess(\"view-realm\")) return <span>{component.name}</span>;\n\n  return (\n    <Button\n      variant=\"link\"\n      component={(props) => (\n        <Link\n          {...props}\n          to={toCustomUserFederation({\n            id: component.id!,\n            providerId: component.providerId!,\n            realm,\n          })}\n        />\n      )}\n    >\n      {component.name}\n    </Button>\n  );\n};\n","import UserRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/userRepresentation\";\nimport {\n  KeyValueType,\n  arrayToKeyValue,\n  keyValueToArray,\n} from \"../components/key-value-form/key-value-convert\";\n\nexport type UserFormFields = Omit<\n  UserRepresentation,\n  \"attributes\" | \"userProfileMetadata\"\n> & {\n  attributes?: KeyValueType[] | Record<string, string | string[]>;\n};\n\nexport function toUserFormFields(\n  data: UserRepresentation,\n  userProfileEnabled: boolean,\n): UserFormFields {\n  const attributes = userProfileEnabled\n    ? data.attributes\n    : arrayToKeyValue(data.attributes);\n\n  return { ...data, attributes };\n}\n\nexport function toUserRepresentation(data: UserFormFields): UserRepresentation {\n  const username = data.username?.trim();\n  const attributes = Array.isArray(data.attributes)\n    ? keyValueToArray(data.attributes)\n    : data.attributes;\n\n  return { ...data, username, attributes };\n}\n","import type RequiredActionProviderRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/requiredActionProviderRepresentation\";\nimport {\n  FormGroup,\n  Select,\n  SelectOption,\n  SelectVariant,\n} from \"@patternfly/react-core\";\nimport { useState } from \"react\";\nimport {\n  Control,\n  Controller,\n  FieldPathByValue,\n  FieldValues,\n  PathValue,\n} from \"react-hook-form\";\nimport { useTranslation } from \"react-i18next\";\nimport { HelpItem } from \"ui-shared\";\n\nimport { adminClient } from \"../../admin-client\";\nimport { useFetch } from \"../../utils/useFetch\";\n\nexport type RequiredActionMultiSelectProps<\n  T extends FieldValues,\n  P extends FieldPathByValue<T, string[] | undefined>,\n> = {\n  control: Control<T>;\n  name: P;\n  label: string;\n  help: string;\n};\n\nexport const RequiredActionMultiSelect = <\n  T extends FieldValues,\n  P extends FieldPathByValue<T, string[] | undefined>,\n>({\n  control,\n  name,\n  label,\n  help,\n}: RequiredActionMultiSelectProps<T, P>) => {\n  const { t } = useTranslation();\n  const [open, setOpen] = useState(false);\n  const [requiredActions, setRequiredActions] = useState<\n    RequiredActionProviderRepresentation[]\n  >([]);\n\n  useFetch(\n    () => adminClient.authenticationManagement.getRequiredActions(),\n    (actions) => {\n      const enabledUserActions = actions.filter((action) => {\n        return action.enabled;\n      });\n      setRequiredActions(enabledUserActions);\n    },\n    [],\n  );\n\n  return (\n    <FormGroup\n      label={t(label)}\n      labelIcon={<HelpItem helpText={t(help)} fieldLabelId=\"resetAction\" />}\n      fieldId=\"actions\"\n    >\n      <Controller\n        name={name}\n        defaultValue={[] as PathValue<T, P>}\n        control={control}\n        render={({ field }) => (\n          <Select\n            maxHeight={375}\n            toggleId={`${name}-actions`}\n            variant={SelectVariant.typeaheadMulti}\n            chipGroupProps={{\n              numChips: 3,\n            }}\n            placeholderText={t(\"requiredActionPlaceholder\")}\n            menuAppendTo=\"parent\"\n            onToggle={(open) => setOpen(open)}\n            isOpen={open}\n            selections={field.value as string[]}\n            onSelect={(_, selectedValue) => {\n              const value: string[] = field.value;\n              field.onChange(\n                value.find((item) => item === selectedValue)\n                  ? value.filter((item) => item !== selectedValue)\n                  : [...value, selectedValue],\n              );\n            }}\n            onClear={(event) => {\n              event.stopPropagation();\n              field.onChange([]);\n            }}\n            typeAheadAriaLabel={t(\"resetAction\")}\n          >\n            {requiredActions.map(({ alias, name }) => (\n              <SelectOption\n                key={alias}\n                value={alias}\n                data-testid={`${alias}-option`}\n              >\n                {name}\n              </SelectOption>\n            ))}\n          </Select>\n        )}\n      />\n    </FormGroup>\n  );\n};\n","import type GroupRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/groupRepresentation\";\nimport type RealmRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/realmRepresentation\";\nimport { UserProfileMetadata } from \"@keycloak/keycloak-admin-client/lib/defs/userProfileMetadata\";\nimport type UserRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/userRepresentation\";\nimport {\n  ActionGroup,\n  AlertVariant,\n  Button,\n  Chip,\n  ChipGroup,\n  FormGroup,\n  InputGroup,\n  Switch,\n} from \"@patternfly/react-core\";\nimport { useState } from \"react\";\nimport { Controller, UseFormReturn } from \"react-hook-form\";\nimport { useTranslation } from \"react-i18next\";\nimport { Link } from \"react-router-dom\";\nimport { HelpItem, UserProfileFields } from \"ui-shared\";\nimport { adminClient } from \"../admin-client\";\nimport { useAlerts } from \"../components/alert/Alerts\";\nimport { FormAccess } from \"../components/form/FormAccess\";\nimport { GroupPickerDialog } from \"../components/group/GroupPickerDialog\";\nimport { KeycloakTextInput } from \"../components/keycloak-text-input/KeycloakTextInput\";\nimport { useAccess } from \"../context/access/Access\";\nimport { emailRegexPattern } from \"../util\";\nimport useFormatDate from \"../utils/useFormatDate\";\nimport { FederatedUserLink } from \"./FederatedUserLink\";\nimport { UserFormFields, toUserFormFields } from \"./form-state\";\nimport { toUsers } from \"./routes/Users\";\nimport { RequiredActionMultiSelect } from \"./user-credentials/RequiredActionMultiSelect\";\n\nexport type BruteForced = {\n  isBruteForceProtected?: boolean;\n  isLocked?: boolean;\n};\n\nexport type UserFormProps = {\n  form: UseFormReturn<UserFormFields>;\n  realm: RealmRepresentation;\n  user?: UserRepresentation;\n  bruteForce?: BruteForced;\n  userProfileMetadata?: UserProfileMetadata;\n  save: (user: UserFormFields) => void;\n  onGroupsUpdate?: (groups: GroupRepresentation[]) => void;\n};\n\nexport const UserForm = ({\n  form,\n  realm,\n  user,\n  bruteForce: { isBruteForceProtected, isLocked } = {\n    isBruteForceProtected: false,\n    isLocked: false,\n  },\n  userProfileMetadata,\n  save,\n  onGroupsUpdate,\n}: UserFormProps) => {\n  const { t } = useTranslation();\n  const formatDate = useFormatDate();\n  const { addAlert, addError } = useAlerts();\n  const { hasAccess } = useAccess();\n  const isManager = hasAccess(\"manage-users\");\n  const canViewFederationLink = hasAccess(\"view-realm\");\n\n  const {\n    handleSubmit,\n    register,\n    watch,\n    control,\n    reset,\n    formState: { errors },\n  } = form;\n  const watchUsernameInput = watch(\"username\");\n  const [selectedGroups, setSelectedGroups] = useState<GroupRepresentation[]>(\n    [],\n  );\n  const [open, setOpen] = useState(false);\n  const [locked, setLocked] = useState(isLocked);\n\n  const unLockUser = async () => {\n    try {\n      await adminClient.attackDetection.del({ id: user!.id! });\n      addAlert(t(\"unlockSuccess\"), AlertVariant.success);\n    } catch (error) {\n      addError(\"unlockError\", error);\n    }\n  };\n\n  const deleteItem = (id: string) => {\n    setSelectedGroups(selectedGroups.filter((item) => item.name !== id));\n    onGroupsUpdate?.(selectedGroups);\n  };\n\n  const addChips = async (groups: GroupRepresentation[]): Promise<void> => {\n    setSelectedGroups([...selectedGroups!, ...groups]);\n    onGroupsUpdate?.([...selectedGroups!, ...groups]);\n  };\n\n  const addGroups = async (groups: GroupRepresentation[]): Promise<void> => {\n    const newGroups = groups;\n\n    newGroups.forEach(async (group) => {\n      try {\n        await adminClient.users.addToGroup({\n          id: user!.id!,\n          groupId: group.id!,\n        });\n        addAlert(t(\"addedGroupMembership\"), AlertVariant.success);\n      } catch (error) {\n        addError(\"addedGroupMembershipError\", error);\n      }\n    });\n  };\n\n  const toggleModal = () => {\n    setOpen(!open);\n  };\n\n  return (\n    <FormAccess\n      isHorizontal\n      onSubmit={handleSubmit(save)}\n      role=\"query-users\"\n      fineGrainedAccess={user?.access?.manage}\n      className=\"pf-u-mt-lg\"\n    >\n      {open && (\n        <GroupPickerDialog\n          type=\"selectMany\"\n          text={{\n            title: \"selectGroups\",\n            ok: \"join\",\n          }}\n          canBrowse={isManager}\n          onConfirm={(groups) => {\n            user?.id ? addGroups(groups || []) : addChips(groups || []);\n            setOpen(false);\n          }}\n          onClose={() => setOpen(false)}\n          filterGroups={selectedGroups}\n        />\n      )}\n      {user?.id && (\n        <>\n          <FormGroup label={t(\"id\")} fieldId=\"kc-id\" isRequired>\n            <KeycloakTextInput\n              id={user.id}\n              aria-label={t(\"userID\")}\n              value={user.id}\n              type=\"text\"\n              isReadOnly\n            />\n          </FormGroup>\n          <FormGroup label={t(\"createdAt\")} fieldId=\"kc-created-at\" isRequired>\n            <KeycloakTextInput\n              value={formatDate(new Date(user.createdTimestamp!))}\n              type=\"text\"\n              id=\"kc-created-at\"\n              aria-label={t(\"createdAt\")}\n              name=\"createdTimestamp\"\n              isReadOnly\n            />\n          </FormGroup>\n        </>\n      )}\n      <RequiredActionMultiSelect\n        control={control}\n        name=\"requiredActions\"\n        label=\"requiredUserActions\"\n        help=\"requiredUserActionsHelp\"\n      />\n      {(user?.federationLink || user?.origin) && canViewFederationLink && (\n        <FormGroup\n          label={t(\"federationLink\")}\n          labelIcon={\n            <HelpItem\n              helpText={t(\"federationLinkHelp\")}\n              fieldLabelId=\"federationLink\"\n            />\n          }\n        >\n          <FederatedUserLink user={user} />\n        </FormGroup>\n      )}\n      {userProfileMetadata ? (\n        <>\n          <FormGroup\n            label={t(\"emailVerified\")}\n            fieldId=\"kc-email-verified\"\n            helperTextInvalid={t(\"required\")}\n            labelIcon={\n              <HelpItem\n                helpText={t(\"emailVerifiedHelp\")}\n                fieldLabelId=\"emailVerified\"\n              />\n            }\n          >\n            <Controller\n              name=\"emailVerified\"\n              defaultValue={false}\n              control={control}\n              render={({ field }) => (\n                <Switch\n                  data-testid=\"email-verified-switch\"\n                  id=\"kc-user-email-verified\"\n                  onChange={(value) => field.onChange(value)}\n                  isChecked={field.value}\n                  label={t(\"yes\")}\n                  labelOff={t(\"no\")}\n                />\n              )}\n            />\n          </FormGroup>\n          <UserProfileFields\n            form={form}\n            userProfileMetadata={userProfileMetadata}\n            hideReadOnly={!user}\n            supportedLocales={realm.supportedLocales || []}\n            t={(key: unknown, params) => t(key as string, { ...params })}\n          />\n        </>\n      ) : (\n        <>\n          {!realm.registrationEmailAsUsername && (\n            <FormGroup\n              label={t(\"username\")}\n              fieldId=\"kc-username\"\n              isRequired\n              validated={errors.username ? \"error\" : \"default\"}\n              helperTextInvalid={t(\"required\")}\n            >\n              <KeycloakTextInput\n                id=\"kc-username\"\n                isReadOnly={\n                  !!user?.id &&\n                  !realm.editUsernameAllowed &&\n                  realm.editUsernameAllowed !== undefined\n                }\n                {...register(\"username\")}\n              />\n            </FormGroup>\n          )}\n          <FormGroup\n            label={t(\"email\")}\n            fieldId=\"kc-email\"\n            validated={errors.email ? \"error\" : \"default\"}\n            helperTextInvalid={t(\"emailInvalid\")}\n          >\n            <KeycloakTextInput\n              type=\"email\"\n              id=\"kc-email\"\n              data-testid=\"email-input\"\n              {...register(\"email\", {\n                pattern: emailRegexPattern,\n              })}\n            />\n          </FormGroup>\n          <FormGroup\n            label={t(\"emailVerified\")}\n            fieldId=\"kc-email-verified\"\n            helperTextInvalid={t(\"required\")}\n            labelIcon={\n              <HelpItem\n                helpText={t(\"emailVerifiedHelp\")}\n                fieldLabelId=\"emailVerified\"\n              />\n            }\n          >\n            <Controller\n              name=\"emailVerified\"\n              defaultValue={false}\n              control={control}\n              render={({ field }) => (\n                <Switch\n                  data-testid=\"email-verified-switch\"\n                  id=\"kc-user-email-verified\"\n                  onChange={(value) => field.onChange(value)}\n                  isChecked={field.value}\n                  label={t(\"yes\")}\n                  labelOff={t(\"no\")}\n                />\n              )}\n            />\n          </FormGroup>\n          <FormGroup\n            label={t(\"firstName\")}\n            fieldId=\"kc-firstName\"\n            validated={errors.firstName ? \"error\" : \"default\"}\n            helperTextInvalid={t(\"required\")}\n          >\n            <KeycloakTextInput\n              data-testid=\"firstName-input\"\n              id=\"kc-firstName\"\n              {...register(\"firstName\")}\n            />\n          </FormGroup>\n          <FormGroup\n            label={t(\"lastName\")}\n            fieldId=\"kc-lastName\"\n            validated={errors.lastName ? \"error\" : \"default\"}\n          >\n            <KeycloakTextInput\n              data-testid=\"lastName-input\"\n              id=\"kc-lastName\"\n              aria-label={t(\"lastName\")}\n              {...register(\"lastName\")}\n            />\n          </FormGroup>\n        </>\n      )}\n      {isBruteForceProtected && (\n        <FormGroup\n          label={t(\"temporaryLocked\")}\n          fieldId=\"temporaryLocked\"\n          labelIcon={\n            <HelpItem\n              helpText={t(\"temporaryLockedHelp\")}\n              fieldLabelId=\"temporaryLocked\"\n            />\n          }\n        >\n          <Switch\n            data-testid=\"user-locked-switch\"\n            id=\"temporaryLocked\"\n            onChange={(value) => {\n              unLockUser();\n              setLocked(value);\n            }}\n            isChecked={locked}\n            isDisabled={!locked}\n            label={t(\"on\")}\n            labelOff={t(\"off\")}\n          />\n        </FormGroup>\n      )}\n      {!user?.id && (\n        <FormGroup\n          label={t(\"groups\")}\n          fieldId=\"kc-groups\"\n          validated={errors.requiredActions ? \"error\" : \"default\"}\n          helperTextInvalid={t(\"required\")}\n          labelIcon={<HelpItem helpText={t(\"groups\")} fieldLabelId=\"groups\" />}\n        >\n          <Controller\n            name=\"groups\"\n            defaultValue={[]}\n            control={control}\n            render={() => (\n              <InputGroup>\n                <ChipGroup categoryName={\" \"}>\n                  {selectedGroups.map((currentChip) => (\n                    <Chip\n                      key={currentChip.id}\n                      onClick={() => deleteItem(currentChip.name!)}\n                    >\n                      {currentChip.path}\n                    </Chip>\n                  ))}\n                </ChipGroup>\n                <Button\n                  id=\"kc-join-groups-button\"\n                  onClick={toggleModal}\n                  variant=\"secondary\"\n                  data-testid=\"join-groups-button\"\n                >\n                  {t(\"joinGroups\")}\n                </Button>\n              </InputGroup>\n            )}\n          />\n        </FormGroup>\n      )}\n\n      <ActionGroup>\n        <Button\n          data-testid={!user?.id ? \"create-user\" : \"save-user\"}\n          isDisabled={\n            !user?.id &&\n            !watchUsernameInput &&\n            !realm.registrationEmailAsUsername\n          }\n          variant=\"primary\"\n          type=\"submit\"\n        >\n          {user?.id ? t(\"save\") : t(\"create\")}\n        </Button>\n        <Button\n          data-testid=\"cancel-create-user\"\n          variant=\"link\"\n          onClick={\n            user?.id\n              ? () => reset(toUserFormFields(user, !!userProfileMetadata))\n              : undefined\n          }\n          component={\n            !user?.id\n              ? (props) => (\n                  <Link {...props} to={toUsers({ realm: realm.id! })} />\n                )\n              : undefined\n          }\n        >\n          {user?.id ? t(\"revert\") : t(\"cancel\")}\n        </Button>\n      </ActionGroup>\n    </FormAccess>\n  );\n};\n"],"names":["FederatedUserLink","user","access","useAccess","realm","useRealm","component","setComponent","useState","useFetch","adminClient","jsx","Button","props","Link","toCustomUserFederation","toUserFormFields","data","userProfileEnabled","attributes","arrayToKeyValue","toUserRepresentation","username","keyValueToArray","RequiredActionMultiSelect","control","name","label","help","t","useTranslation","open","setOpen","requiredActions","setRequiredActions","actions","enabledUserActions","action","FormGroup","HelpItem","Controller","field","Select","SelectVariant","_","selectedValue","value","item","event","alias","SelectOption","UserForm","form","isBruteForceProtected","isLocked","userProfileMetadata","save","onGroupsUpdate","formatDate","useFormatDate","addAlert","addError","useAlerts","hasAccess","isManager","canViewFederationLink","handleSubmit","register","watch","reset","errors","watchUsernameInput","selectedGroups","setSelectedGroups","locked","setLocked","unLockUser","AlertVariant","error","deleteItem","id","addChips","groups","addGroups","group","toggleModal","jsxs","FormAccess","GroupPickerDialog","Fragment","KeycloakTextInput","Switch","UserProfileFields","key","params","emailRegexPattern","InputGroup","ChipGroup","currentChip","Chip","ActionGroup","toUsers"],"mappings":"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"}