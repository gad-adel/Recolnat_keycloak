import{jsx as x,jsxs as re,Fragment as Ie}from"react/jsx-runtime";import*as Pe from"react";import N,{useEffect as ue,useState as ie,useMemo as Fe,createContext as Yd,memo as le,forwardRef as Wd,useRef as te,useContext as wr,useCallback as ve}from"react";import{_ as ls,l as Dt,B as _e,m as ft,n as Ag,o as ds,u as Be,p as Zd,q as Rg,f as fs,g as br,h as Xd,j as fe,A as wt,r as Mn,P as Kd,R as qg,F as Rt,V as Ce,i as qt,C as nc,S as Oa,b as za,c as Ha,T as Lg,s as $g,v as Pg,w as hs,x as Fg,y as Dg,z as jd,D as Qd,E as _r,G as Og,H as zg,I as Hg,J as Bg,K as Lt,e as Vg,M as Gg,d as Ug,t as Yg}from"./index-sihFV1NS.js";import{u as rc}from"./ConfirmDialog-WMVurgkl.js";import{V as Wg}from"./ViewHeader-xo54NRb6.js";import{u as Ba}from"./useToggle-mZS4AEtR.js";import{B as Zg,D as Xg}from"./AuthenticationSection-58qp3x_M.js";import{N as Kg}from"./NameDescription-OqiBXUTh.js";import{M as Tn,a as kn}from"./Modal-uOAPm2rX.js";import{F as An,A as jg}from"./Form-bfj-xQZn.js";import{P as Qg,L as Jg}from"./PaginatingTableToolbar--Dt3wwL6.js";import{u as em,m as tm}from"./useLocaleSort-K-jL4v2R.js";import{r as xr,a as Rn,b as Jd,c as ef,d as ps,_ as nm,i as Er,e as gs,f as tf,g as ms,h as rm,j as im,k as vs,l as nf,m as om,n as Me,o as qn,p as rf,q as Ln,s as $n,t as of,u as am,v as ys,w as af,x as sm,y as cm,z as sf,A as um,B as cf,C as ws,D as lm,E as uf,F as bs,G as dm,H as fm,I as hm,J as pm,K as gm,L as mm,M as vm}from"./Td-uwYquKT4.js";import{r as Ut,a as lf,b as df,c as ym,d as wm,e as Pn,f as bm,_ as ff,g as _m,h as hf,i as xm,j as pf,k as Em,l as Sm,P as Nm}from"./KeycloakDataTable-Q3kZYP9q.js";import"react-dom";import{P as gf}from"./plus-icon-zbmNbCLY.js";import{D as mf,a as vf,b as yf,c as wf,d as Qt,e as Cm}from"./DataListItemRow-te2VcAoi.js";import{D as Im}from"./DynamicComponents-f6aNOnzT.js";import{K as rr}from"./KeycloakTextInput--S1SG2UN.js";import{T as bf}from"./trash-icon-c1moCUVC.js";import{K as Mm}from"./KeycloakTextArea-NBwG1p2x.js";import{D as Tm}from"./DataListControl-eJK-PZDC.js";import{s as Br}from"./data-list-CDN1kyj9.js";import{T as ic}from"./Trans-1cjg0ImV.js";import{T as km,a as Am,b as Vr}from"./ToolbarContent-46I9Yg7h.js";import{F as oc}from"./Flex-W2FoLD7u.js";import{F as ac}from"./FlexItem-Mxf6oLng.js";import"./RoutableTabs-a7VqIL_I.js";import"./Tabs-wiayO8Tk.js";import"./MenuList-82IaVNxu.js";import"./TableToolbar-vuixsfwd.js";import"./DraggableTable-ZpdKj1kF.js";import"./resource-BRtaBrSc.js";import"./FormAccess-EK-4wbwg.js";import"./copy-icon-WaWzxYgU.js";import"./TimeSelector-UGEjvSE_.js";import"./NumberInput-QtFengwl.js";import"./minus-icon-3MARcJXf.js";import"./EmptyStateBody-jnnI7hpP.js";import"./EmptyStateSecondaryActions-G5doWCZ5.js";import"./MultiLineInput-MBnUzZD_.js";import"./question-circle-icon-0KWACECW.js";import"./sortBy-zPScg0cx.js";import"./_baseRest-lI6NnEVt.js";import"./grip-vertical-icon-accuSWkz.js";import"./ClientSelect-sh5SEoBO.js";import"./FileUpload-LIezXv7x.js";import"./CodeEditor-7uqvO0EK.js";import"./GroupPickerDialog-gC2-xBPw.js";import"./ActionListItem-1jrwMZdM.js";import"./PasswordInput-P6txGPqu.js";import"./AddRoleMappingModal-uxjjMt5W.js";import"./filter-icon-0B3gA_nj.js";const _f=e=>{var{className:t="",isExpanded:n=!1,"aria-controls":r="","aria-label":i="Details",rowid:o="",id:a,buttonProps:s}=e,u=ls(e,["className","isExpanded","aria-controls","aria-label","rowid","id","buttonProps"]);return Pe.createElement("div",Object.assign({className:Dt(Br.dataListItemControl,t)},u),Pe.createElement("div",{className:Dt(Br.dataListToggle)},Pe.createElement(_e,Object.assign({id:a,variant:ft.plain,"aria-controls":r!==""&&r,"aria-label":i,"aria-labelledby":i!=="Details"?null:`${o} ${a}`,"aria-expanded":n},s),Pe.createElement("div",{className:Dt(Br.dataListToggleIcon)},Pe.createElement(Ag,null)))))};_f.displayName="DataListToggle";const Ot={modifiers:{compact:"pf-m-compact",selected:"pf-m-selected",disabled:"pf-m-disabled"},themeDark:"pf-theme-dark",toggleGroup:"pf-c-toggle-group",toggleGroupButton:"pf-c-toggle-group__button",toggleGroupIcon:"pf-c-toggle-group__icon",toggleGroupItem:"pf-c-toggle-group__item",toggleGroupText:"pf-c-toggle-group__text"};var ir;(function(e){e.icon="icon",e.text="text"})(ir||(ir={}));const Va=({variant:e,children:t})=>Pe.createElement("span",{className:Dt(e==="icon"&&Ot.toggleGroupIcon,e==="text"&&Ot.toggleGroupText)},t);Va.displayName="ToggleGroupItemElement";const or=e=>{var{text:t,icon:n,className:r,isDisabled:i=!1,isSelected:o=!1,"aria-label":a="",onChange:s=()=>{},buttonId:u=""}=e,l=ls(e,["text","icon","className","isDisabled","isSelected","aria-label","onChange","buttonId"]);const c=d=>{s(!o,d)};return!a&&n&&!t&&console.warn("An accessible aria-label is required when using the toggle group item icon variant."),Pe.createElement("div",Object.assign({className:Dt(Ot.toggleGroupItem,r)},l),Pe.createElement("button",Object.assign({type:"button",className:Dt(Ot.toggleGroupButton,o&&Ot.modifiers.selected),"aria-pressed":o,onClick:c},a&&{"aria-label":a},i&&{disabled:!0},u&&{id:u}),n?Pe.createElement(Va,{variant:ir.icon},n):null,t?Pe.createElement(Va,{variant:ir.text},t):null))};or.displayName="ToggleGroupItem";const xf=e=>{var{className:t,children:n,isCompact:r=!1,areAllGroupsDisabled:i=!1,"aria-label":o}=e,a=ls(e,["className","children","isCompact","areAllGroupsDisabled","aria-label"]);const s=Pe.Children.map(n,u=>u.type.name!==or.name?u:Pe.cloneElement(u,i?{isDisabled:!0}:{}));return Pe.createElement("div",Object.assign({className:Dt(Ot.toggleGroup,r&&Ot.modifiers.compact,t),role:"group","aria-label":o},a),s)};xf.displayName="ToggleGroup";const Rm={name:"CogIcon",height:512,width:512,svgPath:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z",yOffset:0,xOffset:0},qm=ds(Rm),Lm={name:"DomainIcon",height:1024,width:1024,svgPath:"M544,511.9 C561.476067,511.948945 575.664266,525.962873 575.994253,543.371439 L576,543.9 L576,991.9 C575.951055,1009.37607 561.937127,1023.56427 544.528561,1023.89425 L544,1023.9 L352,1023.9 C334.523933,1023.85105 320.335734,1009.83713 320.005747,992.428561 L320,991.9 L320,543.9 C320.048945,526.423933 334.062873,512.235734 351.471439,511.905747 L352,511.9 L544,511.9 Z M704,576 L704,960 L640,960 L640,576 L704,576 Z M512,896 L384,896 L384,960 L512,960 L512,896 Z M960,513.1 L960,513.2 C960,665.4 884.1,799.9 768,880.9 L768,880.9 L768,799.4 C773.3,794.6 778.4,789.8 783.5,784.7 C855.624209,712.728348 896.108133,614.991161 896,513.1 L896,513.1 L960,513.1 Z M149.8,385 C100.714385,524.561202 135.973879,679.905126 240.5,784.6 C245.5,789.7 250.7,794.6 256,799.3 L256,799.3 L256,880.8 C139.9,799.8 63.9999013,665.3 63.9999013,513.1 C63.9712238,469.725105 70.236499,426.575548 82.6,385 L82.6,385 Z M512.1,704 L384,704 L384,832 L512.1,832 L512.1,704 Z M512,576 L448,576 L448,640 L512,640 L512,576 Z M864,-1.13686838e-13 C881.496381,-1.13686838e-13 895.713128,14.0417829 895.995713,31.4708215 L896,32 L896,406 C896,423.496381 881.958217,437.713128 864.529179,437.995713 L864,438 L608,438 C590.503619,438 576.286872,423.958217 576.004287,406.529179 L576,406 L576,32 C576,14.5036191 590.041783,0.286872383 607.470821,0.00428708574 L608,-1.13686838e-13 L864,-1.13686838e-13 Z M1024,64 L1024,384 L960,384 L960,64 L1024,64 Z M832,256 L640,256 L640,352 L832,352 L832,256 Z M224,-5.68434189e-14 C241.476067,0.0489452394 255.664266,14.0628726 255.994253,31.4714395 L256,32 L256,288 C255.951055,305.476067 241.937127,319.664266 224.528561,319.994253 L224,320 L32,320 C14.5239331,319.951055 0.335734448,305.937127 0.00574685353,288.528561 L0,288 L0,32 C0.0489452394,14.5239331 14.0628726,0.335734448 31.4714395,0.00574685353 L32,-5.68434189e-14 L224,-5.68434189e-14 Z M192,192 L64,192 L64,256 L192,256 L192,192 Z M512,65 L512,129 C460.642759,128.90985 409.795141,139.181409 362.5,159.2 C347.917219,165.399771 333.724426,172.47947 320,180.4 L320,180.4 L320,108.2 C380.012207,79.7623165 445.590913,65.0071076 512,65 L512,65 Z M832,64 L736,64 L736,160 L832,160 L832,64 Z M192,64 L128,64 L128,128 L192,128 L192,64 Z",yOffset:0,xOffset:0},$m=ds(Lm),Pm={name:"TableIcon",height:512,width:512,svgPath:"M464 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zM224 416H64v-96h160v96zm0-160H64v-96h160v96zm224 160H288v-96h160v96zm0-160H288v-96h160v96z",yOffset:0,xOffset:0},Fm=ds(Pm),Dm="_icon_1gmts_2",Om={icon:Dm},zm=()=>{const{t:e}=Be();return x(Zd,{icon:x(Rg,{className:Om.icon}),children:e("buildIn")})},Hm=({flow:e,toggleDialog:t})=>{const{t:n}=Be(),{addAlert:r,addError:i}=fs(),o=br({mode:"onChange"}),{reset:a,handleSubmit:s}=o;ue(()=>a(e),[e]);const u=async l=>{try{await fe.authenticationManagement.updateFlow({flowId:e.id},{...e,...l}),r(n("updateFlowSuccess"),wt.success)}catch(c){i("updateFlowError",c)}t()};return x(Tn,{title:n("editFlow"),onClose:t,variant:kn.small,actions:[x(_e,{"data-testid":"confirm",type:"submit",form:"edit-flow-form",children:n("edit")},"confirm"),x(_e,{"data-testid":"cancel",variant:ft.link,onClick:()=>t(),children:n("cancel")},"cancel")],isOpen:!0,children:x(Xd,{...o,children:x(An,{id:"edit-flow-form",onSubmit:s(u),isHorizontal:!0,children:x(Kg,{})})})})},Bm=({list:e,setValue:t})=>x(Kd,{variant:"light",className:"pf-u-py-lg",children:x(An,{isHorizontal:!0,children:e?.map(n=>x(qg,{id:n.id,name:"provider",label:n.displayName,"data-testid":n.id,description:n.description,onChange:()=>{t(n)}},n.id))})}),_s=({name:e,type:t,onSelect:n})=>{const{t:r}=Be(),[i,o]=ie(),[a,s]=ie(),[u,l]=ie(10),[c,d]=ie(0),[h,f]=ie(""),g=em();Mn(async()=>{switch(t){case"client":return fe.authenticationManagement.getClientAuthenticatorProviders();case"form":return fe.authenticationManagement.getFormActionProviders();case"condition":return(await fe.authenticationManagement.getAuthenticatorProviders()).filter(us);case"basic":default:return(await fe.authenticationManagement.getAuthenticatorProviders()).filter(v=>!us(v))}},m=>s(m),[]);const p=Fe(()=>{const m=h.trim().toLowerCase();return g(a??[],tm("displayName")).filter(({displayName:v,description:b})=>v?.toLowerCase().includes(m)||b?.toLowerCase().includes(m)).slice(c,c+u+1)},[a,h,c,u]);return x(Tn,{variant:kn.medium,isOpen:!0,title:r("addStepTo",{name:e}),onClose:()=>n(),actions:[x(_e,{id:"modal-add","data-testid":"modal-add",onClick:()=>n(i),children:r("add")},"add"),x(_e,{"data-testid":"cancel",id:"modal-cancel",variant:ft.link,onClick:()=>{n()},children:r("cancel")},"cancel")],children:a&&x(Qg,{count:p.length||0,first:c,max:u,onNextClick:d,onPreviousClick:d,onPerPageSelect:(m,v)=>{d(m),l(v)},inputGroupName:"search",inputGroupPlaceholder:r("search"),inputGroupOnEnter:f,children:x(Bm,{list:p.slice(0,u),setValue:o})})})},sc=["basic-flow","form-flow"],xs=({name:e,onConfirm:t,onCancel:n})=>{const{t:r}=Be(),{register:i,control:o,setValue:a,handleSubmit:s,formState:{errors:u}}=br(),[l,c]=ie(!1),[d,h]=ie(!1),[f,g]=ie();return Mn(()=>fe.authenticationManagement.getFormProviders(),g,[]),ue(()=>{f?.length===1&&a("provider",f[0].id)},[f]),x(Tn,{variant:kn.medium,title:r("addStepTo",{name:e}),onClose:n,actions:[x(_e,{"data-testid":"modal-add",type:"submit",form:"sub-flow-form",children:r("add")},"add"),x(_e,{"data-testid":"cancel",variant:ft.link,onClick:n,children:r("cancel")},"cancel")],isOpen:!0,children:re(An,{id:"sub-flow-form",onSubmit:s(t),isHorizontal:!0,children:[x(Rt,{label:r("name"),fieldId:"name",helperTextInvalid:r("required"),validated:u.name?Ce.error:Ce.default,labelIcon:x(qt,{helpText:r("flowNameHelp"),fieldLabelId:"name"}),isRequired:!0,children:x(rr,{id:"name","data-testid":"name",validated:u.name?Ce.error:Ce.default,...i("name",{required:!0})})}),x(Rt,{label:r("description"),fieldId:"description",labelIcon:x(qt,{helpText:r("flowNameDescriptionHelp"),fieldLabelId:"description"}),children:x(rr,{id:"description","data-testid":"description",...i("description")})}),x(Rt,{label:r("flowType"),fieldId:"flowType",labelIcon:x(qt,{helpText:r("flowTypeHelp"),fieldLabelId:"flowType"}),children:x(nc,{name:"type",defaultValue:sc[0],control:o,render:({field:p})=>x(Oa,{menuAppendTo:"parent",toggleId:"flowType",onToggle:c,onSelect:(m,v)=>{p.onChange(v.toString()),c(!1)},selections:r(`flow-type.${p.value}`),variant:za.single,isOpen:l,children:sc.map(m=>x(Ha,{value:m,selected:m===p.value,children:r(`flow-type.${m}`)},m))})})}),f&&f.length>1&&x(Rt,{label:r("flowType"),labelIcon:x(qt,{helpText:r("authenticationFlowTypeHelp"),fieldLabelId:"flowType"}),fieldId:"flowType",children:x(nc,{name:"provider",defaultValue:"",control:o,render:({field:p})=>x(Oa,{menuAppendTo:"parent",toggleId:"provider",onToggle:h,onSelect:(m,v)=>{p.onChange(v.toString()),h(!1)},selections:p.value,variant:za.single,isOpen:d,children:f.map(m=>x(Ha,{value:m.id,selected:m.displayName===p.value,children:m.displayName},m.id))})})})]})})},Vm=["addExecution","addSubFlow"],Gm=({flow:e,onAddExecution:t,onAddFlow:n})=>{const{t:r}=Be(),[i,o]=ie();return re(Ie,{children:[i==="addExecution"&&x(_s,{name:e.alias,type:e.providerId==="client-flow"?"client":"basic",onSelect:a=>{a&&t(a),o(void 0)}}),i==="addSubFlow"&&x(xs,{name:e.alias,onCancel:()=>o(void 0),onConfirm:a=>{n(a),o(void 0)}}),x(Jg,{message:r("emptyExecution"),instructions:r("emptyExecutionInstructions")}),x("div",{className:"keycloak__empty-execution-state__block",children:Vm.map(a=>re(oc,{className:"keycloak__empty-execution-state__help",children:[re(ac,{flex:{default:"flex_1"},children:[x(Lg,{headingLevel:"h2",size:$g.md,children:r(`${a}Title`)}),x("p",{children:r(a)})]}),x(oc,{alignSelf:{default:"alignSelfCenter"},children:x(ac,{children:x(_e,{"data-testid":a,variant:"tertiary",onClick:()=>o(a),children:r(a)})})})]},a))})]})};function Ee(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=Ee(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Ef={exports:{}},Sf={},Nf={exports:{}},Cf={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nn=N;function Um(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ym=typeof Object.is=="function"?Object.is:Um,Wm=nn.useState,Zm=nn.useEffect,Xm=nn.useLayoutEffect,Km=nn.useDebugValue;function jm(e,t){var n=t(),r=Wm({inst:{value:n,getSnapshot:t}}),i=r[0].inst,o=r[1];return Xm(function(){i.value=n,i.getSnapshot=t,Gr(i)&&o({inst:i})},[e,n,t]),Zm(function(){return Gr(i)&&o({inst:i}),e(function(){Gr(i)&&o({inst:i})})},[e]),Km(n),n}function Gr(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ym(e,n)}catch{return!0}}function Qm(e,t){return t()}var Jm=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Qm:jm;Cf.useSyncExternalStore=nn.useSyncExternalStore!==void 0?nn.useSyncExternalStore:Jm;Nf.exports=Cf;var e0=Nf.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sr=N,t0=e0;function n0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var r0=typeof Object.is=="function"?Object.is:n0,i0=t0.useSyncExternalStore,o0=Sr.useRef,a0=Sr.useEffect,s0=Sr.useMemo,c0=Sr.useDebugValue;Sf.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var o=o0(null);if(o.current===null){var a={hasValue:!1,value:null};o.current=a}else a=o.current;o=s0(function(){function u(f){if(!l){if(l=!0,c=f,f=r(f),i!==void 0&&a.hasValue){var g=a.value;if(i(g,f))return d=g}return d=f}if(g=d,r0(c,f))return g;var p=r(f);return i!==void 0&&i(g,p)?g:(c=f,d=p)}var l=!1,c,d,h=n===void 0?null:n;return[function(){return u(t())},h===null?void 0:function(){return u(h())}]},[t,n,r,i]);var s=i0(e,o[0],o[1]);return a0(function(){a.hasValue=!0,a.value=s},[s]),c0(s),s};Ef.exports=Sf;var u0=Ef.exports;const l0=Pg(u0);var d0={BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const cc=e=>{let t;const n=new Set,r=(u,l)=>{const c=typeof u=="function"?u(t):u;if(!Object.is(c,t)){const d=t;t=l??typeof c!="object"?c:Object.assign({},t,c),n.forEach(h=>h(t,d))}},i=()=>t,s={setState:r,getState:i,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(d0?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}};return t=e(r,i,s),s},f0=e=>e?cc(e):cc,{useDebugValue:h0}=N,{useSyncExternalStoreWithSelector:p0}=l0;function If(e,t=e.getState,n){const r=p0(e.subscribe,e.getState,e.getServerState||e.getState,t,n);return h0(r),r}const uc=(e,t)=>{const n=f0(e),r=(i,o=t)=>If(n,i,o);return Object.assign(r,n),r},g0=(e,t)=>e?uc(e,t):uc;function xe(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,i]of e)if(!Object.is(i,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Object.is(e[n[r]],t[n[r]]))return!1;return!0}var m0={value:()=>{}};function Nr(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Jn(n)}function Jn(e){this._=e}function v0(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Jn.prototype=Nr.prototype={constructor:Jn,on:function(e,t){var n=this._,r=v0(e+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(e=r[o]).type)&&(i=y0(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(i=(e=r[o]).type)n[i]=lc(n[i],e.name,t);else if(t==null)for(i in n)n[i]=lc(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Jn(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function y0(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function lc(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=m0,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Ga="http://www.w3.org/1999/xhtml";const dc={svg:"http://www.w3.org/2000/svg",xhtml:Ga,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Cr(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),dc.hasOwnProperty(t)?{space:dc[t],local:e}:e}function w0(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ga&&t.documentElement.namespaceURI===Ga?t.createElement(e):t.createElementNS(n,e)}}function b0(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Mf(e){var t=Cr(e);return(t.local?b0:w0)(t)}function _0(){}function Es(e){return e==null?_0:function(){return this.querySelector(e)}}function x0(e){typeof e!="function"&&(e=Es(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,s=r[i]=new Array(a),u,l,c=0;c<a;++c)(u=o[c])&&(l=e.call(u,u.__data__,c,o))&&("__data__"in u&&(l.__data__=u.__data__),s[c]=l);return new De(r,this._parents)}function E0(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function S0(){return[]}function Tf(e){return e==null?S0:function(){return this.querySelectorAll(e)}}function N0(e){return function(){return E0(e.apply(this,arguments))}}function C0(e){typeof e=="function"?e=N0(e):e=Tf(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var a=t[o],s=a.length,u,l=0;l<s;++l)(u=a[l])&&(r.push(e.call(u,u.__data__,l,a)),i.push(u));return new De(r,i)}function kf(e){return function(){return this.matches(e)}}function Af(e){return function(t){return t.matches(e)}}var I0=Array.prototype.find;function M0(e){return function(){return I0.call(this.children,e)}}function T0(){return this.firstElementChild}function k0(e){return this.select(e==null?T0:M0(typeof e=="function"?e:Af(e)))}var A0=Array.prototype.filter;function R0(){return Array.from(this.children)}function q0(e){return function(){return A0.call(this.children,e)}}function L0(e){return this.selectAll(e==null?R0:q0(typeof e=="function"?e:Af(e)))}function $0(e){typeof e!="function"&&(e=kf(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,s=r[i]=[],u,l=0;l<a;++l)(u=o[l])&&e.call(u,u.__data__,l,o)&&s.push(u);return new De(r,this._parents)}function Rf(e){return new Array(e.length)}function P0(){return new De(this._enter||this._groups.map(Rf),this._parents)}function ar(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}ar.prototype={constructor:ar,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function F0(e){return function(){return e}}function D0(e,t,n,r,i,o){for(var a=0,s,u=t.length,l=o.length;a<l;++a)(s=t[a])?(s.__data__=o[a],r[a]=s):n[a]=new ar(e,o[a]);for(;a<u;++a)(s=t[a])&&(i[a]=s)}function O0(e,t,n,r,i,o,a){var s,u,l=new Map,c=t.length,d=o.length,h=new Array(c),f;for(s=0;s<c;++s)(u=t[s])&&(h[s]=f=a.call(u,u.__data__,s,t)+"",l.has(f)?i[s]=u:l.set(f,u));for(s=0;s<d;++s)f=a.call(e,o[s],s,o)+"",(u=l.get(f))?(r[s]=u,u.__data__=o[s],l.delete(f)):n[s]=new ar(e,o[s]);for(s=0;s<c;++s)(u=t[s])&&l.get(h[s])===u&&(i[s]=u)}function z0(e){return e.__data__}function H0(e,t){if(!arguments.length)return Array.from(this,z0);var n=t?O0:D0,r=this._parents,i=this._groups;typeof e!="function"&&(e=F0(e));for(var o=i.length,a=new Array(o),s=new Array(o),u=new Array(o),l=0;l<o;++l){var c=r[l],d=i[l],h=d.length,f=B0(e.call(c,c&&c.__data__,l,r)),g=f.length,p=s[l]=new Array(g),m=a[l]=new Array(g),v=u[l]=new Array(h);n(c,d,p,m,v,f,t);for(var b=0,S=0,w,k;b<g;++b)if(w=p[b]){for(b>=S&&(S=b+1);!(k=m[S])&&++S<g;);w._next=k||null}}return a=new De(a,r),a._enter=s,a._exit=u,a}function B0(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function V0(){return new De(this._exit||this._groups.map(Rf),this._parents)}function G0(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function U0(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,a=Math.min(i,o),s=new Array(i),u=0;u<a;++u)for(var l=n[u],c=r[u],d=l.length,h=s[u]=new Array(d),f,g=0;g<d;++g)(f=l[g]||c[g])&&(h[g]=f);for(;u<i;++u)s[u]=n[u];return new De(s,this._parents)}function Y0(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function W0(e){e||(e=Z0);function t(d,h){return d&&h?e(d.__data__,h.__data__):!d-!h}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a=n[o],s=a.length,u=i[o]=new Array(s),l,c=0;c<s;++c)(l=a[c])&&(u[c]=l);u.sort(t)}return new De(i,this._parents).order()}function Z0(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function X0(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function K0(){return Array.from(this)}function j0(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function Q0(){let e=0;for(const t of this)++e;return e}function J0(){return!this.node()}function ev(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,a=i.length,s;o<a;++o)(s=i[o])&&e.call(s,s.__data__,o,i);return this}function tv(e){return function(){this.removeAttribute(e)}}function nv(e){return function(){this.removeAttributeNS(e.space,e.local)}}function rv(e,t){return function(){this.setAttribute(e,t)}}function iv(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function ov(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function av(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function sv(e,t){var n=Cr(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?nv:tv:typeof t=="function"?n.local?av:ov:n.local?iv:rv)(n,t))}function qf(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function cv(e){return function(){this.style.removeProperty(e)}}function uv(e,t,n){return function(){this.style.setProperty(e,t,n)}}function lv(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function dv(e,t,n){return arguments.length>1?this.each((t==null?cv:typeof t=="function"?lv:uv)(e,t,n??"")):rn(this.node(),e)}function rn(e,t){return e.style.getPropertyValue(t)||qf(e).getComputedStyle(e,null).getPropertyValue(t)}function fv(e){return function(){delete this[e]}}function hv(e,t){return function(){this[e]=t}}function pv(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function gv(e,t){return arguments.length>1?this.each((t==null?fv:typeof t=="function"?pv:hv)(e,t)):this.node()[e]}function Lf(e){return e.trim().split(/^|\s+/)}function Ss(e){return e.classList||new $f(e)}function $f(e){this._node=e,this._names=Lf(e.getAttribute("class")||"")}$f.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Pf(e,t){for(var n=Ss(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Ff(e,t){for(var n=Ss(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function mv(e){return function(){Pf(this,e)}}function vv(e){return function(){Ff(this,e)}}function yv(e,t){return function(){(t.apply(this,arguments)?Pf:Ff)(this,e)}}function wv(e,t){var n=Lf(e+"");if(arguments.length<2){for(var r=Ss(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?yv:t?mv:vv)(n,t))}function bv(){this.textContent=""}function _v(e){return function(){this.textContent=e}}function xv(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Ev(e){return arguments.length?this.each(e==null?bv:(typeof e=="function"?xv:_v)(e)):this.node().textContent}function Sv(){this.innerHTML=""}function Nv(e){return function(){this.innerHTML=e}}function Cv(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Iv(e){return arguments.length?this.each(e==null?Sv:(typeof e=="function"?Cv:Nv)(e)):this.node().innerHTML}function Mv(){this.nextSibling&&this.parentNode.appendChild(this)}function Tv(){return this.each(Mv)}function kv(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Av(){return this.each(kv)}function Rv(e){var t=typeof e=="function"?e:Mf(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function qv(){return null}function Lv(e,t){var n=typeof e=="function"?e:Mf(e),r=t==null?qv:typeof t=="function"?t:Es(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function $v(){var e=this.parentNode;e&&e.removeChild(this)}function Pv(){return this.each($v)}function Fv(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Dv(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ov(e){return this.select(e?Dv:Fv)}function zv(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Hv(e){return function(t){e.call(this,t,this.__data__)}}function Bv(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Vv(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function Gv(e,t,n){return function(){var r=this.__on,i,o=Hv(t);if(r){for(var a=0,s=r.length;a<s;++a)if((i=r[a]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Uv(e,t,n){var r=Bv(e+""),i,o=r.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var u=0,l=s.length,c;u<l;++u)for(i=0,c=s[u];i<o;++i)if((a=r[i]).type===c.type&&a.name===c.name)return c.value}return}for(s=t?Gv:Vv,i=0;i<o;++i)this.each(s(r[i],t,n));return this}function Df(e,t,n){var r=qf(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Yv(e,t){return function(){return Df(this,e,t)}}function Wv(e,t){return function(){return Df(this,e,t.apply(this,arguments))}}function Zv(e,t){return this.each((typeof t=="function"?Wv:Yv)(e,t))}function*Xv(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var Of=[null];function De(e,t){this._groups=e,this._parents=t}function Fn(){return new De([[document.documentElement]],Of)}function Kv(){return this}De.prototype=Fn.prototype={constructor:De,select:x0,selectAll:C0,selectChild:k0,selectChildren:L0,filter:$0,data:H0,enter:P0,exit:V0,join:G0,merge:U0,selection:Kv,order:Y0,sort:W0,call:X0,nodes:K0,node:j0,size:Q0,empty:J0,each:ev,attr:sv,style:dv,property:gv,classed:wv,text:Ev,html:Iv,raise:Tv,lower:Av,append:Rv,insert:Lv,remove:Pv,clone:Ov,datum:zv,on:Uv,dispatch:Zv,[Symbol.iterator]:Xv};function ze(e){return typeof e=="string"?new De([[document.querySelector(e)]],[document.documentElement]):new De([[e]],Of)}function jv(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Ye(e,t){if(e=jv(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Qv={passive:!1},bn={capture:!0,passive:!1};function Ur(e){e.stopImmediatePropagation()}function Jt(e){e.preventDefault(),e.stopImmediatePropagation()}function zf(e){var t=e.document.documentElement,n=ze(e).on("dragstart.drag",Jt,bn);"onselectstart"in t?n.on("selectstart.drag",Jt,bn):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Hf(e,t){var n=e.document.documentElement,r=ze(e).on("dragstart.drag",null);t&&(r.on("click.drag",Jt,bn),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Hn=e=>()=>e;function Ua(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:o,x:a,y:s,dx:u,dy:l,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:c}})}Ua.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Jv(e){return!e.ctrlKey&&!e.button}function ey(){return this.parentNode}function ty(e,t){return t??{x:e.x,y:e.y}}function ny(){return navigator.maxTouchPoints||"ontouchstart"in this}function ry(){var e=Jv,t=ey,n=ty,r=ny,i={},o=Nr("start","drag","end"),a=0,s,u,l,c,d=0;function h(w){w.on("mousedown.drag",f).filter(r).on("touchstart.drag",m).on("touchmove.drag",v,Qv).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(w,k){if(!(c||!e.call(this,w,k))){var M=S(this,t.call(this,w,k),w,k,"mouse");M&&(ze(w.view).on("mousemove.drag",g,bn).on("mouseup.drag",p,bn),zf(w.view),Ur(w),l=!1,s=w.clientX,u=w.clientY,M("start",w))}}function g(w){if(Jt(w),!l){var k=w.clientX-s,M=w.clientY-u;l=k*k+M*M>d}i.mouse("drag",w)}function p(w){ze(w.view).on("mousemove.drag mouseup.drag",null),Hf(w.view,l),Jt(w),i.mouse("end",w)}function m(w,k){if(e.call(this,w,k)){var M=w.changedTouches,L=t.call(this,w,k),$=M.length,A,D;for(A=0;A<$;++A)(D=S(this,L,w,k,M[A].identifier,M[A]))&&(Ur(w),D("start",w,M[A]))}}function v(w){var k=w.changedTouches,M=k.length,L,$;for(L=0;L<M;++L)($=i[k[L].identifier])&&(Jt(w),$("drag",w,k[L]))}function b(w){var k=w.changedTouches,M=k.length,L,$;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),L=0;L<M;++L)($=i[k[L].identifier])&&(Ur(w),$("end",w,k[L]))}function S(w,k,M,L,$,A){var D=o.copy(),F=Ye(A||M,k),O,C,y;if((y=n.call(w,new Ua("beforestart",{sourceEvent:M,target:h,identifier:$,active:a,x:F[0],y:F[1],dx:0,dy:0,dispatch:D}),L))!=null)return O=y.x-F[0]||0,C=y.y-F[1]||0,function I(_,R,P){var E=F,T;switch(_){case"start":i[$]=I,T=a++;break;case"end":delete i[$],--a;case"drag":F=Ye(P||R,k),T=a;break}D.call(_,w,new Ua(_,{sourceEvent:R,subject:y,target:h,identifier:$,active:T,x:F[0]+O,y:F[1]+C,dx:F[0]-E[0],dy:F[1]-E[1],dispatch:D}),L)}}return h.filter=function(w){return arguments.length?(e=typeof w=="function"?w:Hn(!!w),h):e},h.container=function(w){return arguments.length?(t=typeof w=="function"?w:Hn(w),h):t},h.subject=function(w){return arguments.length?(n=typeof w=="function"?w:Hn(w),h):n},h.touchable=function(w){return arguments.length?(r=typeof w=="function"?w:Hn(!!w),h):r},h.on=function(){var w=o.on.apply(o,arguments);return w===o?h:w},h.clickDistance=function(w){return arguments.length?(d=(w=+w)*w,h):Math.sqrt(d)},h}function Ns(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Bf(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Dn(){}var _n=.7,sr=1/_n,en="\\s*([+-]?\\d+)\\s*",xn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",rt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",iy=/^#([0-9a-f]{3,8})$/,oy=new RegExp(`^rgb\\(${en},${en},${en}\\)$`),ay=new RegExp(`^rgb\\(${rt},${rt},${rt}\\)$`),sy=new RegExp(`^rgba\\(${en},${en},${en},${xn}\\)$`),cy=new RegExp(`^rgba\\(${rt},${rt},${rt},${xn}\\)$`),uy=new RegExp(`^hsl\\(${xn},${rt},${rt}\\)$`),ly=new RegExp(`^hsla\\(${xn},${rt},${rt},${xn}\\)$`),fc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ns(Dn,En,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:hc,formatHex:hc,formatHex8:dy,formatHsl:fy,formatRgb:pc,toString:pc});function hc(){return this.rgb().formatHex()}function dy(){return this.rgb().formatHex8()}function fy(){return Vf(this).formatHsl()}function pc(){return this.rgb().formatRgb()}function En(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=iy.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?gc(t):n===3?new Re(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Bn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Bn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=oy.exec(e))?new Re(t[1],t[2],t[3],1):(t=ay.exec(e))?new Re(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=sy.exec(e))?Bn(t[1],t[2],t[3],t[4]):(t=cy.exec(e))?Bn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=uy.exec(e))?yc(t[1],t[2]/100,t[3]/100,1):(t=ly.exec(e))?yc(t[1],t[2]/100,t[3]/100,t[4]):fc.hasOwnProperty(e)?gc(fc[e]):e==="transparent"?new Re(NaN,NaN,NaN,0):null}function gc(e){return new Re(e>>16&255,e>>8&255,e&255,1)}function Bn(e,t,n,r){return r<=0&&(e=t=n=NaN),new Re(e,t,n,r)}function hy(e){return e instanceof Dn||(e=En(e)),e?(e=e.rgb(),new Re(e.r,e.g,e.b,e.opacity)):new Re}function Ya(e,t,n,r){return arguments.length===1?hy(e):new Re(e,t,n,r??1)}function Re(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Ns(Re,Ya,Bf(Dn,{brighter(e){return e=e==null?sr:Math.pow(sr,e),new Re(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?_n:Math.pow(_n,e),new Re(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Re(zt(this.r),zt(this.g),zt(this.b),cr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:mc,formatHex:mc,formatHex8:py,formatRgb:vc,toString:vc}));function mc(){return`#${$t(this.r)}${$t(this.g)}${$t(this.b)}`}function py(){return`#${$t(this.r)}${$t(this.g)}${$t(this.b)}${$t((isNaN(this.opacity)?1:this.opacity)*255)}`}function vc(){const e=cr(this.opacity);return`${e===1?"rgb(":"rgba("}${zt(this.r)}, ${zt(this.g)}, ${zt(this.b)}${e===1?")":`, ${e})`}`}function cr(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function zt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function $t(e){return e=zt(e),(e<16?"0":"")+e.toString(16)}function yc(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new We(e,t,n,r)}function Vf(e){if(e instanceof We)return new We(e.h,e.s,e.l,e.opacity);if(e instanceof Dn||(e=En(e)),!e)return new We;if(e instanceof We)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(t===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-t)/s+2:a=(t-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new We(a,s,u,e.opacity)}function gy(e,t,n,r){return arguments.length===1?Vf(e):new We(e,t,n,r??1)}function We(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Ns(We,gy,Bf(Dn,{brighter(e){return e=e==null?sr:Math.pow(sr,e),new We(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?_n:Math.pow(_n,e),new We(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Re(Yr(e>=240?e-240:e+120,i,r),Yr(e,i,r),Yr(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new We(wc(this.h),Vn(this.s),Vn(this.l),cr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=cr(this.opacity);return`${e===1?"hsl(":"hsla("}${wc(this.h)}, ${Vn(this.s)*100}%, ${Vn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function wc(e){return e=(e||0)%360,e<0?e+360:e}function Vn(e){return Math.max(0,Math.min(1,e||0))}function Yr(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Gf=e=>()=>e;function my(e,t){return function(n){return e+n*t}}function vy(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function yy(e){return(e=+e)==1?Uf:function(t,n){return n-t?vy(t,n,e):Gf(isNaN(t)?n:t)}}function Uf(e,t){var n=t-e;return n?my(e,n):Gf(isNaN(e)?t:e)}const bc=function e(t){var n=yy(t);function r(i,o){var a=n((i=Ya(i)).r,(o=Ya(o)).r),s=n(i.g,o.g),u=n(i.b,o.b),l=Uf(i.opacity,o.opacity);return function(c){return i.r=a(c),i.g=s(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function bt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Wa=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Wr=new RegExp(Wa.source,"g");function wy(e){return function(){return e}}function by(e){return function(t){return e(t)+""}}function _y(e,t){var n=Wa.lastIndex=Wr.lastIndex=0,r,i,o,a=-1,s=[],u=[];for(e=e+"",t=t+"";(r=Wa.exec(e))&&(i=Wr.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,u.push({i:a,x:bt(r,i)})),n=Wr.lastIndex;return n<t.length&&(o=t.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?u[0]?by(u[0].x):wy(t):(t=u.length,function(l){for(var c=0,d;c<t;++c)s[(d=u[c]).i]=d.x(l);return s.join("")})}var _c=180/Math.PI,Za={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Yf(e,t,n,r,i,o){var a,s,u;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),e*r<t*n&&(e=-e,t=-t,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*_c,skewX:Math.atan(u)*_c,scaleX:a,scaleY:s}}var Gn;function xy(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Za:Yf(t.a,t.b,t.c,t.d,t.e,t.f)}function Ey(e){return e==null||(Gn||(Gn=document.createElementNS("http://www.w3.org/2000/svg","g")),Gn.setAttribute("transform",e),!(e=Gn.transform.baseVal.consolidate()))?Za:(e=e.matrix,Yf(e.a,e.b,e.c,e.d,e.e,e.f))}function Wf(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function o(l,c,d,h,f,g){if(l!==d||c!==h){var p=f.push("translate(",null,t,null,n);g.push({i:p-4,x:bt(l,d)},{i:p-2,x:bt(c,h)})}else(d||h)&&f.push("translate("+d+t+h+n)}function a(l,c,d,h){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),h.push({i:d.push(i(d)+"rotate(",null,r)-2,x:bt(l,c)})):c&&d.push(i(d)+"rotate("+c+r)}function s(l,c,d,h){l!==c?h.push({i:d.push(i(d)+"skewX(",null,r)-2,x:bt(l,c)}):c&&d.push(i(d)+"skewX("+c+r)}function u(l,c,d,h,f,g){if(l!==d||c!==h){var p=f.push(i(f)+"scale(",null,",",null,")");g.push({i:p-4,x:bt(l,d)},{i:p-2,x:bt(c,h)})}else(d!==1||h!==1)&&f.push(i(f)+"scale("+d+","+h+")")}return function(l,c){var d=[],h=[];return l=e(l),c=e(c),o(l.translateX,l.translateY,c.translateX,c.translateY,d,h),a(l.rotate,c.rotate,d,h),s(l.skewX,c.skewX,d,h),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,d,h),l=c=null,function(f){for(var g=-1,p=h.length,m;++g<p;)d[(m=h[g]).i]=m.x(f);return d.join("")}}}var Sy=Wf(xy,"px, ","px)","deg)"),Ny=Wf(Ey,", ",")",")"),Cy=1e-12;function xc(e){return((e=Math.exp(e))+1/e)/2}function Iy(e){return((e=Math.exp(e))-1/e)/2}function My(e){return((e=Math.exp(2*e))-1)/(e+1)}const Ty=function e(t,n,r){function i(o,a){var s=o[0],u=o[1],l=o[2],c=a[0],d=a[1],h=a[2],f=c-s,g=d-u,p=f*f+g*g,m,v;if(p<Cy)v=Math.log(h/l)/t,m=function(L){return[s+L*f,u+L*g,l*Math.exp(t*L*v)]};else{var b=Math.sqrt(p),S=(h*h-l*l+r*p)/(2*l*n*b),w=(h*h-l*l-r*p)/(2*h*n*b),k=Math.log(Math.sqrt(S*S+1)-S),M=Math.log(Math.sqrt(w*w+1)-w);v=(M-k)/t,m=function(L){var $=L*v,A=xc(k),D=l/(n*b)*(A*My(t*$+k)-Iy(k));return[s+D*f,u+D*g,l*A/xc(t*$+k)]}}return m.duration=v*1e3*t/Math.SQRT2,m}return i.rho=function(o){var a=Math.max(.001,+o),s=a*a,u=s*s;return e(a,s,u)},i}(Math.SQRT2,2,4);var on=0,pn=0,un=0,Zf=1e3,ur,gn,lr=0,Vt=0,Ir=0,Sn=typeof performance=="object"&&performance.now?performance:Date,Xf=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Cs(){return Vt||(Xf(ky),Vt=Sn.now()+Ir)}function ky(){Vt=0}function dr(){this._call=this._time=this._next=null}dr.prototype=Kf.prototype={constructor:dr,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Cs():+n)+(t==null?0:+t),!this._next&&gn!==this&&(gn?gn._next=this:ur=this,gn=this),this._call=e,this._time=n,Xa()},stop:function(){this._call&&(this._call=null,this._time=1/0,Xa())}};function Kf(e,t,n){var r=new dr;return r.restart(e,t,n),r}function Ay(){Cs(),++on;for(var e=ur,t;e;)(t=Vt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--on}function Ec(){Vt=(lr=Sn.now())+Ir,on=pn=0;try{Ay()}finally{on=0,qy(),Vt=0}}function Ry(){var e=Sn.now(),t=e-lr;t>Zf&&(Ir-=t,lr=e)}function qy(){for(var e,t=ur,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:ur=n);gn=e,Xa(r)}function Xa(e){if(!on){pn&&(pn=clearTimeout(pn));var t=e-Vt;t>24?(e<1/0&&(pn=setTimeout(Ec,e-Sn.now()-Ir)),un&&(un=clearInterval(un))):(un||(lr=Sn.now(),un=setInterval(Ry,Zf)),on=1,Xf(Ec))}}function Sc(e,t,n){var r=new dr;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Ly=Nr("start","end","cancel","interrupt"),$y=[],jf=0,Nc=1,Ka=2,er=3,Cc=4,ja=5,tr=6;function Mr(e,t,n,r,i,o){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;Py(e,n,{name:t,index:r,group:i,on:Ly,tween:$y,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:jf})}function Is(e,t){var n=Xe(e,t);if(n.state>jf)throw new Error("too late; already scheduled");return n}function it(e,t){var n=Xe(e,t);if(n.state>er)throw new Error("too late; already running");return n}function Xe(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Py(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Kf(o,0,n.time);function o(l){n.state=Nc,n.timer.restart(a,n.delay,n.time),n.delay<=l&&a(l-n.delay)}function a(l){var c,d,h,f;if(n.state!==Nc)return u();for(c in r)if(f=r[c],f.name===n.name){if(f.state===er)return Sc(a);f.state===Cc?(f.state=tr,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete r[c]):+c<t&&(f.state=tr,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete r[c])}if(Sc(function(){n.state===er&&(n.state=Cc,n.timer.restart(s,n.delay,n.time),s(l))}),n.state=Ka,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Ka){for(n.state=er,i=new Array(h=n.tween.length),c=0,d=-1;c<h;++c)(f=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=f);i.length=d+1}}function s(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=ja,1),d=-1,h=i.length;++d<h;)i[d].call(e,c);n.state===ja&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=tr,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function nr(e,t){var n=e.__transition,r,i,o=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((r=n[a]).name!==t){o=!1;continue}i=r.state>Ka&&r.state<ja,r.state=tr,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[a]}o&&delete e.__transition}}function Fy(e){return this.each(function(){nr(this,e)})}function Dy(e,t){var n,r;return function(){var i=it(this,e),o=i.tween;if(o!==n){r=n=o;for(var a=0,s=r.length;a<s;++a)if(r[a].name===t){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function Oy(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=it(this,e),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=s;break}u===l&&i.push(s)}o.tween=i}}function zy(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Xe(this.node(),n).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===e)return a.value;return null}return this.each((t==null?Dy:Oy)(n,e,t))}function Ms(e,t,n){var r=e._id;return e.each(function(){var i=it(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Xe(i,r).value[t]}}function Qf(e,t){var n;return(typeof t=="number"?bt:t instanceof En?bc:(n=En(t))?(t=n,bc):_y)(e,t)}function Hy(e){return function(){this.removeAttribute(e)}}function By(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Vy(e,t,n){var r,i=n+"",o;return function(){var a=this.getAttribute(e);return a===i?null:a===r?o:o=t(r=a,n)}}function Gy(e,t,n){var r,i=n+"",o;return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===r?o:o=t(r=a,n)}}function Uy(e,t,n){var r,i,o;return function(){var a,s=n(this),u;return s==null?void this.removeAttribute(e):(a=this.getAttribute(e),u=s+"",a===u?null:a===r&&u===i?o:(i=u,o=t(r=a,s)))}}function Yy(e,t,n){var r,i,o;return function(){var a,s=n(this),u;return s==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),u=s+"",a===u?null:a===r&&u===i?o:(i=u,o=t(r=a,s)))}}function Wy(e,t){var n=Cr(e),r=n==="transform"?Ny:Qf;return this.attrTween(e,typeof t=="function"?(n.local?Yy:Uy)(n,r,Ms(this,"attr."+e,t)):t==null?(n.local?By:Hy)(n):(n.local?Gy:Vy)(n,r,t))}function Zy(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Xy(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Ky(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&Xy(e,o)),n}return i._value=t,i}function jy(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&Zy(e,o)),n}return i._value=t,i}function Qy(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Cr(e);return this.tween(n,(r.local?Ky:jy)(r,t))}function Jy(e,t){return function(){Is(this,e).delay=+t.apply(this,arguments)}}function ew(e,t){return t=+t,function(){Is(this,e).delay=t}}function tw(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Jy:ew)(t,e)):Xe(this.node(),t).delay}function nw(e,t){return function(){it(this,e).duration=+t.apply(this,arguments)}}function rw(e,t){return t=+t,function(){it(this,e).duration=t}}function iw(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?nw:rw)(t,e)):Xe(this.node(),t).duration}function ow(e,t){if(typeof t!="function")throw new Error;return function(){it(this,e).ease=t}}function aw(e){var t=this._id;return arguments.length?this.each(ow(t,e)):Xe(this.node(),t).ease}function sw(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;it(this,e).ease=n}}function cw(e){if(typeof e!="function")throw new Error;return this.each(sw(this._id,e))}function uw(e){typeof e!="function"&&(e=kf(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,s=r[i]=[],u,l=0;l<a;++l)(u=o[l])&&e.call(u,u.__data__,l,o)&&s.push(u);return new ht(r,this._parents,this._name,this._id)}function lw(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u=t[s],l=n[s],c=u.length,d=a[s]=new Array(c),h,f=0;f<c;++f)(h=u[f]||l[f])&&(d[f]=h);for(;s<r;++s)a[s]=t[s];return new ht(a,this._parents,this._name,this._id)}function dw(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function fw(e,t,n){var r,i,o=dw(t)?Is:it;return function(){var a=o(this,e),s=a.on;s!==r&&(i=(r=s).copy()).on(t,n),a.on=i}}function hw(e,t){var n=this._id;return arguments.length<2?Xe(this.node(),n).on.on(e):this.each(fw(n,e,t))}function pw(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function gw(){return this.on("end.remove",pw(this._id))}function mw(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Es(e));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s=r[a],u=s.length,l=o[a]=new Array(u),c,d,h=0;h<u;++h)(c=s[h])&&(d=e.call(c,c.__data__,h,s))&&("__data__"in c&&(d.__data__=c.__data__),l[h]=d,Mr(l[h],t,n,h,l,Xe(c,n)));return new ht(o,this._parents,t,n)}function vw(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Tf(e));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var u=r[s],l=u.length,c,d=0;d<l;++d)if(c=u[d]){for(var h=e.call(c,c.__data__,d,u),f,g=Xe(c,n),p=0,m=h.length;p<m;++p)(f=h[p])&&Mr(f,t,n,p,h,g);o.push(h),a.push(c)}return new ht(o,a,t,n)}var yw=Fn.prototype.constructor;function ww(){return new yw(this._groups,this._parents)}function bw(e,t){var n,r,i;return function(){var o=rn(this,e),a=(this.style.removeProperty(e),rn(this,e));return o===a?null:o===n&&a===r?i:i=t(n=o,r=a)}}function Jf(e){return function(){this.style.removeProperty(e)}}function _w(e,t,n){var r,i=n+"",o;return function(){var a=rn(this,e);return a===i?null:a===r?o:o=t(r=a,n)}}function xw(e,t,n){var r,i,o;return function(){var a=rn(this,e),s=n(this),u=s+"";return s==null&&(u=s=(this.style.removeProperty(e),rn(this,e))),a===u?null:a===r&&u===i?o:(i=u,o=t(r=a,s))}}function Ew(e,t){var n,r,i,o="style."+t,a="end."+o,s;return function(){var u=it(this,e),l=u.on,c=u.value[o]==null?s||(s=Jf(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(a,i=c),u.on=r}}function Sw(e,t,n){var r=(e+="")=="transform"?Sy:Qf;return t==null?this.styleTween(e,bw(e,r)).on("end.style."+e,Jf(e)):typeof t=="function"?this.styleTween(e,xw(e,r,Ms(this,"style."+e,t))).each(Ew(this._id,e)):this.styleTween(e,_w(e,r,t),n).on("end.style."+e,null)}function Nw(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Cw(e,t,n){var r,i;function o(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&Nw(e,a,n)),r}return o._value=t,o}function Iw(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Cw(e,t,n??""))}function Mw(e){return function(){this.textContent=e}}function Tw(e){return function(){var t=e(this);this.textContent=t??""}}function kw(e){return this.tween("text",typeof e=="function"?Tw(Ms(this,"text",e)):Mw(e==null?"":e+""))}function Aw(e){return function(t){this.textContent=e.call(this,t)}}function Rw(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Aw(i)),t}return r._value=e,r}function qw(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Rw(e))}function Lw(){for(var e=this._name,t=this._id,n=eh(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,u,l=0;l<s;++l)if(u=a[l]){var c=Xe(u,t);Mr(u,e,n,l,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new ht(r,this._parents,e,n)}function $w(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var s={value:a},u={value:function(){--i===0&&o()}};n.each(function(){var l=it(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(u)),l.on=t}),i===0&&o()})}var Pw=0;function ht(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function eh(){return++Pw}var at=Fn.prototype;ht.prototype={constructor:ht,select:mw,selectAll:vw,selectChild:at.selectChild,selectChildren:at.selectChildren,filter:uw,merge:lw,selection:ww,transition:Lw,call:at.call,nodes:at.nodes,node:at.node,size:at.size,empty:at.empty,each:at.each,on:hw,attr:Wy,attrTween:Qy,style:Sw,styleTween:Iw,text:kw,textTween:qw,remove:gw,tween:zy,delay:tw,duration:iw,ease:aw,easeVarying:cw,end:$w,[Symbol.iterator]:at[Symbol.iterator]};function Fw(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Dw={time:null,delay:0,duration:250,ease:Fw};function Ow(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function zw(e){var t,n;e instanceof ht?(t=e._id,e=e._name):(t=eh(),(n=Dw).time=Cs(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,u,l=0;l<s;++l)(u=a[l])&&Mr(u,e,t,l,a,n||Ow(u,t));return new ht(r,this._parents,e,t)}Fn.prototype.interrupt=Fy;Fn.prototype.transition=zw;const Un=e=>()=>e;function Hw(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function ct(e,t,n){this.k=e,this.x=t,this.y=n}ct.prototype={constructor:ct,scale:function(e){return e===1?this:new ct(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new ct(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var dt=new ct(1,0,0);ct.prototype;function Zr(e){e.stopImmediatePropagation()}function ln(e){e.preventDefault(),e.stopImmediatePropagation()}function Bw(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Vw(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Ic(){return this.__zoom||dt}function Gw(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Uw(){return navigator.maxTouchPoints||"ontouchstart"in this}function Yw(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function th(){var e=Bw,t=Vw,n=Yw,r=Gw,i=Uw,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],s=250,u=Ty,l=Nr("start","zoom","end"),c,d,h,f=500,g=150,p=0,m=10;function v(y){y.property("__zoom",Ic).on("wheel.zoom",$,{passive:!1}).on("mousedown.zoom",A).on("dblclick.zoom",D).filter(i).on("touchstart.zoom",F).on("touchmove.zoom",O).on("touchend.zoom touchcancel.zoom",C).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}v.transform=function(y,I,_,R){var P=y.selection?y.selection():y;P.property("__zoom",Ic),y!==P?k(y,I,_,R):P.interrupt().each(function(){M(this,arguments).event(R).start().zoom(null,typeof I=="function"?I.apply(this,arguments):I).end()})},v.scaleBy=function(y,I,_,R){v.scaleTo(y,function(){var P=this.__zoom.k,E=typeof I=="function"?I.apply(this,arguments):I;return P*E},_,R)},v.scaleTo=function(y,I,_,R){v.transform(y,function(){var P=t.apply(this,arguments),E=this.__zoom,T=_==null?w(P):typeof _=="function"?_.apply(this,arguments):_,q=E.invert(T),z=typeof I=="function"?I.apply(this,arguments):I;return n(S(b(E,z),T,q),P,a)},_,R)},v.translateBy=function(y,I,_,R){v.transform(y,function(){return n(this.__zoom.translate(typeof I=="function"?I.apply(this,arguments):I,typeof _=="function"?_.apply(this,arguments):_),t.apply(this,arguments),a)},null,R)},v.translateTo=function(y,I,_,R,P){v.transform(y,function(){var E=t.apply(this,arguments),T=this.__zoom,q=R==null?w(E):typeof R=="function"?R.apply(this,arguments):R;return n(dt.translate(q[0],q[1]).scale(T.k).translate(typeof I=="function"?-I.apply(this,arguments):-I,typeof _=="function"?-_.apply(this,arguments):-_),E,a)},R,P)};function b(y,I){return I=Math.max(o[0],Math.min(o[1],I)),I===y.k?y:new ct(I,y.x,y.y)}function S(y,I,_){var R=I[0]-_[0]*y.k,P=I[1]-_[1]*y.k;return R===y.x&&P===y.y?y:new ct(y.k,R,P)}function w(y){return[(+y[0][0]+ +y[1][0])/2,(+y[0][1]+ +y[1][1])/2]}function k(y,I,_,R){y.on("start.zoom",function(){M(this,arguments).event(R).start()}).on("interrupt.zoom end.zoom",function(){M(this,arguments).event(R).end()}).tween("zoom",function(){var P=this,E=arguments,T=M(P,E).event(R),q=t.apply(P,E),z=_==null?w(q):typeof _=="function"?_.apply(P,E):_,U=Math.max(q[1][0]-q[0][0],q[1][1]-q[0][1]),G=P.__zoom,X=typeof I=="function"?I.apply(P,E):I,Q=u(G.invert(z).concat(U/G.k),X.invert(z).concat(U/X.k));return function(ne){if(ne===1)ne=X;else{var B=Q(ne),V=U/B[2];ne=new ct(V,z[0]-B[0]*V,z[1]-B[1]*V)}T.zoom(null,ne)}})}function M(y,I,_){return!_&&y.__zooming||new L(y,I)}function L(y,I){this.that=y,this.args=I,this.active=0,this.sourceEvent=null,this.extent=t.apply(y,I),this.taps=0}L.prototype={event:function(y){return y&&(this.sourceEvent=y),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(y,I){return this.mouse&&y!=="mouse"&&(this.mouse[1]=I.invert(this.mouse[0])),this.touch0&&y!=="touch"&&(this.touch0[1]=I.invert(this.touch0[0])),this.touch1&&y!=="touch"&&(this.touch1[1]=I.invert(this.touch1[0])),this.that.__zoom=I,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(y){var I=ze(this.that).datum();l.call(y,this.that,new Hw(y,{sourceEvent:this.sourceEvent,target:v,type:y,transform:this.that.__zoom,dispatch:l}),I)}};function $(y,...I){if(!e.apply(this,arguments))return;var _=M(this,I).event(y),R=this.__zoom,P=Math.max(o[0],Math.min(o[1],R.k*Math.pow(2,r.apply(this,arguments)))),E=Ye(y);if(_.wheel)(_.mouse[0][0]!==E[0]||_.mouse[0][1]!==E[1])&&(_.mouse[1]=R.invert(_.mouse[0]=E)),clearTimeout(_.wheel);else{if(R.k===P)return;_.mouse=[E,R.invert(E)],nr(this),_.start()}ln(y),_.wheel=setTimeout(T,g),_.zoom("mouse",n(S(b(R,P),_.mouse[0],_.mouse[1]),_.extent,a));function T(){_.wheel=null,_.end()}}function A(y,...I){if(h||!e.apply(this,arguments))return;var _=y.currentTarget,R=M(this,I,!0).event(y),P=ze(y.view).on("mousemove.zoom",z,!0).on("mouseup.zoom",U,!0),E=Ye(y,_),T=y.clientX,q=y.clientY;zf(y.view),Zr(y),R.mouse=[E,this.__zoom.invert(E)],nr(this),R.start();function z(G){if(ln(G),!R.moved){var X=G.clientX-T,Q=G.clientY-q;R.moved=X*X+Q*Q>p}R.event(G).zoom("mouse",n(S(R.that.__zoom,R.mouse[0]=Ye(G,_),R.mouse[1]),R.extent,a))}function U(G){P.on("mousemove.zoom mouseup.zoom",null),Hf(G.view,R.moved),ln(G),R.event(G).end()}}function D(y,...I){if(e.apply(this,arguments)){var _=this.__zoom,R=Ye(y.changedTouches?y.changedTouches[0]:y,this),P=_.invert(R),E=_.k*(y.shiftKey?.5:2),T=n(S(b(_,E),R,P),t.apply(this,I),a);ln(y),s>0?ze(this).transition().duration(s).call(k,T,R,y):ze(this).call(v.transform,T,R,y)}}function F(y,...I){if(e.apply(this,arguments)){var _=y.touches,R=_.length,P=M(this,I,y.changedTouches.length===R).event(y),E,T,q,z;for(Zr(y),T=0;T<R;++T)q=_[T],z=Ye(q,this),z=[z,this.__zoom.invert(z),q.identifier],P.touch0?!P.touch1&&P.touch0[2]!==z[2]&&(P.touch1=z,P.taps=0):(P.touch0=z,E=!0,P.taps=1+!!c);c&&(c=clearTimeout(c)),E&&(P.taps<2&&(d=z[0],c=setTimeout(function(){c=null},f)),nr(this),P.start())}}function O(y,...I){if(this.__zooming){var _=M(this,I).event(y),R=y.changedTouches,P=R.length,E,T,q,z;for(ln(y),E=0;E<P;++E)T=R[E],q=Ye(T,this),_.touch0&&_.touch0[2]===T.identifier?_.touch0[0]=q:_.touch1&&_.touch1[2]===T.identifier&&(_.touch1[0]=q);if(T=_.that.__zoom,_.touch1){var U=_.touch0[0],G=_.touch0[1],X=_.touch1[0],Q=_.touch1[1],ne=(ne=X[0]-U[0])*ne+(ne=X[1]-U[1])*ne,B=(B=Q[0]-G[0])*B+(B=Q[1]-G[1])*B;T=b(T,Math.sqrt(ne/B)),q=[(U[0]+X[0])/2,(U[1]+X[1])/2],z=[(G[0]+Q[0])/2,(G[1]+Q[1])/2]}else if(_.touch0)q=_.touch0[0],z=_.touch0[1];else return;_.zoom("touch",n(S(T,q,z),_.extent,a))}}function C(y,...I){if(this.__zooming){var _=M(this,I).event(y),R=y.changedTouches,P=R.length,E,T;for(Zr(y),h&&clearTimeout(h),h=setTimeout(function(){h=null},f),E=0;E<P;++E)T=R[E],_.touch0&&_.touch0[2]===T.identifier?delete _.touch0:_.touch1&&_.touch1[2]===T.identifier&&delete _.touch1;if(_.touch1&&!_.touch0&&(_.touch0=_.touch1,delete _.touch1),_.touch0)_.touch0[1]=this.__zoom.invert(_.touch0[0]);else if(_.end(),_.taps===2&&(T=Ye(T,this),Math.hypot(d[0]-T[0],d[1]-T[1])<m)){var q=ze(this).on("dblclick.zoom");q&&q.apply(this,arguments)}}}return v.wheelDelta=function(y){return arguments.length?(r=typeof y=="function"?y:Un(+y),v):r},v.filter=function(y){return arguments.length?(e=typeof y=="function"?y:Un(!!y),v):e},v.touchable=function(y){return arguments.length?(i=typeof y=="function"?y:Un(!!y),v):i},v.extent=function(y){return arguments.length?(t=typeof y=="function"?y:Un([[+y[0][0],+y[0][1]],[+y[1][0],+y[1][1]]]),v):t},v.scaleExtent=function(y){return arguments.length?(o[0]=+y[0],o[1]=+y[1],v):[o[0],o[1]]},v.translateExtent=function(y){return arguments.length?(a[0][0]=+y[0][0],a[1][0]=+y[1][0],a[0][1]=+y[0][1],a[1][1]=+y[1][1],v):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},v.constrain=function(y){return arguments.length?(n=y,v):n},v.duration=function(y){return arguments.length?(s=+y,v):s},v.interpolate=function(y){return arguments.length?(u=y,v):u},v.on=function(){var y=l.on.apply(l,arguments);return y===l?v:y},v.clickDistance=function(y){return arguments.length?(p=(y=+y)*y,v):Math.sqrt(p)},v.tapDistance=function(y){return arguments.length?(m=+y,v):m},v}const Tr=Yd(null),Ww=Tr.Provider,pt={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},nh=pt.error001();function de(e,t){const n=wr(Tr);if(n===null)throw new Error(nh);return If(n,e,t)}const be=()=>{const e=wr(Tr);if(e===null)throw new Error(nh);return Fe(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},Zw=e=>e.userSelectionActive?"none":"all";function Ts({position:e,children:t,className:n,style:r,...i}){const o=de(Zw),a=`${e}`.split("-");return N.createElement("div",{className:Ee(["react-flow__panel",n,...a]),style:{...r,pointerEvents:o},...i},t)}function Xw({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:N.createElement(Ts,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},N.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const Kw=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:i=!0,labelBgStyle:o={},labelBgPadding:a=[2,4],labelBgBorderRadius:s=2,children:u,className:l,...c})=>{const d=te(null),[h,f]=ie({x:0,y:0,width:0,height:0}),g=Ee(["react-flow__edge-textwrapper",l]);return ue(()=>{if(d.current){const p=d.current.getBBox();f({x:p.x,y:p.y,width:p.width,height:p.height})}},[n]),typeof n>"u"||!n?null:N.createElement("g",{transform:`translate(${e-h.width/2} ${t-h.height/2})`,className:g,visibility:h.width?"visible":"hidden",...c},i&&N.createElement("rect",{width:h.width+2*a[0],x:-a[0],y:-a[1],height:h.height+2*a[1],className:"react-flow__edge-textbg",style:o,rx:s,ry:s}),N.createElement("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:d,style:r},n),u)};var jw=le(Kw);const ks=e=>({width:e.offsetWidth,height:e.offsetHeight}),an=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),As=(e={x:0,y:0},t)=>({x:an(e.x,t[0][0],t[1][0]),y:an(e.y,t[0][1],t[1][1])}),Mc=(e,t,n)=>e<t?an(Math.abs(e-t),1,50)/50:e>n?-an(Math.abs(e-n),1,50)/50:0,rh=(e,t)=>{const n=Mc(e.x,35,t.width-35)*20,r=Mc(e.y,35,t.height-35)*20;return[n,r]},ih=e=>e.getRootNode?.()||window?.document,oh=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Nn=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),ah=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Tc=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),Qw=(e,t)=>ah(oh(Nn(e),Nn(t))),Qa=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},Jw=e=>He(e.width)&&He(e.height)&&He(e.x)&&He(e.y),He=e=>!isNaN(e)&&isFinite(e),we=Symbol.for("internals"),sh=["Enter"," ","Escape"],eb=(e,t)=>{},tb=e=>"nativeEvent"in e;function Ja(e){const n=(tb(e)?e.nativeEvent:e).composedPath?.()?.[0]||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const ch=e=>"clientX"in e,Nt=(e,t)=>{const n=ch(e),r=n?e.clientX:e.touches?.[0].clientX,i=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:i-(t?.top??0)}},fr=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,On=({id:e,path:t,labelX:n,labelY:r,label:i,labelStyle:o,labelShowBg:a,labelBgStyle:s,labelBgPadding:u,labelBgBorderRadius:l,style:c,markerEnd:d,markerStart:h,interactionWidth:f=20})=>N.createElement(N.Fragment,null,N.createElement("path",{id:e,style:c,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:d,markerStart:h}),f&&N.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:f,className:"react-flow__edge-interaction"}),i&&He(n)&&He(r)?N.createElement(jw,{x:n,y:r,label:i,labelStyle:o,labelShowBg:a,labelBgStyle:s,labelBgPadding:u,labelBgBorderRadius:l}):null);On.displayName="BaseEdge";const nb=(e,t)=>typeof t<"u"&&t?`url(#${t})`:typeof e<"u"?`url(#react-flow__${e})`:"none";function dn(e,t,n){return n===void 0?n:r=>{const i=t().edges.find(o=>o.id===e);i&&n(r,{...i})}}function uh({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,o=n<e?n+i:n-i,a=Math.abs(r-t)/2,s=r<t?r+a:r-a;return[o,s,i,a]}function lh({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:o,targetControlX:a,targetControlY:s}){const u=e*.125+i*.375+a*.375+n*.125,l=t*.125+o*.375+s*.375+r*.125,c=Math.abs(u-e),d=Math.abs(l-t);return[u,l,c,d]}var Gt;(function(e){e.Strict="strict",e.Loose="loose"})(Gt||(Gt={}));var Pt;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Pt||(Pt={}));var Cn;(function(e){e.Partial="partial",e.Full="full"})(Cn||(Cn={}));var xt;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(xt||(xt={}));var hr;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(hr||(hr={}));var H;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(H||(H={}));function kc({pos:e,x1:t,y1:n,x2:r,y2:i}){return e===H.Left||e===H.Right?[.5*(t+r),n]:[t,.5*(n+i)]}function dh({sourceX:e,sourceY:t,sourcePosition:n=H.Bottom,targetX:r,targetY:i,targetPosition:o=H.Top}){const[a,s]=kc({pos:n,x1:e,y1:t,x2:r,y2:i}),[u,l]=kc({pos:o,x1:r,y1:i,x2:e,y2:t}),[c,d,h,f]=lh({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:a,sourceControlY:s,targetControlX:u,targetControlY:l});return[`M${e},${t} C${a},${s} ${u},${l} ${r},${i}`,c,d,h,f]}const Rs=le(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:i=H.Bottom,targetPosition:o=H.Top,label:a,labelStyle:s,labelShowBg:u,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:d,style:h,markerEnd:f,markerStart:g,interactionWidth:p})=>{const[m,v,b]=dh({sourceX:e,sourceY:t,sourcePosition:i,targetX:n,targetY:r,targetPosition:o});return N.createElement(On,{path:m,labelX:v,labelY:b,label:a,labelStyle:s,labelShowBg:u,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:d,style:h,markerEnd:f,markerStart:g,interactionWidth:p})});Rs.displayName="SimpleBezierEdge";const Ac={[H.Left]:{x:-1,y:0},[H.Right]:{x:1,y:0},[H.Top]:{x:0,y:-1},[H.Bottom]:{x:0,y:1}},rb=({source:e,sourcePosition:t=H.Bottom,target:n})=>t===H.Left||t===H.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Rc=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function ib({source:e,sourcePosition:t=H.Bottom,target:n,targetPosition:r=H.Top,center:i,offset:o}){const a=Ac[t],s=Ac[r],u={x:e.x+a.x*o,y:e.y+a.y*o},l={x:n.x+s.x*o,y:n.y+s.y*o},c=rb({source:u,sourcePosition:t,target:l}),d=c.x!==0?"x":"y",h=c[d];let f=[],g,p;const m={x:0,y:0},v={x:0,y:0},[b,S,w,k]=uh({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[d]*s[d]===-1){g=i.x||b,p=i.y||S;const L=[{x:g,y:u.y},{x:g,y:l.y}],$=[{x:u.x,y:p},{x:l.x,y:p}];a[d]===h?f=d==="x"?L:$:f=d==="x"?$:L}else{const L=[{x:u.x,y:l.y}],$=[{x:l.x,y:u.y}];if(d==="x"?f=a.x===h?$:L:f=a.y===h?L:$,t===r){const C=Math.abs(e[d]-n[d]);if(C<=o){const y=Math.min(o-1,o-C);a[d]===h?m[d]=(u[d]>e[d]?-1:1)*y:v[d]=(l[d]>n[d]?-1:1)*y}}if(t!==r){const C=d==="x"?"y":"x",y=a[d]===s[C],I=u[C]>l[C],_=u[C]<l[C];(a[d]===1&&(!y&&I||y&&_)||a[d]!==1&&(!y&&_||y&&I))&&(f=d==="x"?L:$)}const A={x:u.x+m.x,y:u.y+m.y},D={x:l.x+v.x,y:l.y+v.y},F=Math.max(Math.abs(A.x-f[0].x),Math.abs(D.x-f[0].x)),O=Math.max(Math.abs(A.y-f[0].y),Math.abs(D.y-f[0].y));F>=O?(g=(A.x+D.x)/2,p=f[0].y):(g=f[0].x,p=(A.y+D.y)/2)}return[[e,{x:u.x+m.x,y:u.y+m.y},...f,{x:l.x+v.x,y:l.y+v.y},n],g,p,w,k]}function ob(e,t,n,r){const i=Math.min(Rc(e,t)/2,Rc(t,n)/2,r),{x:o,y:a}=t;if(e.x===o&&o===n.x||e.y===a&&a===n.y)return`L${o} ${a}`;if(e.y===a){const l=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${o+i*l},${a}Q ${o},${a} ${o},${a+i*c}`}const s=e.x<n.x?1:-1,u=e.y<n.y?-1:1;return`L ${o},${a+i*u}Q ${o},${a} ${o+i*s},${a}`}function es({sourceX:e,sourceY:t,sourcePosition:n=H.Bottom,targetX:r,targetY:i,targetPosition:o=H.Top,borderRadius:a=5,centerX:s,centerY:u,offset:l=20}){const[c,d,h,f,g]=ib({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:o,center:{x:s,y:u},offset:l});return[c.reduce((m,v,b)=>{let S="";return b>0&&b<c.length-1?S=ob(c[b-1],v,c[b+1],a):S=`${b===0?"M":"L"}${v.x} ${v.y}`,m+=S,m},""),d,h,f,g]}const kr=le(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:i,labelStyle:o,labelShowBg:a,labelBgStyle:s,labelBgPadding:u,labelBgBorderRadius:l,style:c,sourcePosition:d=H.Bottom,targetPosition:h=H.Top,markerEnd:f,markerStart:g,pathOptions:p,interactionWidth:m})=>{const[v,b,S]=es({sourceX:e,sourceY:t,sourcePosition:d,targetX:n,targetY:r,targetPosition:h,borderRadius:p?.borderRadius,offset:p?.offset});return N.createElement(On,{path:v,labelX:b,labelY:S,label:i,labelStyle:o,labelShowBg:a,labelBgStyle:s,labelBgPadding:u,labelBgBorderRadius:l,style:c,markerEnd:f,markerStart:g,interactionWidth:m})});kr.displayName="SmoothStepEdge";const qs=le(e=>N.createElement(kr,{...e,pathOptions:Fe(()=>({borderRadius:0,offset:e.pathOptions?.offset}),[e.pathOptions?.offset])}));qs.displayName="StepEdge";function ab({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,o,a,s]=uh({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,o,a,s]}const Ls=le(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:i,labelStyle:o,labelShowBg:a,labelBgStyle:s,labelBgPadding:u,labelBgBorderRadius:l,style:c,markerEnd:d,markerStart:h,interactionWidth:f})=>{const[g,p,m]=ab({sourceX:e,sourceY:t,targetX:n,targetY:r});return N.createElement(On,{path:g,labelX:p,labelY:m,label:i,labelStyle:o,labelShowBg:a,labelBgStyle:s,labelBgPadding:u,labelBgBorderRadius:l,style:c,markerEnd:d,markerStart:h,interactionWidth:f})});Ls.displayName="StraightEdge";function Yn(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function qc({pos:e,x1:t,y1:n,x2:r,y2:i,c:o}){switch(e){case H.Left:return[t-Yn(t-r,o),n];case H.Right:return[t+Yn(r-t,o),n];case H.Top:return[t,n-Yn(n-i,o)];case H.Bottom:return[t,n+Yn(i-n,o)]}}function $s({sourceX:e,sourceY:t,sourcePosition:n=H.Bottom,targetX:r,targetY:i,targetPosition:o=H.Top,curvature:a=.25}){const[s,u]=qc({pos:n,x1:e,y1:t,x2:r,y2:i,c:a}),[l,c]=qc({pos:o,x1:r,y1:i,x2:e,y2:t,c:a}),[d,h,f,g]=lh({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:s,sourceControlY:u,targetControlX:l,targetControlY:c});return[`M${e},${t} C${s},${u} ${l},${c} ${r},${i}`,d,h,f,g]}const pr=le(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:i=H.Bottom,targetPosition:o=H.Top,label:a,labelStyle:s,labelShowBg:u,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:d,style:h,markerEnd:f,markerStart:g,pathOptions:p,interactionWidth:m})=>{const[v,b,S]=$s({sourceX:e,sourceY:t,sourcePosition:i,targetX:n,targetY:r,targetPosition:o,curvature:p?.curvature});return N.createElement(On,{path:v,labelX:b,labelY:S,label:a,labelStyle:s,labelShowBg:u,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:d,style:h,markerEnd:f,markerStart:g,interactionWidth:m})});pr.displayName="BezierEdge";const Ps=Yd(null),sb=Ps.Provider;Ps.Consumer;const cb=()=>wr(Ps),ub=e=>"id"in e&&"source"in e&&"target"in e,lb=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,ts=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,db=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),fb=(e,t)=>{if(!e.source||!e.target)return t;let n;return ub(e)?n={...e}:n={...e,id:lb(e)},db(n,t)?t:t.concat(n)},ns=({x:e,y:t},[n,r,i],o,[a,s])=>{const u={x:(e-n)/i,y:(t-r)/i};return o?{x:a*Math.round(u.x/a),y:s*Math.round(u.y/s)}:u},fh=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r}),Ht=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],i={x:e.position.x-n,y:e.position.y-r};return{...i,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:i}},Ar=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const{x:o,y:a}=Ht(i,t).positionAbsolute;return oh(r,Nn({x:o,y:a,width:i.width||0,height:i.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return ah(n)},hh=(e,t,[n,r,i]=[0,0,1],o=!1,a=!1,s=[0,0])=>{const u={x:(t.x-n)/i,y:(t.y-r)/i,width:t.width/i,height:t.height/i},l=[];return e.forEach(c=>{const{width:d,height:h,selectable:f=!0,hidden:g=!1}=c;if(a&&!f||g)return!1;const{positionAbsolute:p}=Ht(c,s),m={x:p.x,y:p.y,width:d||0,height:h||0},v=Qa(u,m),b=typeof d>"u"||typeof h>"u"||d===null||h===null,S=o&&v>0,w=(d||0)*(h||0);(b||S||v>=w||c.dragging)&&l.push(c)}),l},ph=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},gh=(e,t,n,r,i,o=.1)=>{const a=t/(e.width*(1+o)),s=n/(e.height*(1+o)),u=Math.min(a,s),l=an(u,r,i),c=e.x+e.width/2,d=e.y+e.height/2,h=t/2-c*l,f=n/2-d*l;return{x:h,y:f,zoom:l}},At=(e,t=0)=>e.transition().duration(t);function Lc(e,t,n,r){return(t[n]||[]).reduce((i,o)=>(`${e.id}-${o.id}-${n}`!==r&&i.push({id:o.id||null,type:n,nodeId:e.id,x:(e.positionAbsolute?.x??0)+o.x+o.width/2,y:(e.positionAbsolute?.y??0)+o.y+o.height/2}),i),[])}function hb(e,t,n,r,i,o){const{x:a,y:s}=Nt(e),l=t.elementsFromPoint(a,s).find(g=>g.classList.contains("react-flow__handle"));if(l){const g=l.getAttribute("data-nodeid");if(g){const p=Fs(void 0,l),m=l.getAttribute("data-handleid"),v=o({nodeId:g,id:m,type:p});if(v){const b=i.find(S=>S.nodeId===g&&S.type===p&&S.id===m);return{handle:{id:m,type:p,nodeId:g,x:b?.x||n.x,y:b?.y||n.y},validHandleResult:v}}}}let c=[],d=1/0;if(i.forEach(g=>{const p=Math.sqrt((g.x-n.x)**2+(g.y-n.y)**2);if(p<=r){const m=o(g);p<=d&&(p<d?c=[{handle:g,validHandleResult:m}]:p===d&&c.push({handle:g,validHandleResult:m}),d=p)}}),!c.length)return{handle:null,validHandleResult:mh()};if(c.length===1)return c[0];const h=c.some(({validHandleResult:g})=>g.isValid),f=c.some(({handle:g})=>g.type==="target");return c.find(({handle:g,validHandleResult:p})=>f?g.type==="target":h?p.isValid:!0)||c[0]}const pb={source:null,target:null,sourceHandle:null,targetHandle:null},mh=()=>({handleDomNode:null,isValid:!1,connection:pb,endHandle:null});function vh(e,t,n,r,i,o,a){const s=i==="target",u=a.querySelector(`.react-flow__handle[data-id="${e?.nodeId}-${e?.id}-${e?.type}"]`),l={...mh(),handleDomNode:u};if(u){const c=Fs(void 0,u),d=u.getAttribute("data-nodeid"),h=u.getAttribute("data-handleid"),f=u.classList.contains("connectable"),g=u.classList.contains("connectableend"),p={source:s?d:n,sourceHandle:s?h:r,target:s?n:d,targetHandle:s?r:h};l.connection=p,f&&g&&(t===Gt.Strict?s&&c==="source"||!s&&c==="target":d!==n||h!==r)&&(l.endHandle={nodeId:d,handleId:h,type:c},l.isValid=o(p))}return l}function gb({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((i,o)=>{if(o[we]){const{handleBounds:a}=o[we];let s=[],u=[];a&&(s=Lc(o,a,"source",`${t}-${n}-${r}`),u=Lc(o,a,"target",`${t}-${n}-${r}`)),i.push(...s,...u)}return i},[])}function Fs(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function Xr(e){e?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function mb(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function yh({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:i,getState:o,setState:a,isValidConnection:s,edgeUpdaterType:u,onEdgeUpdateEnd:l}){const c=ih(e.target),{connectionMode:d,domNode:h,autoPanOnConnect:f,connectionRadius:g,onConnectStart:p,panBy:m,getNodes:v,cancelConnection:b}=o();let S=0,w;const{x:k,y:M}=Nt(e),L=c?.elementFromPoint(k,M),$=Fs(u,L),A=h?.getBoundingClientRect();if(!A||!$)return;let D,F=Nt(e,A),O=!1,C=null,y=!1,I=null;const _=gb({nodes:v(),nodeId:n,handleId:t,handleType:$}),R=()=>{if(!f)return;const[T,q]=rh(F,A);m({x:T,y:q}),S=requestAnimationFrame(R)};a({connectionPosition:F,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:$,connectionStartHandle:{nodeId:n,handleId:t,type:$},connectionEndHandle:null}),p?.(e,{nodeId:n,handleId:t,handleType:$});function P(T){const{transform:q}=o();F=Nt(T,A);const{handle:z,validHandleResult:U}=hb(T,c,ns(F,q,!1,[1,1]),g,_,G=>vh(G,d,n,t,i?"target":"source",s,c));if(w=z,O||(R(),O=!0),I=U.handleDomNode,C=U.connection,y=U.isValid,a({connectionPosition:w&&y?fh({x:w.x,y:w.y},q):F,connectionStatus:mb(!!w,y),connectionEndHandle:U.endHandle}),!w&&!y&&!I)return Xr(D);C.source!==C.target&&I&&(Xr(D),D=I,I.classList.add("connecting","react-flow__handle-connecting"),I.classList.toggle("valid",y),I.classList.toggle("react-flow__handle-valid",y))}function E(T){(w||I)&&C&&y&&r?.(C),o().onConnectEnd?.(T),u&&l?.(T),Xr(D),b(),cancelAnimationFrame(S),O=!1,y=!1,C=null,I=null,c.removeEventListener("mousemove",P),c.removeEventListener("mouseup",E),c.removeEventListener("touchmove",P),c.removeEventListener("touchend",E)}c.addEventListener("mousemove",P),c.addEventListener("mouseup",E),c.addEventListener("touchmove",P),c.addEventListener("touchend",E)}const $c=()=>!0,vb=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),yb=(e,t,n)=>r=>{const{connectionStartHandle:i,connectionEndHandle:o,connectionClickStartHandle:a}=r;return{connecting:i?.nodeId===e&&i?.handleId===t&&i?.type===n||o?.nodeId===e&&o?.handleId===t&&o?.type===n,clickConnecting:a?.nodeId===e&&a?.handleId===t&&a?.type===n}},wh=Wd(({type:e="source",position:t=H.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:o=!0,id:a,onConnect:s,children:u,className:l,onMouseDown:c,onTouchStart:d,...h},f)=>{const g=a||null,p=e==="target",m=be(),v=cb(),{connectOnClick:b,noPanClassName:S}=de(vb,xe),{connecting:w,clickConnecting:k}=de(yb(v,g,e),xe);v||m.getState().onError?.("010",pt.error010());const M=A=>{const{defaultEdgeOptions:D,onConnect:F,hasDefaultEdges:O}=m.getState(),C={...D,...A};if(O){const{edges:y,setEdges:I}=m.getState();I(fb(C,y))}F?.(C),s?.(C)},L=A=>{if(!v)return;const D=ch(A);i&&(D&&A.button===0||!D)&&yh({event:A,handleId:g,nodeId:v,onConnect:M,isTarget:p,getState:m.getState,setState:m.setState,isValidConnection:n||m.getState().isValidConnection||$c}),D?c?.(A):d?.(A)},$=A=>{const{onClickConnectStart:D,onClickConnectEnd:F,connectionClickStartHandle:O,connectionMode:C,isValidConnection:y}=m.getState();if(!v||!O&&!i)return;if(!O){D?.(A,{nodeId:v,handleId:g,handleType:e}),m.setState({connectionClickStartHandle:{nodeId:v,type:e,handleId:g}});return}const I=ih(A.target),_=n||y||$c,{connection:R,isValid:P}=vh({nodeId:v,id:g,type:e},C,O.nodeId,O.handleId||null,O.type,_,I);P&&M(R),F?.(A),m.setState({connectionClickStartHandle:null})};return N.createElement("div",{"data-handleid":g,"data-nodeid":v,"data-handlepos":t,"data-id":`${v}-${g}-${e}`,className:Ee(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",S,l,{source:!p,target:p,connectable:r,connectablestart:i,connectableend:o,connecting:k,connectionindicator:r&&(i&&!w||o&&w)}]),onMouseDown:L,onTouchStart:L,onClick:b?$:void 0,ref:f,...h},u)});wh.displayName="Handle";var It=le(wh);const bh=({data:e,isConnectable:t,targetPosition:n=H.Top,sourcePosition:r=H.Bottom})=>N.createElement(N.Fragment,null,N.createElement(It,{type:"target",position:n,isConnectable:t}),e?.label,N.createElement(It,{type:"source",position:r,isConnectable:t}));bh.displayName="DefaultNode";var rs=le(bh);const _h=({data:e,isConnectable:t,sourcePosition:n=H.Bottom})=>N.createElement(N.Fragment,null,e?.label,N.createElement(It,{type:"source",position:n,isConnectable:t}));_h.displayName="InputNode";var xh=le(_h);const Eh=({data:e,isConnectable:t,targetPosition:n=H.Top})=>N.createElement(N.Fragment,null,N.createElement(It,{type:"target",position:n,isConnectable:t}),e?.label);Eh.displayName="OutputNode";var Sh=le(Eh);const Ds=()=>null;Ds.displayName="GroupNode";const wb=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected)}),Wn=e=>e.id;function bb(e,t){return xe(e.selectedNodes.map(Wn),t.selectedNodes.map(Wn))&&xe(e.selectedEdges.map(Wn),t.selectedEdges.map(Wn))}const Nh=le(({onSelectionChange:e})=>{const t=be(),{selectedNodes:n,selectedEdges:r}=de(wb,bb);return ue(()=>{const i={nodes:n,edges:r};e?.(i),t.getState().onSelectionChange.forEach(o=>o(i))},[n,r,e]),null});Nh.displayName="SelectionListener";const _b=e=>!!e.onSelectionChange;function xb({onSelectionChange:e}){const t=de(_b);return e||t?N.createElement(Nh,{onSelectionChange:e}):null}const Eb=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Wt(e,t){ue(()=>{typeof e<"u"&&t(e)},[e])}function ee(e,t,n){ue(()=>{typeof t<"u"&&n({[e]:t})},[t])}const Sb=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:i,onConnectStart:o,onConnectEnd:a,onClickConnectStart:s,onClickConnectEnd:u,nodesDraggable:l,nodesConnectable:c,nodesFocusable:d,edgesFocusable:h,edgesUpdatable:f,elevateNodesOnSelect:g,minZoom:p,maxZoom:m,nodeExtent:v,onNodesChange:b,onEdgesChange:S,elementsSelectable:w,connectionMode:k,snapGrid:M,snapToGrid:L,translateExtent:$,connectOnClick:A,defaultEdgeOptions:D,fitView:F,fitViewOptions:O,onNodesDelete:C,onEdgesDelete:y,onNodeDrag:I,onNodeDragStart:_,onNodeDragStop:R,onSelectionDrag:P,onSelectionDragStart:E,onSelectionDragStop:T,noPanClassName:q,nodeOrigin:z,rfId:U,autoPanOnConnect:G,autoPanOnNodeDrag:X,onError:Q,connectionRadius:ne,isValidConnection:B,nodeDragThreshold:V})=>{const{setNodes:Z,setEdges:ae,setDefaultNodesAndEdges:oe,setMinZoom:me,setMaxZoom:ce,setTranslateExtent:W,setNodeExtent:pe,reset:K}=de(Eb,xe),Y=be();return ue(()=>{const Se=r?.map(Ge=>({...Ge,...D}));return oe(n,Se),()=>{K()}},[]),ee("defaultEdgeOptions",D,Y.setState),ee("connectionMode",k,Y.setState),ee("onConnect",i,Y.setState),ee("onConnectStart",o,Y.setState),ee("onConnectEnd",a,Y.setState),ee("onClickConnectStart",s,Y.setState),ee("onClickConnectEnd",u,Y.setState),ee("nodesDraggable",l,Y.setState),ee("nodesConnectable",c,Y.setState),ee("nodesFocusable",d,Y.setState),ee("edgesFocusable",h,Y.setState),ee("edgesUpdatable",f,Y.setState),ee("elementsSelectable",w,Y.setState),ee("elevateNodesOnSelect",g,Y.setState),ee("snapToGrid",L,Y.setState),ee("snapGrid",M,Y.setState),ee("onNodesChange",b,Y.setState),ee("onEdgesChange",S,Y.setState),ee("connectOnClick",A,Y.setState),ee("fitViewOnInit",F,Y.setState),ee("fitViewOnInitOptions",O,Y.setState),ee("onNodesDelete",C,Y.setState),ee("onEdgesDelete",y,Y.setState),ee("onNodeDrag",I,Y.setState),ee("onNodeDragStart",_,Y.setState),ee("onNodeDragStop",R,Y.setState),ee("onSelectionDrag",P,Y.setState),ee("onSelectionDragStart",E,Y.setState),ee("onSelectionDragStop",T,Y.setState),ee("noPanClassName",q,Y.setState),ee("nodeOrigin",z,Y.setState),ee("rfId",U,Y.setState),ee("autoPanOnConnect",G,Y.setState),ee("autoPanOnNodeDrag",X,Y.setState),ee("onError",Q,Y.setState),ee("connectionRadius",ne,Y.setState),ee("isValidConnection",B,Y.setState),ee("nodeDragThreshold",V,Y.setState),Wt(e,Z),Wt(t,ae),Wt(p,me),Wt(m,ce),Wt($,W),Wt(v,pe),null},Pc={display:"none"},Nb={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Ch="react-flow__node-desc",Ih="react-flow__edge-desc",Cb="react-flow__aria-live",Ib=e=>e.ariaLiveMessage;function Mb({rfId:e}){const t=de(Ib);return N.createElement("div",{id:`${Cb}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Nb},t)}function Tb({rfId:e,disableKeyboardA11y:t}){return N.createElement(N.Fragment,null,N.createElement("div",{id:`${Ch}-${e}`,style:Pc},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),N.createElement("div",{id:`${Ih}-${e}`,style:Pc},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&N.createElement(Mb,{rfId:e}))}var In=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,r]=ie(!1),i=te(!1),o=te(new Set([])),[a,s]=Fe(()=>{if(e!==null){const l=(Array.isArray(e)?e:[e]).filter(d=>typeof d=="string").map(d=>d.split("+")),c=l.reduce((d,h)=>d.concat(...h),[]);return[l,c]}return[[],[]]},[e]);return ue(()=>{const u=typeof document<"u"?document:null,l=t?.target||u;if(e!==null){const c=f=>{if(i.current=f.ctrlKey||f.metaKey||f.shiftKey,(!i.current||i.current&&!t.actInsideInputWithModifier)&&Ja(f))return!1;const p=Dc(f.code,s);o.current.add(f[p]),Fc(a,o.current,!1)&&(f.preventDefault(),r(!0))},d=f=>{if((!i.current||i.current&&!t.actInsideInputWithModifier)&&Ja(f))return!1;const p=Dc(f.code,s);Fc(a,o.current,!0)?(r(!1),o.current.clear()):o.current.delete(f[p]),f.key==="Meta"&&o.current.clear(),i.current=!1},h=()=>{o.current.clear(),r(!1)};return l?.addEventListener("keydown",c),l?.addEventListener("keyup",d),window.addEventListener("blur",h),()=>{l?.removeEventListener("keydown",c),l?.removeEventListener("keyup",d),window.removeEventListener("blur",h)}}},[e,r]),n};function Fc(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(i=>t.has(i)))}function Dc(e,t){return t.includes(e)?"code":"key"}function Mh(e,t,n,r){if(!e.parentNode)return n;const i=t.get(e.parentNode),o=Ht(i,r);return Mh(i,t,{x:(n.x??0)+o.x,y:(n.y??0)+o.y,z:(i[we]?.z??0)>(n.z??0)?i[we]?.z??0:n.z??0},r)}function Th(e,t,n){e.forEach(r=>{if(r.parentNode&&!e.has(r.parentNode))throw new Error(`Parent node ${r.parentNode} not found`);if(r.parentNode||n?.[r.id]){const{x:i,y:o,z:a}=Mh(r,e,{...r.position,z:r[we]?.z??0},t);r.positionAbsolute={x:i,y:o},r[we].z=a,n?.[r.id]&&(r[we].isParent=!0)}})}function Kr(e,t,n,r){const i=new Map,o={},a=r?1e3:0;return e.forEach(s=>{const u=(He(s.zIndex)?s.zIndex:0)+(s.selected?a:0),l=t.get(s.id),c={width:l?.width,height:l?.height,...s,positionAbsolute:{x:s.position.x,y:s.position.y}};s.parentNode&&(c.parentNode=s.parentNode,o[s.parentNode]=!0),Object.defineProperty(c,we,{enumerable:!1,value:{handleBounds:l?.[we]?.handleBounds,z:u}}),i.set(s.id,c)}),Th(i,n,o),i}function kh(e,t={}){const{getNodes:n,width:r,height:i,minZoom:o,maxZoom:a,d3Zoom:s,d3Selection:u,fitViewOnInitDone:l,fitViewOnInit:c,nodeOrigin:d}=e(),h=t.initial&&!l&&c;if(s&&u&&(h||!t.initial)){const g=n().filter(m=>{const v=t.includeHiddenNodes?m.width&&m.height:!m.hidden;return t.nodes?.length?v&&t.nodes.some(b=>b.id===m.id):v}),p=g.every(m=>m.width&&m.height);if(g.length>0&&p){const m=Ar(g,d),{x:v,y:b,zoom:S}=gh(m,r,i,t.minZoom??o,t.maxZoom??a,t.padding??.1),w=dt.translate(v,b).scale(S);return typeof t.duration=="number"&&t.duration>0?s.transform(At(u,t.duration),w):s.transform(u,w),!0}}return!1}function kb(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[we]:r[we],selected:n.selected})}),new Map(t)}function Ab(e,t){return t.map(n=>{const r=e.find(i=>i.id===n.id);return r&&(n.selected=r.selected),n})}function Zn({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:i,edges:o,onNodesChange:a,onEdgesChange:s,hasDefaultNodes:u,hasDefaultEdges:l}=n();e?.length&&(u&&r({nodeInternals:kb(e,i)}),a?.(e)),t?.length&&(l&&r({edges:Ab(t,o)}),s?.(t))}const Zt=()=>{},Rb={zoomIn:Zt,zoomOut:Zt,zoomTo:Zt,getZoom:()=>1,setViewport:Zt,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Zt,fitBounds:Zt,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},qb=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),Lb=()=>{const e=be(),{d3Zoom:t,d3Selection:n}=de(qb,xe);return Fe(()=>n&&t?{zoomIn:i=>t.scaleBy(At(n,i?.duration),1.2),zoomOut:i=>t.scaleBy(At(n,i?.duration),1/1.2),zoomTo:(i,o)=>t.scaleTo(At(n,o?.duration),i),getZoom:()=>e.getState().transform[2],setViewport:(i,o)=>{const[a,s,u]=e.getState().transform,l=dt.translate(i.x??a,i.y??s).scale(i.zoom??u);t.transform(At(n,o?.duration),l)},getViewport:()=>{const[i,o,a]=e.getState().transform;return{x:i,y:o,zoom:a}},fitView:i=>kh(e.getState,i),setCenter:(i,o,a)=>{const{width:s,height:u,maxZoom:l}=e.getState(),c=typeof a?.zoom<"u"?a.zoom:l,d=s/2-i*c,h=u/2-o*c,f=dt.translate(d,h).scale(c);t.transform(At(n,a?.duration),f)},fitBounds:(i,o)=>{const{width:a,height:s,minZoom:u,maxZoom:l}=e.getState(),{x:c,y:d,zoom:h}=gh(i,a,s,u,l,o?.padding??.1),f=dt.translate(c,d).scale(h);t.transform(At(n,o?.duration),f)},project:i=>{const{transform:o,snapToGrid:a,snapGrid:s}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),ns(i,o,a,s)},screenToFlowPosition:i=>{const{transform:o,snapToGrid:a,snapGrid:s,domNode:u}=e.getState();if(!u)return i;const{x:l,y:c}=u.getBoundingClientRect(),d={x:i.x-l,y:i.y-c};return ns(d,o,a,s)},flowToScreenPosition:i=>{const{transform:o,domNode:a}=e.getState();if(!a)return i;const{x:s,y:u}=a.getBoundingClientRect(),l=fh(i,o);return{x:l.x+s,y:l.y+u}},viewportInitialized:!0}:Rb,[t,n])};function Os(){const e=Lb(),t=be(),n=ve(()=>t.getState().getNodes().map(p=>({...p})),[]),r=ve(p=>t.getState().nodeInternals.get(p),[]),i=ve(()=>{const{edges:p=[]}=t.getState();return p.map(m=>({...m}))},[]),o=ve(p=>{const{edges:m=[]}=t.getState();return m.find(v=>v.id===p)},[]),a=ve(p=>{const{getNodes:m,setNodes:v,hasDefaultNodes:b,onNodesChange:S}=t.getState(),w=m(),k=typeof p=="function"?p(w):p;if(b)v(k);else if(S){const M=k.length===0?w.map(L=>({type:"remove",id:L.id})):k.map(L=>({item:L,type:"reset"}));S(M)}},[]),s=ve(p=>{const{edges:m=[],setEdges:v,hasDefaultEdges:b,onEdgesChange:S}=t.getState(),w=typeof p=="function"?p(m):p;if(b)v(w);else if(S){const k=w.length===0?m.map(M=>({type:"remove",id:M.id})):w.map(M=>({item:M,type:"reset"}));S(k)}},[]),u=ve(p=>{const m=Array.isArray(p)?p:[p],{getNodes:v,setNodes:b,hasDefaultNodes:S,onNodesChange:w}=t.getState();if(S){const M=[...v(),...m];b(M)}else if(w){const k=m.map(M=>({item:M,type:"add"}));w(k)}},[]),l=ve(p=>{const m=Array.isArray(p)?p:[p],{edges:v=[],setEdges:b,hasDefaultEdges:S,onEdgesChange:w}=t.getState();if(S)b([...v,...m]);else if(w){const k=m.map(M=>({item:M,type:"add"}));w(k)}},[]),c=ve(()=>{const{getNodes:p,edges:m=[],transform:v}=t.getState(),[b,S,w]=v;return{nodes:p().map(k=>({...k})),edges:m.map(k=>({...k})),viewport:{x:b,y:S,zoom:w}}},[]),d=ve(({nodes:p,edges:m})=>{const{nodeInternals:v,getNodes:b,edges:S,hasDefaultNodes:w,hasDefaultEdges:k,onNodesDelete:M,onEdgesDelete:L,onNodesChange:$,onEdgesChange:A}=t.getState(),D=(p||[]).map(I=>I.id),F=(m||[]).map(I=>I.id),O=b().reduce((I,_)=>{const R=!D.includes(_.id)&&_.parentNode&&I.find(E=>E.id===_.parentNode);return(typeof _.deletable=="boolean"?_.deletable:!0)&&(D.includes(_.id)||R)&&I.push(_),I},[]),C=S.filter(I=>typeof I.deletable=="boolean"?I.deletable:!0),y=C.filter(I=>F.includes(I.id));if(O||y){const I=ph(O,C),_=[...y,...I],R=_.reduce((P,E)=>(P.includes(E.id)||P.push(E.id),P),[]);if((k||w)&&(k&&t.setState({edges:S.filter(P=>!R.includes(P.id))}),w&&(O.forEach(P=>{v.delete(P.id)}),t.setState({nodeInternals:new Map(v)}))),R.length>0&&(L?.(_),A&&A(R.map(P=>({id:P,type:"remove"})))),O.length>0&&(M?.(O),$)){const P=O.map(E=>({id:E.id,type:"remove"}));$(P)}}},[]),h=ve(p=>{const m=Jw(p),v=m?null:t.getState().nodeInternals.get(p.id);return[m?p:Tc(v),v,m]},[]),f=ve((p,m=!0,v)=>{const[b,S,w]=h(p);return b?(v||t.getState().getNodes()).filter(k=>{if(!w&&(k.id===S.id||!k.positionAbsolute))return!1;const M=Tc(k),L=Qa(M,b);return m&&L>0||L>=b.width*b.height}):[]},[]),g=ve((p,m,v=!0)=>{const[b]=h(p);if(!b)return!1;const S=Qa(b,m);return v&&S>0||S>=b.width*b.height},[]);return Fe(()=>({...e,getNodes:n,getNode:r,getEdges:i,getEdge:o,setNodes:a,setEdges:s,addNodes:u,addEdges:l,toObject:c,deleteElements:d,getIntersectingNodes:f,isNodeIntersecting:g}),[e,n,r,i,o,a,s,u,l,c,d,f,g])}const $b={actInsideInputWithModifier:!1};var Pb=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=be(),{deleteElements:r}=Os(),i=In(e,$b),o=In(t);ue(()=>{if(i){const{edges:a,getNodes:s}=n.getState(),u=s().filter(c=>c.selected),l=a.filter(c=>c.selected);r({nodes:u,edges:l}),n.setState({nodesSelectionActive:!1})}},[i]),ue(()=>{n.setState({multiSelectionActive:o})},[o])};function Fb(e){const t=be();ue(()=>{let n;const r=()=>{if(!e.current)return;const i=ks(e.current);(i.height===0||i.width===0)&&t.getState().onError?.("004",pt.error004()),t.setState({width:i.width||500,height:i.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const zs={position:"absolute",width:"100%",height:"100%",top:0,left:0},Db=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Xn=e=>({x:e.x,y:e.y,zoom:e.k}),Xt=(e,t)=>e.target.closest(`.${t}`),Oc=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),zc=e=>{const t=e.ctrlKey&&fr()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},Ob=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),zb=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:i=!0,zoomOnPinch:o=!0,panOnScroll:a=!1,panOnScrollSpeed:s=.5,panOnScrollMode:u=Pt.Free,zoomOnDoubleClick:l=!0,elementsSelectable:c,panOnDrag:d=!0,defaultViewport:h,translateExtent:f,minZoom:g,maxZoom:p,zoomActivationKeyCode:m,preventScrolling:v=!0,children:b,noWheelClassName:S,noPanClassName:w})=>{const k=te(),M=be(),L=te(!1),$=te(!1),A=te(null),D=te({x:0,y:0,zoom:0}),{d3Zoom:F,d3Selection:O,d3ZoomHandler:C,userSelectionActive:y}=de(Ob,xe),I=In(m),_=te(0),R=te(!1),P=te();return Fb(A),ue(()=>{if(A.current){const E=A.current.getBoundingClientRect(),T=th().scaleExtent([g,p]).translateExtent(f),q=ze(A.current).call(T),z=dt.translate(h.x,h.y).scale(an(h.zoom,g,p)),U=[[0,0],[E.width,E.height]],G=T.constrain()(z,U,f);T.transform(q,G),T.wheelDelta(zc),M.setState({d3Zoom:T,d3Selection:q,d3ZoomHandler:q.on("wheel.zoom"),transform:[G.x,G.y,G.k],domNode:A.current.closest(".react-flow")})}},[]),ue(()=>{O&&F&&(a&&!I&&!y?O.on("wheel.zoom",E=>{if(Xt(E,S))return!1;E.preventDefault(),E.stopImmediatePropagation();const T=O.property("__zoom").k||1,q=fr();if(E.ctrlKey&&o&&q){const V=Ye(E),Z=zc(E),ae=T*Math.pow(2,Z);F.scaleTo(O,ae,V,E);return}const z=E.deltaMode===1?20:1;let U=u===Pt.Vertical?0:E.deltaX*z,G=u===Pt.Horizontal?0:E.deltaY*z;!q&&E.shiftKey&&u!==Pt.Vertical&&(U=E.deltaY*z,G=0),F.translateBy(O,-(U/T)*s,-(G/T)*s,{internal:!0});const X=Xn(O.property("__zoom")),{onViewportChangeStart:Q,onViewportChange:ne,onViewportChangeEnd:B}=M.getState();clearTimeout(P.current),R.current||(R.current=!0,t?.(E,X),Q?.(X)),R.current&&(e?.(E,X),ne?.(X),P.current=setTimeout(()=>{n?.(E,X),B?.(X),R.current=!1},150))},{passive:!1}):typeof C<"u"&&O.on("wheel.zoom",function(E,T){if(!v||Xt(E,S))return null;E.preventDefault(),C.call(this,E,T)},{passive:!1}))},[y,a,u,O,F,C,I,o,v,S,t,e,n]),ue(()=>{F&&F.on("start",E=>{if(!E.sourceEvent||E.sourceEvent.internal)return null;_.current=E.sourceEvent?.button;const{onViewportChangeStart:T}=M.getState(),q=Xn(E.transform);L.current=!0,D.current=q,E.sourceEvent?.type==="mousedown"&&M.setState({paneDragging:!0}),T?.(q),t?.(E.sourceEvent,q)})},[F,t]),ue(()=>{F&&(y&&!L.current?F.on("zoom",null):y||F.on("zoom",E=>{const{onViewportChange:T}=M.getState();if(M.setState({transform:[E.transform.x,E.transform.y,E.transform.k]}),$.current=!!(r&&Oc(d,_.current??0)),(e||T)&&!E.sourceEvent?.internal){const q=Xn(E.transform);T?.(q),e?.(E.sourceEvent,q)}}))},[y,F,e,d,r]),ue(()=>{F&&F.on("end",E=>{if(!E.sourceEvent||E.sourceEvent.internal)return null;const{onViewportChangeEnd:T}=M.getState();if(L.current=!1,M.setState({paneDragging:!1}),r&&Oc(d,_.current??0)&&!$.current&&r(E.sourceEvent),$.current=!1,(n||T)&&Db(D.current,E.transform)){const q=Xn(E.transform);D.current=q,clearTimeout(k.current),k.current=setTimeout(()=>{T?.(q),n?.(E.sourceEvent,q)},a?150:0)}})},[F,a,d,n,r]),ue(()=>{F&&F.filter(E=>{const T=I||i,q=o&&E.ctrlKey;if((d===!0||Array.isArray(d)&&d.includes(1))&&E.button===1&&E.type==="mousedown"&&(Xt(E,"react-flow__node")||Xt(E,"react-flow__edge")))return!0;if(!d&&!T&&!a&&!l&&!o||y||!l&&E.type==="dblclick"||Xt(E,S)&&E.type==="wheel"||Xt(E,w)&&(E.type!=="wheel"||a&&E.type==="wheel"&&!I)||!o&&E.ctrlKey&&E.type==="wheel"||!T&&!a&&!q&&E.type==="wheel"||!d&&(E.type==="mousedown"||E.type==="touchstart")||Array.isArray(d)&&!d.includes(E.button)&&(E.type==="mousedown"||E.type==="touchstart"))return!1;const z=Array.isArray(d)&&d.includes(E.button)||!E.button||E.button<=1;return(!E.ctrlKey||E.type==="wheel")&&z})},[y,F,i,o,a,l,d,c,I]),N.createElement("div",{className:"react-flow__renderer",ref:A,style:zs},b)},Hb=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Bb(){const{userSelectionActive:e,userSelectionRect:t}=de(Hb,xe);return e&&t?N.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function Hc(e,t){const n=e.find(r=>r.id===t.parentNode);if(n){const r=t.position.x+t.width-n.width,i=t.position.y+t.height-n.height;if(r>0||i>0||t.position.x<0||t.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,r>0&&(n.style.width+=r),i>0&&(n.style.height+=i),t.position.x<0){const o=Math.abs(t.position.x);n.position.x=n.position.x-o,n.style.width+=o,t.position.x=0}if(t.position.y<0){const o=Math.abs(t.position.y);n.position.y=n.position.y-o,n.style.height+=o,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function Ah(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,i)=>{const o=e.filter(s=>s.id===i.id);if(o.length===0)return r.push(i),r;const a={...i};for(const s of o)if(s)switch(s.type){case"select":{a.selected=s.selected;break}case"position":{typeof s.position<"u"&&(a.position=s.position),typeof s.positionAbsolute<"u"&&(a.positionAbsolute=s.positionAbsolute),typeof s.dragging<"u"&&(a.dragging=s.dragging),a.expandParent&&Hc(r,a);break}case"dimensions":{typeof s.dimensions<"u"&&(a.width=s.dimensions.width,a.height=s.dimensions.height),typeof s.updateStyle<"u"&&(a.style={...a.style||{},...s.dimensions}),typeof s.resizing=="boolean"&&(a.resizing=s.resizing),a.expandParent&&Hc(r,a);break}case"remove":return r}return r.push(a),r},n)}function Rh(e,t){return Ah(e,t)}function Vb(e,t){return Ah(e,t)}const _t=(e,t)=>({id:e,type:"select",selected:t});function jt(e,t){return e.reduce((n,r)=>{const i=t.includes(r.id);return!r.selected&&i?(r.selected=!0,n.push(_t(r.id,!0))):r.selected&&!i&&(r.selected=!1,n.push(_t(r.id,!1))),n},[])}const jr=(e,t)=>n=>{n.target===t.current&&e?.(n)},Gb=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),qh=le(({isSelecting:e,selectionMode:t=Cn.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:i,onPaneClick:o,onPaneContextMenu:a,onPaneScroll:s,onPaneMouseEnter:u,onPaneMouseMove:l,onPaneMouseLeave:c,children:d})=>{const h=te(null),f=be(),g=te(0),p=te(0),m=te(),{userSelectionActive:v,elementsSelectable:b,dragging:S}=de(Gb,xe),w=()=>{f.setState({userSelectionActive:!1,userSelectionRect:null}),g.current=0,p.current=0},k=C=>{o?.(C),f.getState().resetSelectedElements(),f.setState({nodesSelectionActive:!1})},M=C=>{if(Array.isArray(n)&&n?.includes(2)){C.preventDefault();return}a?.(C)},L=s?C=>s(C):void 0,$=C=>{const{resetSelectedElements:y,domNode:I}=f.getState();if(m.current=I?.getBoundingClientRect(),!b||!e||C.button!==0||C.target!==h.current||!m.current)return;const{x:_,y:R}=Nt(C,m.current);y(),f.setState({userSelectionRect:{width:0,height:0,startX:_,startY:R,x:_,y:R}}),r?.(C)},A=C=>{const{userSelectionRect:y,nodeInternals:I,edges:_,transform:R,onNodesChange:P,onEdgesChange:E,nodeOrigin:T,getNodes:q}=f.getState();if(!e||!m.current||!y)return;f.setState({userSelectionActive:!0,nodesSelectionActive:!1});const z=Nt(C,m.current),U=y.startX??0,G=y.startY??0,X={...y,x:z.x<U?z.x:U,y:z.y<G?z.y:G,width:Math.abs(z.x-U),height:Math.abs(z.y-G)},Q=q(),ne=hh(I,X,R,t===Cn.Partial,!0,T),B=ph(ne,_).map(Z=>Z.id),V=ne.map(Z=>Z.id);if(g.current!==V.length){g.current=V.length;const Z=jt(Q,V);Z.length&&P?.(Z)}if(p.current!==B.length){p.current=B.length;const Z=jt(_,B);Z.length&&E?.(Z)}f.setState({userSelectionRect:X})},D=C=>{if(C.button!==0)return;const{userSelectionRect:y}=f.getState();!v&&y&&C.target===h.current&&k?.(C),f.setState({nodesSelectionActive:g.current>0}),w(),i?.(C)},F=C=>{v&&(f.setState({nodesSelectionActive:g.current>0}),i?.(C)),w()},O=b&&(e||v);return N.createElement("div",{className:Ee(["react-flow__pane",{dragging:S,selection:e}]),onClick:O?void 0:jr(k,h),onContextMenu:jr(M,h),onWheel:jr(L,h),onMouseEnter:O?void 0:u,onMouseDown:O?$:void 0,onMouseMove:O?A:l,onMouseUp:O?D:void 0,onMouseLeave:O?F:c,ref:h,style:zs},d,N.createElement(Bb,null))});qh.displayName="Pane";function Lh(e,t){if(!e.parentNode)return!1;const n=t.get(e.parentNode);return n?n.selected?!0:Lh(n,t):!1}function Bc(e,t,n){let r=e;do{if(r?.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function Ub(e,t,n,r){return Array.from(e.values()).filter(i=>(i.selected||i.id===r)&&(!i.parentNode||!Lh(i,e))&&(i.draggable||t&&typeof i.draggable>"u")).map(i=>({id:i.id,position:i.position||{x:0,y:0},positionAbsolute:i.positionAbsolute||{x:0,y:0},distance:{x:n.x-(i.positionAbsolute?.x??0),y:n.y-(i.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:i.extent,parentNode:i.parentNode,width:i.width,height:i.height,expandParent:i.expandParent}))}function Yb(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function $h(e,t,n,r,i=[0,0],o){const a=Yb(e,e.extent||r);let s=a;if(e.extent==="parent"&&!e.expandParent)if(e.parentNode&&e.width&&e.height){const c=n.get(e.parentNode),{x:d,y:h}=Ht(c,i).positionAbsolute;s=c&&He(d)&&He(h)&&He(c.width)&&He(c.height)?[[d+e.width*i[0],h+e.height*i[1]],[d+c.width-e.width+e.width*i[0],h+c.height-e.height+e.height*i[1]]]:s}else o?.("005",pt.error005()),s=a;else if(e.extent&&e.parentNode&&e.extent!=="parent"){const c=n.get(e.parentNode),{x:d,y:h}=Ht(c,i).positionAbsolute;s=[[e.extent[0][0]+d,e.extent[0][1]+h],[e.extent[1][0]+d,e.extent[1][1]+h]]}let u={x:0,y:0};if(e.parentNode){const c=n.get(e.parentNode);u=Ht(c,i).positionAbsolute}const l=s&&s!=="parent"?As(t,s):t;return{position:{x:l.x-u.x,y:l.y-u.y},positionAbsolute:l}}function Qr({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(i=>({...n.get(i.id),position:i.position,positionAbsolute:i.positionAbsolute}));return[e?r.find(i=>i.id===e):r[0],r]}const Vc=(e,t,n,r)=>{const i=t.querySelectorAll(e);if(!i||!i.length)return null;const o=Array.from(i),a=t.getBoundingClientRect(),s={x:a.width*r[0],y:a.height*r[1]};return o.map(u=>{const l=u.getBoundingClientRect();return{id:u.getAttribute("data-handleid"),position:u.getAttribute("data-handlepos"),x:(l.left-a.left-s.x)/n,y:(l.top-a.top-s.y)/n,...ks(u)}})};function fn(e,t,n){return n===void 0?n:r=>{const i=t().nodeInternals.get(e);i&&n(r,{...i})}}function is({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:o,multiSelectionActive:a,nodeInternals:s,onError:u}=t.getState(),l=s.get(e);if(!l){u?.("012",pt.error012(e));return}t.setState({nodesSelectionActive:!1}),l.selected?(n||l.selected&&a)&&(o({nodes:[l],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):i([e])}function Wb(){const e=be();return ve(({sourceEvent:n})=>{const{transform:r,snapGrid:i,snapToGrid:o}=e.getState(),a=n.touches?n.touches[0].clientX:n.clientX,s=n.touches?n.touches[0].clientY:n.clientY,u={x:(a-r[0])/r[2],y:(s-r[1])/r[2]};return{xSnapped:o?i[0]*Math.round(u.x/i[0]):u.x,ySnapped:o?i[1]*Math.round(u.y/i[1]):u.y,...u}},[])}function Jr(e){return(t,n,r)=>e?.(t,r)}function Ph({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:o,selectNodesOnDrag:a}){const s=be(),[u,l]=ie(!1),c=te([]),d=te({x:null,y:null}),h=te(0),f=te(null),g=te({x:0,y:0}),p=te(null),m=te(!1),v=te(!1),b=Wb();return ue(()=>{if(e?.current){const S=ze(e.current),w=({x:L,y:$})=>{const{nodeInternals:A,onNodeDrag:D,onSelectionDrag:F,updateNodePositions:O,nodeExtent:C,snapGrid:y,snapToGrid:I,nodeOrigin:_,onError:R}=s.getState();d.current={x:L,y:$};let P=!1,E={x:0,y:0,x2:0,y2:0};if(c.current.length>1&&C){const q=Ar(c.current,_);E=Nn(q)}if(c.current=c.current.map(q=>{const z={x:L-q.distance.x,y:$-q.distance.y};I&&(z.x=y[0]*Math.round(z.x/y[0]),z.y=y[1]*Math.round(z.y/y[1]));const U=[[C[0][0],C[0][1]],[C[1][0],C[1][1]]];c.current.length>1&&C&&!q.extent&&(U[0][0]=q.positionAbsolute.x-E.x+C[0][0],U[1][0]=q.positionAbsolute.x+(q.width??0)-E.x2+C[1][0],U[0][1]=q.positionAbsolute.y-E.y+C[0][1],U[1][1]=q.positionAbsolute.y+(q.height??0)-E.y2+C[1][1]);const G=$h(q,z,A,U,_,R);return P=P||q.position.x!==G.position.x||q.position.y!==G.position.y,q.position=G.position,q.positionAbsolute=G.positionAbsolute,q}),!P)return;O(c.current,!0,!0),l(!0);const T=i?D:Jr(F);if(T&&p.current){const[q,z]=Qr({nodeId:i,dragItems:c.current,nodeInternals:A});T(p.current,q,z)}},k=()=>{if(!f.current)return;const[L,$]=rh(g.current,f.current);if(L!==0||$!==0){const{transform:A,panBy:D}=s.getState();d.current.x=(d.current.x??0)-L/A[2],d.current.y=(d.current.y??0)-$/A[2],D({x:L,y:$})&&w(d.current)}h.current=requestAnimationFrame(k)},M=L=>{const{nodeInternals:$,multiSelectionActive:A,nodesDraggable:D,unselectNodesAndEdges:F,onNodeDragStart:O,onSelectionDragStart:C}=s.getState();v.current=!0;const y=i?O:Jr(C);(!a||!o)&&!A&&i&&($.get(i)?.selected||F()),i&&o&&a&&is({id:i,store:s,nodeRef:e});const I=b(L);if(d.current=I,c.current=Ub($,D,I,i),y&&c.current){const[_,R]=Qr({nodeId:i,dragItems:c.current,nodeInternals:$});y(L.sourceEvent,_,R)}};if(t)S.on(".drag",null);else{const L=ry().on("start",$=>{const{domNode:A,nodeDragThreshold:D}=s.getState();D===0&&M($);const F=b($);d.current=F,f.current=A?.getBoundingClientRect()||null,g.current=Nt($.sourceEvent,f.current)}).on("drag",$=>{const A=b($),{autoPanOnNodeDrag:D,nodeDragThreshold:F}=s.getState();if(!m.current&&v.current&&D&&(m.current=!0,k()),!v.current){const O=A.xSnapped-(d?.current?.x??0),C=A.ySnapped-(d?.current?.y??0);Math.sqrt(O*O+C*C)>F&&M($)}(d.current.x!==A.xSnapped||d.current.y!==A.ySnapped)&&c.current&&v.current&&(p.current=$.sourceEvent,g.current=Nt($.sourceEvent,f.current),w(A))}).on("end",$=>{if(v.current&&(l(!1),m.current=!1,v.current=!1,cancelAnimationFrame(h.current),c.current)){const{updateNodePositions:A,nodeInternals:D,onNodeDragStop:F,onSelectionDragStop:O}=s.getState(),C=i?F:Jr(O);if(A(c.current,!1,!1),C){const[y,I]=Qr({nodeId:i,dragItems:c.current,nodeInternals:D});C($.sourceEvent,y,I)}}}).filter($=>{const A=$.target;return!$.button&&(!n||!Bc(A,`.${n}`,e))&&(!r||Bc(A,r,e))});return S.call(L),()=>{S.on(".drag",null)}}}},[e,t,n,r,o,s,i,a,b]),u}function Fh(){const e=be();return ve(n=>{const{nodeInternals:r,nodeExtent:i,updateNodePositions:o,getNodes:a,snapToGrid:s,snapGrid:u,onError:l,nodesDraggable:c}=e.getState(),d=a().filter(b=>b.selected&&(b.draggable||c&&typeof b.draggable>"u")),h=s?u[0]:5,f=s?u[1]:5,g=n.isShiftPressed?4:1,p=n.x*h*g,m=n.y*f*g,v=d.map(b=>{if(b.positionAbsolute){const S={x:b.positionAbsolute.x+p,y:b.positionAbsolute.y+m};s&&(S.x=u[0]*Math.round(S.x/u[0]),S.y=u[1]*Math.round(S.y/u[1]));const{positionAbsolute:w,position:k}=$h(b,S,r,i,void 0,l);b.position=k,b.positionAbsolute=w}return b});o(v,!0,!1)},[])}const tn={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var hn=e=>{const t=({id:n,type:r,data:i,xPos:o,yPos:a,xPosOrigin:s,yPosOrigin:u,selected:l,onClick:c,onMouseEnter:d,onMouseMove:h,onMouseLeave:f,onContextMenu:g,onDoubleClick:p,style:m,className:v,isDraggable:b,isSelectable:S,isConnectable:w,isFocusable:k,selectNodesOnDrag:M,sourcePosition:L,targetPosition:$,hidden:A,resizeObserver:D,dragHandle:F,zIndex:O,isParent:C,noDragClassName:y,noPanClassName:I,initialized:_,disableKeyboardA11y:R,ariaLabel:P,rfId:E})=>{const T=be(),q=te(null),z=te(L),U=te($),G=te(r),X=S||b||c||d||h||f,Q=Fh(),ne=fn(n,T.getState,d),B=fn(n,T.getState,h),V=fn(n,T.getState,f),Z=fn(n,T.getState,g),ae=fn(n,T.getState,p),oe=W=>{const{nodeDragThreshold:pe}=T.getState();if(S&&(!M||!b||pe>0)&&is({id:n,store:T,nodeRef:q}),c){const K=T.getState().nodeInternals.get(n);K&&c(W,{...K})}},me=W=>{if(!Ja(W))if(sh.includes(W.key)&&S){const pe=W.key==="Escape";is({id:n,store:T,unselect:pe,nodeRef:q})}else!R&&b&&l&&Object.prototype.hasOwnProperty.call(tn,W.key)&&(T.setState({ariaLiveMessage:`Moved selected node ${W.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~o}, y: ${~~a}`}),Q({x:tn[W.key].x,y:tn[W.key].y,isShiftPressed:W.shiftKey}))};ue(()=>{if(q.current&&!A){const W=q.current;return D?.observe(W),()=>D?.unobserve(W)}},[A]),ue(()=>{const W=G.current!==r,pe=z.current!==L,K=U.current!==$;q.current&&(W||pe||K)&&(W&&(G.current=r),pe&&(z.current=L),K&&(U.current=$),T.getState().updateNodeDimensions([{id:n,nodeElement:q.current,forceUpdate:!0}]))},[n,r,L,$]);const ce=Ph({nodeRef:q,disabled:A||!b,noDragClassName:y,handleSelector:F,nodeId:n,isSelectable:S,selectNodesOnDrag:M});return A?null:N.createElement("div",{className:Ee(["react-flow__node",`react-flow__node-${r}`,{[I]:b},v,{selected:l,selectable:S,parent:C,dragging:ce}]),ref:q,style:{zIndex:O,transform:`translate(${s}px,${u}px)`,pointerEvents:X?"all":"none",visibility:_?"visible":"hidden",...m},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:ne,onMouseMove:B,onMouseLeave:V,onContextMenu:Z,onClick:oe,onDoubleClick:ae,onKeyDown:k?me:void 0,tabIndex:k?0:void 0,role:k?"button":void 0,"aria-describedby":R?void 0:`${Ch}-${E}`,"aria-label":P},N.createElement(sb,{value:n},N.createElement(e,{id:n,data:i,type:r,xPos:o,yPos:a,selected:l,isConnectable:w,sourcePosition:L,targetPosition:$,dragging:ce,dragHandle:F,zIndex:O})))};return t.displayName="NodeWrapper",le(t)};const Zb=e=>{const t=e.getNodes().filter(n=>n.selected);return{...Ar(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function Xb({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=be(),{width:i,height:o,x:a,y:s,transformString:u,userSelectionActive:l}=de(Zb,xe),c=Fh(),d=te(null);if(ue(()=>{n||d.current?.focus({preventScroll:!0})},[n]),Ph({nodeRef:d}),l||!i||!o)return null;const h=e?g=>{const p=r.getState().getNodes().filter(m=>m.selected);e(g,p)}:void 0,f=g=>{Object.prototype.hasOwnProperty.call(tn,g.key)&&c({x:tn[g.key].x,y:tn[g.key].y,isShiftPressed:g.shiftKey})};return N.createElement("div",{className:Ee(["react-flow__nodesselection","react-flow__container",t]),style:{transform:u}},N.createElement("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:n?void 0:-1,onKeyDown:n?void 0:f,style:{width:i,height:o,top:s,left:a}}))}var Kb=le(Xb);const jb=e=>e.nodesSelectionActive,Dh=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:o,onPaneScroll:a,deleteKeyCode:s,onMove:u,onMoveStart:l,onMoveEnd:c,selectionKeyCode:d,selectionOnDrag:h,selectionMode:f,onSelectionStart:g,onSelectionEnd:p,multiSelectionKeyCode:m,panActivationKeyCode:v,zoomActivationKeyCode:b,elementsSelectable:S,zoomOnScroll:w,zoomOnPinch:k,panOnScroll:M,panOnScrollSpeed:L,panOnScrollMode:$,zoomOnDoubleClick:A,panOnDrag:D,defaultViewport:F,translateExtent:O,minZoom:C,maxZoom:y,preventScrolling:I,onSelectionContextMenu:_,noWheelClassName:R,noPanClassName:P,disableKeyboardA11y:E})=>{const T=de(jb),q=In(d),z=In(v),U=z||D,G=z||M,X=q||h&&U!==!0;return Pb({deleteKeyCode:s,multiSelectionKeyCode:m}),N.createElement(zb,{onMove:u,onMoveStart:l,onMoveEnd:c,onPaneContextMenu:o,elementsSelectable:S,zoomOnScroll:w,zoomOnPinch:k,panOnScroll:G,panOnScrollSpeed:L,panOnScrollMode:$,zoomOnDoubleClick:A,panOnDrag:!q&&U,defaultViewport:F,translateExtent:O,minZoom:C,maxZoom:y,zoomActivationKeyCode:b,preventScrolling:I,noWheelClassName:R,noPanClassName:P},N.createElement(qh,{onSelectionStart:g,onSelectionEnd:p,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:o,onPaneScroll:a,panOnDrag:U,isSelecting:!!X,selectionMode:f},e,T&&N.createElement(Kb,{onSelectionContextMenu:_,noPanClassName:P,disableKeyboardA11y:E})))};Dh.displayName="FlowRenderer";var Qb=le(Dh);function Jb(e){return de(ve(n=>e?hh(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function e1(e){const t={input:hn(e.input||xh),default:hn(e.default||rs),output:hn(e.output||Sh),group:hn(e.group||Ds)},n={},r=Object.keys(e).filter(i=>!["input","default","output","group"].includes(i)).reduce((i,o)=>(i[o]=hn(e[o]||rs),i),n);return{...t,...r}}const t1=({x:e,y:t,width:n,height:r,origin:i})=>!n||!r?{x:e,y:t}:i[0]<0||i[1]<0||i[0]>1||i[1]>1?{x:e,y:t}:{x:e-n*i[0],y:t-r*i[1]},n1=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),Oh=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,updateNodeDimensions:o,onError:a}=de(n1,xe),s=Jb(e.onlyRenderVisibleElements),u=te(),l=Fe(()=>{if(typeof ResizeObserver>"u")return null;const c=new ResizeObserver(d=>{const h=d.map(f=>({id:f.target.getAttribute("data-id"),nodeElement:f.target,forceUpdate:!0}));o(h)});return u.current=c,c},[]);return ue(()=>()=>{u?.current?.disconnect()},[]),N.createElement("div",{className:"react-flow__nodes",style:zs},s.map(c=>{let d=c.type||"default";e.nodeTypes[d]||(a?.("003",pt.error003(d)),d="default");const h=e.nodeTypes[d]||e.nodeTypes.default,f=!!(c.draggable||t&&typeof c.draggable>"u"),g=!!(c.selectable||i&&typeof c.selectable>"u"),p=!!(c.connectable||n&&typeof c.connectable>"u"),m=!!(c.focusable||r&&typeof c.focusable>"u"),v=e.nodeExtent?As(c.positionAbsolute,e.nodeExtent):c.positionAbsolute,b=v?.x??0,S=v?.y??0,w=t1({x:b,y:S,width:c.width??0,height:c.height??0,origin:e.nodeOrigin});return N.createElement(h,{key:c.id,id:c.id,className:c.className,style:c.style,type:d,data:c.data,sourcePosition:c.sourcePosition||H.Bottom,targetPosition:c.targetPosition||H.Top,hidden:c.hidden,xPos:b,yPos:S,xPosOrigin:w.x,yPosOrigin:w.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!c.selected,isDraggable:f,isSelectable:g,isConnectable:p,isFocusable:m,resizeObserver:l,dragHandle:c.dragHandle,zIndex:c[we]?.z??0,isParent:!!c[we]?.isParent,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!c.width&&!!c.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:c.ariaLabel})}))};Oh.displayName="NodeRenderer";var r1=le(Oh);const i1=(e,t,n)=>n===H.Left?e-t:n===H.Right?e+t:e,o1=(e,t,n)=>n===H.Top?e-t:n===H.Bottom?e+t:e,Gc="react-flow__edgeupdater",Uc=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:o,onMouseOut:a,type:s})=>N.createElement("circle",{onMouseDown:i,onMouseEnter:o,onMouseOut:a,className:Ee([Gc,`${Gc}-${s}`]),cx:i1(t,r,e),cy:o1(n,r,e),r,stroke:"transparent",fill:"transparent"}),a1=()=>!0;var Kt=e=>{const t=({id:n,className:r,type:i,data:o,onClick:a,onEdgeDoubleClick:s,selected:u,animated:l,label:c,labelStyle:d,labelShowBg:h,labelBgStyle:f,labelBgPadding:g,labelBgBorderRadius:p,style:m,source:v,target:b,sourceX:S,sourceY:w,targetX:k,targetY:M,sourcePosition:L,targetPosition:$,elementsSelectable:A,hidden:D,sourceHandleId:F,targetHandleId:O,onContextMenu:C,onMouseEnter:y,onMouseMove:I,onMouseLeave:_,edgeUpdaterRadius:R,onEdgeUpdate:P,onEdgeUpdateStart:E,onEdgeUpdateEnd:T,markerEnd:q,markerStart:z,rfId:U,ariaLabel:G,isFocusable:X,isUpdatable:Q,pathOptions:ne,interactionWidth:B})=>{const V=te(null),[Z,ae]=ie(!1),[oe,me]=ie(!1),ce=be(),W=Fe(()=>`url(#${ts(z,U)})`,[z,U]),pe=Fe(()=>`url(#${ts(q,U)})`,[q,U]);if(D)return null;const K=ye=>{const{edges:ke,addSelectedEdges:et,unselectNodesAndEdges:Ne,multiSelectionActive:Ae}=ce.getState(),tt=ke.find(Tt=>Tt.id===n);tt&&(A&&(ce.setState({nodesSelectionActive:!1}),tt.selected&&Ae?(Ne({nodes:[],edges:[tt]}),V.current?.blur()):et([n])),a&&a(ye,tt))},Y=dn(n,ce.getState,s),Se=dn(n,ce.getState,C),Ge=dn(n,ce.getState,y),je=dn(n,ce.getState,I),Te=dn(n,ce.getState,_),ge=(ye,ke)=>{if(ye.button!==0)return;const{edges:et,isValidConnection:Ne}=ce.getState(),Ae=ke?b:v,tt=(ke?O:F)||null,Tt=ke?"target":"source",Dr=Ne||a1,Or=ke,cn=et.find(kt=>kt.id===n);me(!0),E?.(ye,cn,Tt);const zr=kt=>{me(!1),T?.(kt,cn,Tt)};yh({event:ye,handleId:tt,nodeId:Ae,onConnect:kt=>P?.(cn,kt),isTarget:Or,getState:ce.getState,setState:ce.setState,isValidConnection:Dr,edgeUpdaterType:Tt,onEdgeUpdateEnd:zr})},Le=ye=>ge(ye,!0),Ue=ye=>ge(ye,!1),Qe=()=>ae(!0),Je=()=>ae(!1),Oe=!A&&!a,ot=ye=>{if(sh.includes(ye.key)&&A){const{unselectNodesAndEdges:ke,addSelectedEdges:et,edges:Ne}=ce.getState();ye.key==="Escape"?(V.current?.blur(),ke({edges:[Ne.find(tt=>tt.id===n)]})):et([n])}};return N.createElement("g",{className:Ee(["react-flow__edge",`react-flow__edge-${i}`,r,{selected:u,animated:l,inactive:Oe,updating:Z}]),onClick:K,onDoubleClick:Y,onContextMenu:Se,onMouseEnter:Ge,onMouseMove:je,onMouseLeave:Te,onKeyDown:X?ot:void 0,tabIndex:X?0:void 0,role:X?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":G===null?void 0:G||`Edge from ${v} to ${b}`,"aria-describedby":X?`${Ih}-${U}`:void 0,ref:V},!oe&&N.createElement(e,{id:n,source:v,target:b,selected:u,animated:l,label:c,labelStyle:d,labelShowBg:h,labelBgStyle:f,labelBgPadding:g,labelBgBorderRadius:p,data:o,style:m,sourceX:S,sourceY:w,targetX:k,targetY:M,sourcePosition:L,targetPosition:$,sourceHandleId:F,targetHandleId:O,markerStart:W,markerEnd:pe,pathOptions:ne,interactionWidth:B}),Q&&N.createElement(N.Fragment,null,(Q==="source"||Q===!0)&&N.createElement(Uc,{position:L,centerX:S,centerY:w,radius:R,onMouseDown:Le,onMouseEnter:Qe,onMouseOut:Je,type:"source"}),(Q==="target"||Q===!0)&&N.createElement(Uc,{position:$,centerX:k,centerY:M,radius:R,onMouseDown:Ue,onMouseEnter:Qe,onMouseOut:Je,type:"target"})))};return t.displayName="EdgeWrapper",le(t)};function s1(e){const t={default:Kt(e.default||pr),straight:Kt(e.bezier||Ls),step:Kt(e.step||qs),smoothstep:Kt(e.step||kr),simplebezier:Kt(e.simplebezier||Rs)},n={},r=Object.keys(e).filter(i=>!["default","bezier"].includes(i)).reduce((i,o)=>(i[o]=Kt(e[o]||pr),i),n);return{...t,...r}}function Yc(e,t,n=null){const r=(n?.x||0)+t.x,i=(n?.y||0)+t.y,o=n?.width||t.width,a=n?.height||t.height;switch(e){case H.Top:return{x:r+o/2,y:i};case H.Right:return{x:r+o,y:i+a/2};case H.Bottom:return{x:r+o/2,y:i+a};case H.Left:return{x:r,y:i+a/2}}}function Wc(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const c1=(e,t,n,r,i,o)=>{const a=Yc(n,e,t),s=Yc(o,r,i);return{sourceX:a.x,sourceY:a.y,targetX:s.x,targetY:s.y}};function u1({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:i,targetHeight:o,width:a,height:s,transform:u}){const l={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+r,t.y+o)};l.x===l.x2&&(l.x2+=1),l.y===l.y2&&(l.y2+=1);const c=Nn({x:(0-u[0])/u[2],y:(0-u[1])/u[2],width:a/u[2],height:s/u[2]}),d=Math.max(0,Math.min(c.x2,l.x2)-Math.max(c.x,l.x)),h=Math.max(0,Math.min(c.y2,l.y2)-Math.max(c.y,l.y));return Math.ceil(d*h)>0}function Zc(e){const t=e?.[we]?.handleBounds||null,n=t&&e?.width&&e?.height&&typeof e?.positionAbsolute?.x<"u"&&typeof e?.positionAbsolute?.y<"u";return[{x:e?.positionAbsolute?.x||0,y:e?.positionAbsolute?.y||0,width:e?.width||0,height:e?.height||0},t,!!n]}const l1=[{level:0,isMaxLevel:!0,edges:[]}];function d1(e,t,n=!1){let r=-1;const i=e.reduce((a,s)=>{const u=He(s.zIndex);let l=u?s.zIndex:0;if(n){const c=t.get(s.target),d=t.get(s.source),h=s.selected||c?.selected||d?.selected,f=Math.max(d?.[we]?.z||0,c?.[we]?.z||0,1e3);l=(u?s.zIndex:0)+(h?f:0)}return a[l]?a[l].push(s):a[l]=[s],r=l>r?l:r,a},{}),o=Object.entries(i).map(([a,s])=>{const u=+a;return{edges:s,level:u,isMaxLevel:u===r}});return o.length===0?l1:o}function f1(e,t,n){const r=de(ve(i=>e?i.edges.filter(o=>{const a=t.get(o.source),s=t.get(o.target);return a?.width&&a?.height&&s?.width&&s?.height&&u1({sourcePos:a.positionAbsolute||{x:0,y:0},targetPos:s.positionAbsolute||{x:0,y:0},sourceWidth:a.width,sourceHeight:a.height,targetWidth:s.width,targetHeight:s.height,width:i.width,height:i.height,transform:i.transform})}):i.edges,[e,t]));return d1(r,t,n)}const h1=({color:e="none",strokeWidth:t=1})=>N.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),p1=({color:e="none",strokeWidth:t=1})=>N.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Xc={[hr.Arrow]:h1,[hr.ArrowClosed]:p1};function g1(e){const t=be();return Fe(()=>Object.prototype.hasOwnProperty.call(Xc,e)?Xc[e]:(t.getState().onError?.("009",pt.error009(e)),null),[e])}const m1=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:o="strokeWidth",strokeWidth:a,orient:s="auto-start-reverse"})=>{const u=g1(t);return u?N.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:o,orient:s,refX:"0",refY:"0"},N.createElement(u,{color:n,strokeWidth:a})):null},v1=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((i,o)=>([o.markerStart,o.markerEnd].forEach(a=>{if(a&&typeof a=="object"){const s=ts(a,t);r.includes(s)||(i.push({id:s,color:a.color||e,...a}),r.push(s))}}),i),[]).sort((i,o)=>i.id.localeCompare(o.id))},zh=({defaultColor:e,rfId:t})=>{const n=de(ve(v1({defaultColor:e,rfId:t}),[e,t]),(r,i)=>!(r.length!==i.length||r.some((o,a)=>o.id!==i[a].id)));return N.createElement("defs",null,n.map(r=>N.createElement(m1,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};zh.displayName="MarkerDefinitions";var y1=le(zh);const w1=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),Hh=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:i,noPanClassName:o,onEdgeUpdate:a,onEdgeContextMenu:s,onEdgeMouseEnter:u,onEdgeMouseMove:l,onEdgeMouseLeave:c,onEdgeClick:d,edgeUpdaterRadius:h,onEdgeDoubleClick:f,onEdgeUpdateStart:g,onEdgeUpdateEnd:p,children:m})=>{const{edgesFocusable:v,edgesUpdatable:b,elementsSelectable:S,width:w,height:k,connectionMode:M,nodeInternals:L,onError:$}=de(w1,xe),A=f1(t,L,n);return w?N.createElement(N.Fragment,null,A.map(({level:D,edges:F,isMaxLevel:O})=>N.createElement("svg",{key:D,style:{zIndex:D},width:w,height:k,className:"react-flow__edges react-flow__container"},O&&N.createElement(y1,{defaultColor:e,rfId:r}),N.createElement("g",null,F.map(C=>{const[y,I,_]=Zc(L.get(C.source)),[R,P,E]=Zc(L.get(C.target));if(!_||!E)return null;let T=C.type||"default";i[T]||($?.("011",pt.error011(T)),T="default");const q=i[T]||i.default,z=M===Gt.Strict?P.target:(P.target??[]).concat(P.source??[]),U=Wc(I.source,C.sourceHandle),G=Wc(z,C.targetHandle),X=U?.position||H.Bottom,Q=G?.position||H.Top,ne=!!(C.focusable||v&&typeof C.focusable>"u"),B=typeof a<"u"&&(C.updatable||b&&typeof C.updatable>"u");if(!U||!G)return $?.("008",pt.error008(U,C)),null;const{sourceX:V,sourceY:Z,targetX:ae,targetY:oe}=c1(y,U,X,R,G,Q);return N.createElement(q,{key:C.id,id:C.id,className:Ee([C.className,o]),type:T,data:C.data,selected:!!C.selected,animated:!!C.animated,hidden:!!C.hidden,label:C.label,labelStyle:C.labelStyle,labelShowBg:C.labelShowBg,labelBgStyle:C.labelBgStyle,labelBgPadding:C.labelBgPadding,labelBgBorderRadius:C.labelBgBorderRadius,style:C.style,source:C.source,target:C.target,sourceHandleId:C.sourceHandle,targetHandleId:C.targetHandle,markerEnd:C.markerEnd,markerStart:C.markerStart,sourceX:V,sourceY:Z,targetX:ae,targetY:oe,sourcePosition:X,targetPosition:Q,elementsSelectable:S,onEdgeUpdate:a,onContextMenu:s,onMouseEnter:u,onMouseMove:l,onMouseLeave:c,onClick:d,edgeUpdaterRadius:h,onEdgeDoubleClick:f,onEdgeUpdateStart:g,onEdgeUpdateEnd:p,rfId:r,ariaLabel:C.ariaLabel,isFocusable:ne,isUpdatable:B,pathOptions:"pathOptions"in C?C.pathOptions:void 0,interactionWidth:C.interactionWidth})})))),m):null};Hh.displayName="EdgeRenderer";var b1=le(Hh);const _1=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function x1({children:e}){const t=de(_1);return N.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function E1(e){const t=Os(),n=te(!1);ue(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const S1={[H.Left]:H.Right,[H.Right]:H.Left,[H.Top]:H.Bottom,[H.Bottom]:H.Top},Bh=({nodeId:e,handleType:t,style:n,type:r=xt.Bezier,CustomComponent:i,connectionStatus:o})=>{const{fromNode:a,handleId:s,toX:u,toY:l,connectionMode:c}=de(ve(M=>({fromNode:M.nodeInternals.get(e),handleId:M.connectionHandleId,toX:(M.connectionPosition.x-M.transform[0])/M.transform[2],toY:(M.connectionPosition.y-M.transform[1])/M.transform[2],connectionMode:M.connectionMode}),[e]),xe),d=a?.[we]?.handleBounds;let h=d?.[t];if(c===Gt.Loose&&(h=h||d?.[t==="source"?"target":"source"]),!a||!h)return null;const f=s?h.find(M=>M.id===s):h[0],g=f?f.x+f.width/2:(a.width??0)/2,p=f?f.y+f.height/2:a.height??0,m=(a.positionAbsolute?.x??0)+g,v=(a.positionAbsolute?.y??0)+p,b=f?.position,S=b?S1[b]:null;if(!b||!S)return null;if(i)return N.createElement(i,{connectionLineType:r,connectionLineStyle:n,fromNode:a,fromHandle:f,fromX:m,fromY:v,toX:u,toY:l,fromPosition:b,toPosition:S,connectionStatus:o});let w="";const k={sourceX:m,sourceY:v,sourcePosition:b,targetX:u,targetY:l,targetPosition:S};return r===xt.Bezier?[w]=$s(k):r===xt.Step?[w]=es({...k,borderRadius:0}):r===xt.SmoothStep?[w]=es(k):r===xt.SimpleBezier?[w]=dh(k):w=`M${m},${v} ${u},${l}`,N.createElement("path",{d:w,fill:"none",className:"react-flow__connection-path",style:n})};Bh.displayName="ConnectionLine";const N1=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function C1({containerStyle:e,style:t,type:n,component:r}){const{nodeId:i,handleType:o,nodesConnectable:a,width:s,height:u,connectionStatus:l}=de(N1,xe);return!(i&&o&&s&&a)?null:N.createElement("svg",{style:e,width:s,height:u,className:"react-flow__edges react-flow__connectionline react-flow__container"},N.createElement("g",{className:Ee(["react-flow__connection",l])},N.createElement(Bh,{nodeId:i,handleType:o,style:t,type:n,CustomComponent:r,connectionStatus:l})))}function Kc(e,t){return te(null),be(),Fe(()=>t(e),[e])}const Vh=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:i,onInit:o,onNodeClick:a,onEdgeClick:s,onNodeDoubleClick:u,onEdgeDoubleClick:l,onNodeMouseEnter:c,onNodeMouseMove:d,onNodeMouseLeave:h,onNodeContextMenu:f,onSelectionContextMenu:g,onSelectionStart:p,onSelectionEnd:m,connectionLineType:v,connectionLineStyle:b,connectionLineComponent:S,connectionLineContainerStyle:w,selectionKeyCode:k,selectionOnDrag:M,selectionMode:L,multiSelectionKeyCode:$,panActivationKeyCode:A,zoomActivationKeyCode:D,deleteKeyCode:F,onlyRenderVisibleElements:O,elementsSelectable:C,selectNodesOnDrag:y,defaultViewport:I,translateExtent:_,minZoom:R,maxZoom:P,preventScrolling:E,defaultMarkerColor:T,zoomOnScroll:q,zoomOnPinch:z,panOnScroll:U,panOnScrollSpeed:G,panOnScrollMode:X,zoomOnDoubleClick:Q,panOnDrag:ne,onPaneClick:B,onPaneMouseEnter:V,onPaneMouseMove:Z,onPaneMouseLeave:ae,onPaneScroll:oe,onPaneContextMenu:me,onEdgeUpdate:ce,onEdgeContextMenu:W,onEdgeMouseEnter:pe,onEdgeMouseMove:K,onEdgeMouseLeave:Y,edgeUpdaterRadius:Se,onEdgeUpdateStart:Ge,onEdgeUpdateEnd:je,noDragClassName:Te,noWheelClassName:ge,noPanClassName:Le,elevateEdgesOnSelect:Ue,disableKeyboardA11y:Qe,nodeOrigin:Je,nodeExtent:Oe,rfId:ot})=>{const ye=Kc(e,e1),ke=Kc(t,s1);return E1(o),N.createElement(Qb,{onPaneClick:B,onPaneMouseEnter:V,onPaneMouseMove:Z,onPaneMouseLeave:ae,onPaneContextMenu:me,onPaneScroll:oe,deleteKeyCode:F,selectionKeyCode:k,selectionOnDrag:M,selectionMode:L,onSelectionStart:p,onSelectionEnd:m,multiSelectionKeyCode:$,panActivationKeyCode:A,zoomActivationKeyCode:D,elementsSelectable:C,onMove:n,onMoveStart:r,onMoveEnd:i,zoomOnScroll:q,zoomOnPinch:z,zoomOnDoubleClick:Q,panOnScroll:U,panOnScrollSpeed:G,panOnScrollMode:X,panOnDrag:ne,defaultViewport:I,translateExtent:_,minZoom:R,maxZoom:P,onSelectionContextMenu:g,preventScrolling:E,noDragClassName:Te,noWheelClassName:ge,noPanClassName:Le,disableKeyboardA11y:Qe},N.createElement(x1,null,N.createElement(b1,{edgeTypes:ke,onEdgeClick:s,onEdgeDoubleClick:l,onEdgeUpdate:ce,onlyRenderVisibleElements:O,onEdgeContextMenu:W,onEdgeMouseEnter:pe,onEdgeMouseMove:K,onEdgeMouseLeave:Y,onEdgeUpdateStart:Ge,onEdgeUpdateEnd:je,edgeUpdaterRadius:Se,defaultMarkerColor:T,noPanClassName:Le,elevateEdgesOnSelect:!!Ue,disableKeyboardA11y:Qe,rfId:ot},N.createElement(C1,{style:b,type:v,component:S,containerStyle:w})),N.createElement("div",{className:"react-flow__edgelabel-renderer"}),N.createElement(r1,{nodeTypes:ye,onNodeClick:a,onNodeDoubleClick:u,onNodeMouseEnter:c,onNodeMouseMove:d,onNodeMouseLeave:h,onNodeContextMenu:f,selectNodesOnDrag:y,onlyRenderVisibleElements:O,noPanClassName:Le,noDragClassName:Te,disableKeyboardA11y:Qe,nodeOrigin:Je,nodeExtent:Oe,rfId:ot})))};Vh.displayName="GraphView";var I1=le(Vh);const os=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],vt={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:os,nodeExtent:os,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Gt.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:eb,isValidConnection:void 0},M1=()=>g0((e,t)=>({...vt,setNodes:n=>{const{nodeInternals:r,nodeOrigin:i,elevateNodesOnSelect:o}=t();e({nodeInternals:Kr(n,r,i,o)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(i=>({...r,...i}))})},setDefaultNodesAndEdges:(n,r)=>{const i=typeof n<"u",o=typeof r<"u",a=i?Kr(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:a,edges:o?r:[],hasDefaultNodes:i,hasDefaultEdges:o})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:i,fitViewOnInit:o,fitViewOnInitDone:a,fitViewOnInitOptions:s,domNode:u,nodeOrigin:l}=t(),c=u?.querySelector(".react-flow__viewport");if(!c)return;const d=window.getComputedStyle(c),{m22:h}=new window.DOMMatrixReadOnly(d.transform),f=n.reduce((p,m)=>{const v=i.get(m.id);if(v){const b=ks(m.nodeElement);!!(b.width&&b.height&&(v.width!==b.width||v.height!==b.height||m.forceUpdate))&&(i.set(v.id,{...v,[we]:{...v[we],handleBounds:{source:Vc(".source",m.nodeElement,h,l),target:Vc(".target",m.nodeElement,h,l)}},...b}),p.push({id:v.id,type:"dimensions",dimensions:b}))}return p},[]);Th(i,l);const g=a||o&&!a&&kh(t,{initial:!0,...s});e({nodeInternals:new Map(i),fitViewOnInitDone:g}),f?.length>0&&r?.(f)},updateNodePositions:(n,r=!0,i=!1)=>{const{triggerNodeChanges:o}=t(),a=n.map(s=>{const u={id:s.id,type:"position",dragging:i};return r&&(u.positionAbsolute=s.positionAbsolute,u.position=s.position),u});o(a)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:i,hasDefaultNodes:o,nodeOrigin:a,getNodes:s,elevateNodesOnSelect:u}=t();if(n?.length){if(o){const l=Rh(n,s()),c=Kr(l,i,a,u);e({nodeInternals:c})}r?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:i,getNodes:o}=t();let a,s=null;r?a=n.map(u=>_t(u,!0)):(a=jt(o(),n),s=jt(i,[])),Zn({changedNodes:a,changedEdges:s,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:i,getNodes:o}=t();let a,s=null;r?a=n.map(u=>_t(u,!0)):(a=jt(i,n),s=jt(o(),[])),Zn({changedNodes:s,changedEdges:a,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:i,getNodes:o}=t(),a=n||o(),s=r||i,u=a.map(c=>(c.selected=!1,_t(c.id,!1))),l=s.map(c=>_t(c.id,!1));Zn({changedNodes:u,changedEdges:l,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:i}=t();r?.scaleExtent([n,i]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:i}=t();r?.scaleExtent([i,n]),e({maxZoom:n})},setTranslateExtent:n=>{t().d3Zoom?.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),o=r().filter(s=>s.selected).map(s=>_t(s.id,!1)),a=n.filter(s=>s.selected).map(s=>_t(s.id,!1));Zn({changedNodes:o,changedEdges:a,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(i=>{i.positionAbsolute=As(i.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:i,height:o,d3Zoom:a,d3Selection:s,translateExtent:u}=t();if(!a||!s||!n.x&&!n.y)return!1;const l=dt.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),c=[[0,0],[i,o]],d=a?.constrain()(l,c,u);return a.transform(s,d),r[0]!==d.x||r[1]!==d.y||r[2]!==d.k},cancelConnection:()=>e({connectionNodeId:vt.connectionNodeId,connectionHandleId:vt.connectionHandleId,connectionHandleType:vt.connectionHandleType,connectionStatus:vt.connectionStatus,connectionStartHandle:vt.connectionStartHandle,connectionEndHandle:vt.connectionEndHandle}),reset:()=>e({...vt})}),Object.is),Gh=({children:e})=>{const t=te(null);return t.current||(t.current=M1()),N.createElement(Ww,{value:t.current},e)};Gh.displayName="ReactFlowProvider";const Uh=({children:e})=>wr(Tr)?N.createElement(N.Fragment,null,e):N.createElement(Gh,null,e);Uh.displayName="ReactFlowWrapper";const T1={input:xh,default:rs,output:Sh,group:Ds},k1={default:pr,straight:Ls,step:qs,smoothstep:kr,simplebezier:Rs},A1=[0,0],R1=[15,15],q1={x:0,y:0,zoom:1},L1={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Yh=Wd(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:o=T1,edgeTypes:a=k1,onNodeClick:s,onEdgeClick:u,onInit:l,onMove:c,onMoveStart:d,onMoveEnd:h,onConnect:f,onConnectStart:g,onConnectEnd:p,onClickConnectStart:m,onClickConnectEnd:v,onNodeMouseEnter:b,onNodeMouseMove:S,onNodeMouseLeave:w,onNodeContextMenu:k,onNodeDoubleClick:M,onNodeDragStart:L,onNodeDrag:$,onNodeDragStop:A,onNodesDelete:D,onEdgesDelete:F,onSelectionChange:O,onSelectionDragStart:C,onSelectionDrag:y,onSelectionDragStop:I,onSelectionContextMenu:_,onSelectionStart:R,onSelectionEnd:P,connectionMode:E=Gt.Strict,connectionLineType:T=xt.Bezier,connectionLineStyle:q,connectionLineComponent:z,connectionLineContainerStyle:U,deleteKeyCode:G="Backspace",selectionKeyCode:X="Shift",selectionOnDrag:Q=!1,selectionMode:ne=Cn.Full,panActivationKeyCode:B="Space",multiSelectionKeyCode:V=fr()?"Meta":"Control",zoomActivationKeyCode:Z=fr()?"Meta":"Control",snapToGrid:ae=!1,snapGrid:oe=R1,onlyRenderVisibleElements:me=!1,selectNodesOnDrag:ce=!0,nodesDraggable:W,nodesConnectable:pe,nodesFocusable:K,nodeOrigin:Y=A1,edgesFocusable:Se,edgesUpdatable:Ge,elementsSelectable:je,defaultViewport:Te=q1,minZoom:ge=.5,maxZoom:Le=2,translateExtent:Ue=os,preventScrolling:Qe=!0,nodeExtent:Je,defaultMarkerColor:Oe="#b1b1b7",zoomOnScroll:ot=!0,zoomOnPinch:ye=!0,panOnScroll:ke=!1,panOnScrollSpeed:et=.5,panOnScrollMode:Ne=Pt.Free,zoomOnDoubleClick:Ae=!0,panOnDrag:tt=!0,onPaneClick:Tt,onPaneMouseEnter:Dr,onPaneMouseMove:Or,onPaneMouseLeave:cn,onPaneScroll:zr,onPaneContextMenu:Qs,children:kt,onEdgeUpdate:tg,onEdgeContextMenu:ng,onEdgeDoubleClick:rg,onEdgeMouseEnter:ig,onEdgeMouseMove:og,onEdgeMouseLeave:ag,onEdgeUpdateStart:sg,onEdgeUpdateEnd:cg,edgeUpdaterRadius:ug=10,onNodesChange:lg,onEdgesChange:dg,noDragClassName:fg="nodrag",noWheelClassName:hg="nowheel",noPanClassName:Js="nopan",fitView:pg=!1,fitViewOptions:gg,connectOnClick:mg=!0,attributionPosition:vg,proOptions:yg,defaultEdgeOptions:wg,elevateNodesOnSelect:bg=!0,elevateEdgesOnSelect:_g=!1,disableKeyboardA11y:ec=!1,autoPanOnConnect:xg=!0,autoPanOnNodeDrag:Eg=!0,connectionRadius:Sg=20,isValidConnection:Ng,onError:Cg,style:Ig,id:tc,nodeDragThreshold:Mg,...Tg},kg)=>{const Hr=tc||"1";return N.createElement("div",{...Tg,style:{...Ig,...L1},ref:kg,className:Ee(["react-flow",i]),"data-testid":"rf__wrapper",id:tc},N.createElement(Uh,null,N.createElement(I1,{onInit:l,onMove:c,onMoveStart:d,onMoveEnd:h,onNodeClick:s,onEdgeClick:u,onNodeMouseEnter:b,onNodeMouseMove:S,onNodeMouseLeave:w,onNodeContextMenu:k,onNodeDoubleClick:M,nodeTypes:o,edgeTypes:a,connectionLineType:T,connectionLineStyle:q,connectionLineComponent:z,connectionLineContainerStyle:U,selectionKeyCode:X,selectionOnDrag:Q,selectionMode:ne,deleteKeyCode:G,multiSelectionKeyCode:V,panActivationKeyCode:B,zoomActivationKeyCode:Z,onlyRenderVisibleElements:me,selectNodesOnDrag:ce,defaultViewport:Te,translateExtent:Ue,minZoom:ge,maxZoom:Le,preventScrolling:Qe,zoomOnScroll:ot,zoomOnPinch:ye,zoomOnDoubleClick:Ae,panOnScroll:ke,panOnScrollSpeed:et,panOnScrollMode:Ne,panOnDrag:tt,onPaneClick:Tt,onPaneMouseEnter:Dr,onPaneMouseMove:Or,onPaneMouseLeave:cn,onPaneScroll:zr,onPaneContextMenu:Qs,onSelectionContextMenu:_,onSelectionStart:R,onSelectionEnd:P,onEdgeUpdate:tg,onEdgeContextMenu:ng,onEdgeDoubleClick:rg,onEdgeMouseEnter:ig,onEdgeMouseMove:og,onEdgeMouseLeave:ag,onEdgeUpdateStart:sg,onEdgeUpdateEnd:cg,edgeUpdaterRadius:ug,defaultMarkerColor:Oe,noDragClassName:fg,noWheelClassName:hg,noPanClassName:Js,elevateEdgesOnSelect:_g,rfId:Hr,disableKeyboardA11y:ec,nodeOrigin:Y,nodeExtent:Je}),N.createElement(Sb,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:f,onConnectStart:g,onConnectEnd:p,onClickConnectStart:m,onClickConnectEnd:v,nodesDraggable:W,nodesConnectable:pe,nodesFocusable:K,edgesFocusable:Se,edgesUpdatable:Ge,elementsSelectable:je,elevateNodesOnSelect:bg,minZoom:ge,maxZoom:Le,nodeExtent:Je,onNodesChange:lg,onEdgesChange:dg,snapToGrid:ae,snapGrid:oe,connectionMode:E,translateExtent:Ue,connectOnClick:mg,defaultEdgeOptions:wg,fitView:pg,fitViewOptions:gg,onNodesDelete:D,onEdgesDelete:F,onNodeDragStart:L,onNodeDrag:$,onNodeDragStop:A,onSelectionDrag:y,onSelectionDragStart:C,onSelectionDragStop:I,noPanClassName:Js,nodeOrigin:Y,rfId:Hr,autoPanOnConnect:xg,autoPanOnNodeDrag:Eg,onError:Cg,connectionRadius:Sg,isValidConnection:Ng,nodeDragThreshold:Mg}),N.createElement(xb,{onSelectionChange:O}),kt,N.createElement(Xw,{proOptions:yg,position:vg}),N.createElement(Tb,{rfId:Hr,disableKeyboardA11y:ec})))});Yh.displayName="ReactFlow";function Wh(e){return t=>{const[n,r]=ie(t),i=ve(o=>r(a=>e(o,a)),[]);return[n,r,i]}}const $1=Wh(Rh),P1=Wh(Vb),Zh=({id:e,x:t,y:n,width:r,height:i,style:o,color:a,strokeColor:s,strokeWidth:u,className:l,borderRadius:c,shapeRendering:d,onClick:h,selected:f})=>{const{background:g,backgroundColor:p}=o||{},m=a||g||p;return N.createElement("rect",{className:Ee(["react-flow__minimap-node",{selected:f},l]),x:t,y:n,rx:c,ry:c,width:r,height:i,fill:m,stroke:s,strokeWidth:u,shapeRendering:d,onClick:h?v=>h(v,e):void 0})};Zh.displayName="MiniMapNode";var F1=le(Zh);const D1=e=>e.nodeOrigin,O1=e=>e.getNodes().filter(t=>!t.hidden&&t.width&&t.height),ei=e=>e instanceof Function?e:()=>e;function z1({nodeStrokeColor:e="transparent",nodeColor:t="#e2e2e2",nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i=2,nodeComponent:o=F1,onClick:a}){const s=de(O1,xe),u=de(D1),l=ei(t),c=ei(e),d=ei(n),h=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return N.createElement(N.Fragment,null,s.map(f=>{const{x:g,y:p}=Ht(f,u).positionAbsolute;return N.createElement(o,{key:f.id,x:g,y:p,width:f.width,height:f.height,style:f.style,selected:f.selected,className:d(f),color:l(f),borderRadius:r,strokeColor:c(f),strokeWidth:i,shapeRendering:h,onClick:a,id:f.id})}))}var H1=le(z1);const B1=200,V1=150,G1=e=>{const t=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:t.length>0?Qw(Ar(t,e.nodeOrigin),n):n,rfId:e.rfId}},U1="react-flow__minimap-desc";function Xh({style:e,className:t,nodeStrokeColor:n="transparent",nodeColor:r="#e2e2e2",nodeClassName:i="",nodeBorderRadius:o=5,nodeStrokeWidth:a=2,nodeComponent:s,maskColor:u="rgb(240, 240, 240, 0.6)",maskStrokeColor:l="none",maskStrokeWidth:c=1,position:d="bottom-right",onClick:h,onNodeClick:f,pannable:g=!1,zoomable:p=!1,ariaLabel:m="React Flow mini map",inversePan:v=!1,zoomStep:b=10,offsetScale:S=5}){const w=be(),k=te(null),{boundingRect:M,viewBB:L,rfId:$}=de(G1,xe),A=e?.width??B1,D=e?.height??V1,F=M.width/A,O=M.height/D,C=Math.max(F,O),y=C*A,I=C*D,_=S*C,R=M.x-(y-M.width)/2-_,P=M.y-(I-M.height)/2-_,E=y+_*2,T=I+_*2,q=`${U1}-${$}`,z=te(0);z.current=C,ue(()=>{if(k.current){const X=ze(k.current),Q=V=>{const{transform:Z,d3Selection:ae,d3Zoom:oe}=w.getState();if(V.sourceEvent.type!=="wheel"||!ae||!oe)return;const me=-V.sourceEvent.deltaY*(V.sourceEvent.deltaMode===1?.05:V.sourceEvent.deltaMode?1:.002)*b,ce=Z[2]*Math.pow(2,me);oe.scaleTo(ae,ce)},ne=V=>{const{transform:Z,d3Selection:ae,d3Zoom:oe,translateExtent:me,width:ce,height:W}=w.getState();if(V.sourceEvent.type!=="mousemove"||!ae||!oe)return;const pe=z.current*Math.max(1,Z[2])*(v?-1:1),K={x:Z[0]-V.sourceEvent.movementX*pe,y:Z[1]-V.sourceEvent.movementY*pe},Y=[[0,0],[ce,W]],Se=dt.translate(K.x,K.y).scale(Z[2]),Ge=oe.constrain()(Se,Y,me);oe.transform(ae,Ge)},B=th().on("zoom",g?ne:null).on("zoom.wheel",p?Q:null);return X.call(B),()=>{X.on("zoom",null)}}},[g,p,v,b]);const U=h?X=>{const Q=Ye(X);h(X,{x:Q[0],y:Q[1]})}:void 0,G=f?(X,Q)=>{const ne=w.getState().nodeInternals.get(Q);f(X,ne)}:void 0;return N.createElement(Ts,{position:d,style:e,className:Ee(["react-flow__minimap",t]),"data-testid":"rf__minimap"},N.createElement("svg",{width:A,height:D,viewBox:`${R} ${P} ${E} ${T}`,role:"img","aria-labelledby":q,ref:k,onClick:U},m&&N.createElement("title",{id:q},m),N.createElement(H1,{onClick:G,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:o,nodeClassName:i,nodeStrokeWidth:a,nodeComponent:s}),N.createElement("path",{className:"react-flow__minimap-mask",d:`M${R-_},${P-_}h${E+_*2}v${T+_*2}h${-E-_*2}z
        M${L.x},${L.y}h${L.width}v${L.height}h${-L.width}z`,fill:u,fillRule:"evenodd",stroke:l,strokeWidth:c,pointerEvents:"none"})))}Xh.displayName="MiniMap";var Y1=le(Xh);function W1(){return N.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},N.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Z1(){return N.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},N.createElement("path",{d:"M0 0h32v4.2H0z"}))}function X1(){return N.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},N.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function K1(){return N.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},N.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function j1(){return N.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},N.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const mn=({children:e,className:t,...n})=>N.createElement("button",{type:"button",className:Ee(["react-flow__controls-button",t]),...n},e);mn.displayName="ControlButton";const Q1=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),Kh=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:o,onZoomOut:a,onFitView:s,onInteractiveChange:u,className:l,children:c,position:d="bottom-left"})=>{const h=be(),[f,g]=ie(!1),{isInteractive:p,minZoomReached:m,maxZoomReached:v}=de(Q1,xe),{zoomIn:b,zoomOut:S,fitView:w}=Os();if(ue(()=>{g(!0)},[]),!f)return null;const k=()=>{b(),o?.()},M=()=>{S(),a?.()},L=()=>{w(i),s?.()},$=()=>{h.setState({nodesDraggable:!p,nodesConnectable:!p,elementsSelectable:!p}),u?.(!p)};return N.createElement(Ts,{className:Ee(["react-flow__controls",l]),position:d,style:e,"data-testid":"rf__controls"},t&&N.createElement(N.Fragment,null,N.createElement(mn,{onClick:k,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:v},N.createElement(W1,null)),N.createElement(mn,{onClick:M,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:m},N.createElement(Z1,null))),n&&N.createElement(mn,{className:"react-flow__controls-fitview",onClick:L,title:"fit view","aria-label":"fit view"},N.createElement(X1,null)),r&&N.createElement(mn,{className:"react-flow__controls-interactive",onClick:$,title:"toggle interactivity","aria-label":"toggle interactivity"},p?N.createElement(j1,null):N.createElement(K1,null)),c)};Kh.displayName="Controls";var J1=le(Kh),Ze;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Ze||(Ze={}));function e_({color:e,dimensions:t,lineWidth:n}){return N.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function t_({color:e,radius:t}){return N.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const n_={[Ze.Dots]:"#91919a",[Ze.Lines]:"#eee",[Ze.Cross]:"#e2e2e2"},r_={[Ze.Dots]:1,[Ze.Lines]:1,[Ze.Cross]:6},i_=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function jh({id:e,variant:t=Ze.Dots,gap:n=20,size:r,lineWidth:i=1,offset:o=2,color:a,style:s,className:u}){const l=te(null),{transform:c,patternId:d}=de(i_,xe),h=a||n_[t],f=r||r_[t],g=t===Ze.Dots,p=t===Ze.Cross,m=Array.isArray(n)?n:[n,n],v=[m[0]*c[2]||1,m[1]*c[2]||1],b=f*c[2],S=p?[b,b]:v,w=g?[b/o,b/o]:[S[0]/o,S[1]/o];return N.createElement("svg",{className:Ee(["react-flow__background",u]),style:{...s,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:l,"data-testid":"rf__background"},N.createElement("pattern",{id:d+e,x:c[0]%v[0],y:c[1]%v[1],width:v[0],height:v[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${w[0]},-${w[1]})`},g?N.createElement(t_,{color:h,radius:b/o}):N.createElement(e_,{dimensions:S,color:h,lineWidth:i})),N.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${d+e})`}))}jh.displayName="Background";var o_=le(jh);function a_(e,t){const n=te(!1);ue(()=>{if(n.current)return e();n.current=!0},t)}var ti,jc;function Hs(){if(jc)return ti;jc=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i&&n(t[r],r,t)!==!1;);return t}return ti=e,ti}var ni,Qc;function s_(){if(Qc)return ni;Qc=1;var e=xr(),t=Ut();function n(r,i){return r&&e(i,t(i),r)}return ni=n,ni}var ri,Jc;function c_(){if(Jc)return ri;Jc=1;var e=xr(),t=Rn();function n(r,i){return r&&e(i,t(i),r)}return ri=n,ri}var ii,eu;function u_(){if(eu)return ii;eu=1;var e=xr(),t=lf();function n(r,i){return e(r,t(r),i)}return ii=n,ii}var oi,tu;function Qh(){if(tu)return oi;tu=1;var e=df(),t=Jd(),n=lf(),r=ym(),i=Object.getOwnPropertySymbols,o=i?function(a){for(var s=[];a;)e(s,n(a)),a=t(a);return s}:r;return oi=o,oi}var ai,nu;function l_(){if(nu)return ai;nu=1;var e=xr(),t=Qh();function n(r,i){return e(r,t(r),i)}return ai=n,ai}var si,ru;function d_(){if(ru)return si;ru=1;var e=wm(),t=Qh(),n=Rn();function r(i){return e(i,n,t)}return si=r,si}var ci,iu;function f_(){if(iu)return ci;iu=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r){var i=r.length,o=new r.constructor(i);return i&&typeof r[0]=="string"&&t.call(r,"index")&&(o.index=r.index,o.input=r.input),o}return ci=n,ci}var ui,ou;function h_(){if(ou)return ui;ou=1;var e=ef();function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.byteLength)}return ui=t,ui}var li,au;function p_(){if(au)return li;au=1;var e=/\w*$/;function t(n){var r=new n.constructor(n.source,e.exec(n));return r.lastIndex=n.lastIndex,r}return li=t,li}var di,su;function g_(){if(su)return di;su=1;var e=ps(),t=e?e.prototype:void 0,n=t?t.valueOf:void 0;function r(i){return n?Object(n.call(i)):{}}return di=r,di}var fi,cu;function m_(){if(cu)return fi;cu=1;var e=ef(),t=h_(),n=p_(),r=g_(),i=nm,o="[object Boolean]",a="[object Date]",s="[object Map]",u="[object Number]",l="[object RegExp]",c="[object Set]",d="[object String]",h="[object Symbol]",f="[object ArrayBuffer]",g="[object DataView]",p="[object Float32Array]",m="[object Float64Array]",v="[object Int8Array]",b="[object Int16Array]",S="[object Int32Array]",w="[object Uint8Array]",k="[object Uint8ClampedArray]",M="[object Uint16Array]",L="[object Uint32Array]";function $(A,D,F){var O=A.constructor;switch(D){case f:return e(A);case o:case a:return new O(+A);case g:return t(A,F);case p:case m:case v:case b:case S:case w:case k:case M:case L:return i(A,F);case s:return new O;case u:case d:return new O(A);case l:return n(A);case c:return new O;case h:return r(A)}}return fi=$,fi}var hi,uu;function v_(){if(uu)return hi;uu=1;var e=Pn(),t=Er,n="[object Map]";function r(i){return t(i)&&e(i)==n}return hi=r,hi}var pi,lu;function y_(){if(lu)return pi;lu=1;var e=v_(),t=gs(),n=tf,r=n&&n.isMap,i=r?t(r):e;return pi=i,pi}var gi,du;function w_(){if(du)return gi;du=1;var e=Pn(),t=Er,n="[object Set]";function r(i){return t(i)&&e(i)==n}return gi=r,gi}var mi,fu;function b_(){if(fu)return mi;fu=1;var e=w_(),t=gs(),n=tf,r=n&&n.isSet,i=r?t(r):e;return mi=i,mi}var vi,hu;function Jh(){if(hu)return vi;hu=1;var e=nf,t=Hs(),n=ms(),r=s_(),i=c_(),o=rm(),a=om(),s=u_(),u=l_(),l=bm(),c=d_(),d=Pn(),h=f_(),f=m_(),g=im(),p=Me(),m=vs(),v=y_(),b=qn,S=b_(),w=Ut(),k=Rn(),M=1,L=2,$=4,A="[object Arguments]",D="[object Array]",F="[object Boolean]",O="[object Date]",C="[object Error]",y="[object Function]",I="[object GeneratorFunction]",_="[object Map]",R="[object Number]",P="[object Object]",E="[object RegExp]",T="[object Set]",q="[object String]",z="[object Symbol]",U="[object WeakMap]",G="[object ArrayBuffer]",X="[object DataView]",Q="[object Float32Array]",ne="[object Float64Array]",B="[object Int8Array]",V="[object Int16Array]",Z="[object Int32Array]",ae="[object Uint8Array]",oe="[object Uint8ClampedArray]",me="[object Uint16Array]",ce="[object Uint32Array]",W={};W[A]=W[D]=W[G]=W[X]=W[F]=W[O]=W[Q]=W[ne]=W[B]=W[V]=W[Z]=W[_]=W[R]=W[P]=W[E]=W[T]=W[q]=W[z]=W[ae]=W[oe]=W[me]=W[ce]=!0,W[C]=W[y]=W[U]=!1;function pe(K,Y,Se,Ge,je,Te){var ge,Le=Y&M,Ue=Y&L,Qe=Y&$;if(Se&&(ge=je?Se(K,Ge,je,Te):Se(K)),ge!==void 0)return ge;if(!b(K))return K;var Je=p(K);if(Je){if(ge=h(K),!Le)return a(K,ge)}else{var Oe=d(K),ot=Oe==y||Oe==I;if(m(K))return o(K,Le);if(Oe==P||Oe==A||ot&&!je){if(ge=Ue||ot?{}:g(K),!Le)return Ue?u(K,i(ge,K)):s(K,r(ge,K))}else{if(!W[Oe])return je?K:{};ge=f(K,Oe,Le)}}Te||(Te=new e);var ye=Te.get(K);if(ye)return ye;Te.set(K,ge),S(K)?K.forEach(function(Ne){ge.add(pe(Ne,Y,Se,Ne,K,Te))}):v(K)&&K.forEach(function(Ne,Ae){ge.set(Ae,pe(Ne,Y,Se,Ae,K,Te))});var ke=Qe?Ue?c:l:Ue?k:w,et=Je?void 0:ke(K);return t(et||K,function(Ne,Ae){et&&(Ae=Ne,Ne=K[Ae]),n(ge,Ae,pe(Ne,Y,Se,Ae,K,Te))}),ge}return vi=pe,vi}var yi,pu;function __(){if(pu)return yi;pu=1;var e=Jh(),t=4;function n(r){return e(r,t)}return yi=n,yi}var wi,gu;function Bs(){if(gu)return wi;gu=1;var e=rf(),t=Ut();function n(r,i){return r&&e(r,i,t)}return wi=n,wi}var bi,mu;function x_(){if(mu)return bi;mu=1;var e=Ln();function t(n,r){return function(i,o){if(i==null)return i;if(!e(i))return n(i,o);for(var a=i.length,s=r?a:-1,u=Object(i);(r?s--:++s<a)&&o(u[s],s,u)!==!1;);return i}}return bi=t,bi}var _i,vu;function Rr(){if(vu)return _i;vu=1;var e=Bs(),t=x_(),n=t(e);return _i=n,_i}var xi,yu;function ep(){if(yu)return xi;yu=1;var e=$n();function t(n){return typeof n=="function"?n:e}return xi=t,xi}var Ei,wu;function tp(){if(wu)return Ei;wu=1;var e=Hs(),t=Rr(),n=ep(),r=Me();function i(o,a){var s=r(o)?e:t;return s(o,n(a))}return Ei=i,Ei}var Si,bu;function np(){return bu||(bu=1,Si=tp()),Si}var Ni,_u;function E_(){if(_u)return Ni;_u=1;var e=Rr();function t(n,r){var i=[];return e(n,function(o,a,s){r(o,a,s)&&i.push(o)}),i}return Ni=t,Ni}var Ci,xu;function S_(){if(xu)return Ci;xu=1;var e=nf,t=ff,n=1,r=2;function i(o,a,s,u){var l=s.length,c=l,d=!u;if(o==null)return!c;for(o=Object(o);l--;){var h=s[l];if(d&&h[2]?h[1]!==o[h[0]]:!(h[0]in o))return!1}for(;++l<c;){h=s[l];var f=h[0],g=o[f],p=h[1];if(d&&h[2]){if(g===void 0&&!(f in o))return!1}else{var m=new e;if(u)var v=u(g,p,f,o,a,m);if(!(v===void 0?t(p,g,n|r,u,m):v))return!1}}return!0}return Ci=i,Ci}var Ii,Eu;function rp(){if(Eu)return Ii;Eu=1;var e=qn;function t(n){return n===n&&!e(n)}return Ii=t,Ii}var Mi,Su;function N_(){if(Su)return Mi;Su=1;var e=rp(),t=Ut();function n(r){for(var i=t(r),o=i.length;o--;){var a=i[o],s=r[a];i[o]=[a,s,e(s)]}return i}return Mi=n,Mi}var Ti,Nu;function ip(){if(Nu)return Ti;Nu=1;function e(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}return Ti=e,Ti}var ki,Cu;function C_(){if(Cu)return ki;Cu=1;var e=S_(),t=N_(),n=ip();function r(i){var o=t(i);return o.length==1&&o[0][2]?n(o[0][0],o[0][1]):function(a){return a===i||e(a,i,o)}}return ki=r,ki}var Ai,Iu;function sn(){if(Iu)return Ai;Iu=1;var e=of(),t=Er,n="[object Symbol]";function r(i){return typeof i=="symbol"||t(i)&&e(i)==n}return Ai=r,Ai}var Ri,Mu;function Vs(){if(Mu)return Ri;Mu=1;var e=Me(),t=sn(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(o,a){if(e(o))return!1;var s=typeof o;return s=="number"||s=="symbol"||s=="boolean"||o==null||t(o)?!0:r.test(o)||!n.test(o)||a!=null&&o in Object(a)}return Ri=i,Ri}var qi,Tu;function I_(){if(Tu)return qi;Tu=1;var e=am,t="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var o=function(){var a=arguments,s=i?i.apply(this,a):a[0],u=o.cache;if(u.has(s))return u.get(s);var l=r.apply(this,a);return o.cache=u.set(s,l)||u,l};return o.cache=new(n.Cache||e),o}return n.Cache=e,qi=n,qi}var Li,ku;function M_(){if(ku)return Li;ku=1;var e=I_(),t=500;function n(r){var i=e(r,function(a){return o.size===t&&o.clear(),a}),o=i.cache;return i}return Li=n,Li}var $i,Au;function T_(){if(Au)return $i;Au=1;var e=M_(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(i){var o=[];return i.charCodeAt(0)===46&&o.push(""),i.replace(t,function(a,s,u,l){o.push(u?l.replace(n,"$1"):s||a)}),o});return $i=r,$i}var Pi,Ru;function qr(){if(Ru)return Pi;Ru=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,o=Array(i);++r<i;)o[r]=n(t[r],r,t);return o}return Pi=e,Pi}var Fi,qu;function k_(){if(qu)return Fi;qu=1;var e=ps(),t=qr(),n=Me(),r=sn(),i=1/0,o=e?e.prototype:void 0,a=o?o.toString:void 0;function s(u){if(typeof u=="string")return u;if(n(u))return t(u,s)+"";if(r(u))return a?a.call(u):"";var l=u+"";return l=="0"&&1/u==-i?"-0":l}return Fi=s,Fi}var Di,Lu;function op(){if(Lu)return Di;Lu=1;var e=k_();function t(n){return n==null?"":e(n)}return Di=t,Di}var Oi,$u;function Lr(){if($u)return Oi;$u=1;var e=Me(),t=Vs(),n=T_(),r=op();function i(o,a){return e(o)?o:t(o,a)?[o]:n(r(o))}return Oi=i,Oi}var zi,Pu;function zn(){if(Pu)return zi;Pu=1;var e=sn(),t=1/0;function n(r){if(typeof r=="string"||e(r))return r;var i=r+"";return i=="0"&&1/r==-t?"-0":i}return zi=n,zi}var Hi,Fu;function $r(){if(Fu)return Hi;Fu=1;var e=Lr(),t=zn();function n(r,i){i=e(i,r);for(var o=0,a=i.length;r!=null&&o<a;)r=r[t(i[o++])];return o&&o==a?r:void 0}return Hi=n,Hi}var Bi,Du;function A_(){if(Du)return Bi;Du=1;var e=$r();function t(n,r,i){var o=n==null?void 0:e(n,r);return o===void 0?i:o}return Bi=t,Bi}var Vi,Ou;function R_(){if(Ou)return Vi;Ou=1;function e(t,n){return t!=null&&n in Object(t)}return Vi=e,Vi}var Gi,zu;function ap(){if(zu)return Gi;zu=1;var e=Lr(),t=ys(),n=Me(),r=af(),i=sm(),o=zn();function a(s,u,l){u=e(u,s);for(var c=-1,d=u.length,h=!1;++c<d;){var f=o(u[c]);if(!(h=s!=null&&l(s,f)))break;s=s[f]}return h||++c!=d?h:(d=s==null?0:s.length,!!d&&i(d)&&r(f,d)&&(n(s)||t(s)))}return Gi=a,Gi}var Ui,Hu;function sp(){if(Hu)return Ui;Hu=1;var e=R_(),t=ap();function n(r,i){return r!=null&&t(r,i,e)}return Ui=n,Ui}var Yi,Bu;function q_(){if(Bu)return Yi;Bu=1;var e=ff,t=A_(),n=sp(),r=Vs(),i=rp(),o=ip(),a=zn(),s=1,u=2;function l(c,d){return r(c)&&i(d)?o(a(c),d):function(h){var f=t(h,c);return f===void 0&&f===d?n(h,c):e(d,f,s|u)}}return Yi=l,Yi}var Wi,Vu;function cp(){if(Vu)return Wi;Vu=1;function e(t){return function(n){return n?.[t]}}return Wi=e,Wi}var Zi,Gu;function L_(){if(Gu)return Zi;Gu=1;var e=$r();function t(n){return function(r){return e(r,n)}}return Zi=t,Zi}var Xi,Uu;function $_(){if(Uu)return Xi;Uu=1;var e=cp(),t=L_(),n=Vs(),r=zn();function i(o){return n(o)?e(r(o)):t(o)}return Xi=i,Xi}var Ki,Yu;function mt(){if(Yu)return Ki;Yu=1;var e=C_(),t=q_(),n=$n(),r=Me(),i=$_();function o(a){return typeof a=="function"?a:a==null?n:typeof a=="object"?r(a)?t(a[0],a[1]):e(a):i(a)}return Ki=o,Ki}var ji,Wu;function up(){if(Wu)return ji;Wu=1;var e=_m(),t=E_(),n=mt(),r=Me();function i(o,a){var s=r(o)?e:t;return s(o,n(a,3))}return ji=i,ji}var Qi,Zu;function P_(){if(Zu)return Qi;Zu=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r,i){return r!=null&&t.call(r,i)}return Qi=n,Qi}var Ji,Xu;function lp(){if(Xu)return Ji;Xu=1;var e=P_(),t=ap();function n(r,i){return r!=null&&t(r,i,e)}return Ji=n,Ji}var eo,Ku;function F_(){if(Ku)return eo;Ku=1;var e=hf(),t=Pn(),n=ys(),r=Me(),i=Ln(),o=vs(),a=cm(),s=sf,u="[object Map]",l="[object Set]",c=Object.prototype,d=c.hasOwnProperty;function h(f){if(f==null)return!0;if(i(f)&&(r(f)||typeof f=="string"||typeof f.splice=="function"||o(f)||s(f)||n(f)))return!f.length;var g=t(f);if(g==u||g==l)return!f.size;if(a(f))return!e(f).length;for(var p in f)if(d.call(f,p))return!1;return!0}return eo=h,eo}var to,ju;function dp(){if(ju)return to;ju=1;function e(t){return t===void 0}return to=e,to}var no,Qu;function fp(){if(Qu)return no;Qu=1;var e=Rr(),t=Ln();function n(r,i){var o=-1,a=t(r)?Array(r.length):[];return e(r,function(s,u,l){a[++o]=i(s,u,l)}),a}return no=n,no}var ro,Ju;function hp(){if(Ju)return ro;Ju=1;var e=qr(),t=mt(),n=fp(),r=Me();function i(o,a){var s=r(o)?e:n;return s(o,t(a,3))}return ro=i,ro}var io,el;function D_(){if(el)return io;el=1;function e(t,n,r,i){var o=-1,a=t==null?0:t.length;for(i&&a&&(r=t[++o]);++o<a;)r=n(r,t[o],o,t);return r}return io=e,io}var oo,tl;function O_(){if(tl)return oo;tl=1;function e(t,n,r,i,o){return o(t,function(a,s,u){r=i?(i=!1,a):n(r,a,s,u)}),r}return oo=e,oo}var ao,nl;function pp(){if(nl)return ao;nl=1;var e=D_(),t=Rr(),n=mt(),r=O_(),i=Me();function o(a,s,u){var l=i(a)?e:r,c=arguments.length<3;return l(a,n(s,4),u,c,t)}return ao=o,ao}var so,rl;function z_(){if(rl)return so;rl=1;var e=of(),t=Me(),n=Er,r="[object String]";function i(o){return typeof o=="string"||!t(o)&&n(o)&&e(o)==r}return so=i,so}var co,il;function H_(){if(il)return co;il=1;var e=cp(),t=e("length");return co=t,co}var uo,ol;function B_(){if(ol)return uo;ol=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,o="\\ufe0e\\ufe0f",a="\\u200d",s=RegExp("["+a+e+i+o+"]");function u(l){return s.test(l)}return uo=u,uo}var lo,al;function V_(){if(al)return lo;al=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,o="\\ufe0e\\ufe0f",a="["+e+"]",s="["+i+"]",u="\\ud83c[\\udffb-\\udfff]",l="(?:"+s+"|"+u+")",c="[^"+e+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",f="\\u200d",g=l+"?",p="["+o+"]?",m="(?:"+f+"(?:"+[c,d,h].join("|")+")"+p+g+")*",v=p+g+m,b="(?:"+[c+s+"?",s,d,h,a].join("|")+")",S=RegExp(u+"(?="+u+")|"+b+v,"g");function w(k){for(var M=S.lastIndex=0;S.test(k);)++M;return M}return lo=w,lo}var fo,sl;function G_(){if(sl)return fo;sl=1;var e=H_(),t=B_(),n=V_();function r(i){return t(i)?n(i):e(i)}return fo=r,fo}var ho,cl;function U_(){if(cl)return ho;cl=1;var e=hf(),t=Pn(),n=Ln(),r=z_(),i=G_(),o="[object Map]",a="[object Set]";function s(u){if(u==null)return 0;if(n(u))return r(u)?i(u):u.length;var l=t(u);return l==o||l==a?u.size:e(u).length}return ho=s,ho}var po,ul;function Y_(){if(ul)return po;ul=1;var e=Hs(),t=um(),n=Bs(),r=mt(),i=Jd(),o=Me(),a=vs(),s=cf(),u=qn,l=sf;function c(d,h,f){var g=o(d),p=g||a(d)||l(d);if(h=r(h,4),f==null){var m=d&&d.constructor;p?f=g?new m:[]:u(d)?f=s(m)?t(i(d)):{}:f={}}return(p?e:n)(d,function(v,b,S){return h(f,v,b,S)}),f}return po=c,po}var go,ll;function W_(){if(ll)return go;ll=1;var e=ps(),t=ys(),n=Me(),r=e?e.isConcatSpreadable:void 0;function i(o){return n(o)||t(o)||!!(r&&o&&o[r])}return go=i,go}var mo,dl;function Gs(){if(dl)return mo;dl=1;var e=df(),t=W_();function n(r,i,o,a,s){var u=-1,l=r.length;for(o||(o=t),s||(s=[]);++u<l;){var c=r[u];i>0&&o(c)?i>1?n(c,i-1,o,a,s):e(s,c):a||(s[s.length]=c)}return s}return mo=n,mo}var vo,fl;function gp(){if(fl)return vo;fl=1;function e(t,n,r,i){for(var o=t.length,a=r+(i?1:-1);i?a--:++a<o;)if(n(t[a],a,t))return a;return-1}return vo=e,vo}var yo,hl;function Z_(){if(hl)return yo;hl=1;function e(t){return t!==t}return yo=e,yo}var wo,pl;function X_(){if(pl)return wo;pl=1;function e(t,n,r){for(var i=r-1,o=t.length;++i<o;)if(t[i]===n)return i;return-1}return wo=e,wo}var bo,gl;function K_(){if(gl)return bo;gl=1;var e=gp(),t=Z_(),n=X_();function r(i,o,a){return o===o?n(i,o,a):e(i,t,a)}return bo=r,bo}var _o,ml;function j_(){if(ml)return _o;ml=1;var e=K_();function t(n,r){var i=n==null?0:n.length;return!!i&&e(n,r,0)>-1}return _o=t,_o}var xo,vl;function Q_(){if(vl)return xo;vl=1;function e(t,n,r){for(var i=-1,o=t==null?0:t.length;++i<o;)if(r(n,t[i]))return!0;return!1}return xo=e,xo}var Eo,yl;function J_(){if(yl)return Eo;yl=1;function e(){}return Eo=e,Eo}var So,wl;function ex(){if(wl)return So;wl=1;var e=xm(),t=J_(),n=pf,r=1/0,i=e&&1/n(new e([,-0]))[1]==r?function(o){return new e(o)}:t;return So=i,So}var No,bl;function tx(){if(bl)return No;bl=1;var e=Em,t=j_(),n=Q_(),r=Sm,i=ex(),o=pf,a=200;function s(u,l,c){var d=-1,h=t,f=u.length,g=!0,p=[],m=p;if(c)g=!1,h=n;else if(f>=a){var v=l?null:i(u);if(v)return o(v);g=!1,h=r,m=new e}else m=l?[]:p;e:for(;++d<f;){var b=u[d],S=l?l(b):b;if(b=c||b!==0?b:0,g&&S===S){for(var w=m.length;w--;)if(m[w]===S)continue e;l&&m.push(S),p.push(b)}else h(m,S,c)||(m!==p&&m.push(S),p.push(b))}return p}return No=s,No}var Co,_l;function nx(){if(_l)return Co;_l=1;var e=Gs(),t=ws(),n=tx(),r=lm,i=t(function(o){return n(e(o,1,r,!0))});return Co=i,Co}var Io,xl;function rx(){if(xl)return Io;xl=1;var e=qr();function t(n,r){return e(r,function(i){return n[i]})}return Io=t,Io}var Mo,El;function mp(){if(El)return Mo;El=1;var e=rx(),t=Ut();function n(r){return r==null?[]:e(r,t(r))}return Mo=n,Mo}var To,Sl;function Ve(){if(Sl)return To;Sl=1;var e;if(typeof hs=="function")try{e={clone:__(),constant:uf(),each:np(),filter:up(),has:lp(),isArray:Me(),isEmpty:F_(),isFunction:cf(),isUndefined:dp(),keys:Ut(),map:hp(),reduce:pp(),size:U_(),transform:Y_(),union:nx(),values:mp()}}catch{}return e||(e=window._),To=e,To}var ko,Nl;function Us(){if(Nl)return ko;Nl=1;var e=Ve();ko=i;var t="\0",n="\0",r="";function i(c){this._isDirected=e.has(c,"directed")?c.directed:!0,this._isMultigraph=e.has(c,"multigraph")?c.multigraph:!1,this._isCompound=e.has(c,"compound")?c.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(c){return this._label=c,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultNodeLabelFn=c,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return e.keys(this._nodes)},i.prototype.sources=function(){var c=this;return e.filter(this.nodes(),function(d){return e.isEmpty(c._in[d])})},i.prototype.sinks=function(){var c=this;return e.filter(this.nodes(),function(d){return e.isEmpty(c._out[d])})},i.prototype.setNodes=function(c,d){var h=arguments,f=this;return e.each(c,function(g){h.length>1?f.setNode(g,d):f.setNode(g)}),this},i.prototype.setNode=function(c,d){return e.has(this._nodes,c)?(arguments.length>1&&(this._nodes[c]=d),this):(this._nodes[c]=arguments.length>1?d:this._defaultNodeLabelFn(c),this._isCompound&&(this._parent[c]=n,this._children[c]={},this._children[n][c]=!0),this._in[c]={},this._preds[c]={},this._out[c]={},this._sucs[c]={},++this._nodeCount,this)},i.prototype.node=function(c){return this._nodes[c]},i.prototype.hasNode=function(c){return e.has(this._nodes,c)},i.prototype.removeNode=function(c){var d=this;if(e.has(this._nodes,c)){var h=function(f){d.removeEdge(d._edgeObjs[f])};delete this._nodes[c],this._isCompound&&(this._removeFromParentsChildList(c),delete this._parent[c],e.each(this.children(c),function(f){d.setParent(f)}),delete this._children[c]),e.each(e.keys(this._in[c]),h),delete this._in[c],delete this._preds[c],e.each(e.keys(this._out[c]),h),delete this._out[c],delete this._sucs[c],--this._nodeCount}return this},i.prototype.setParent=function(c,d){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(d))d=n;else{d+="";for(var h=d;!e.isUndefined(h);h=this.parent(h))if(h===c)throw new Error("Setting "+d+" as parent of "+c+" would create a cycle");this.setNode(d)}return this.setNode(c),this._removeFromParentsChildList(c),this._parent[c]=d,this._children[d][c]=!0,this},i.prototype._removeFromParentsChildList=function(c){delete this._children[this._parent[c]][c]},i.prototype.parent=function(c){if(this._isCompound){var d=this._parent[c];if(d!==n)return d}},i.prototype.children=function(c){if(e.isUndefined(c)&&(c=n),this._isCompound){var d=this._children[c];if(d)return e.keys(d)}else{if(c===n)return this.nodes();if(this.hasNode(c))return[]}},i.prototype.predecessors=function(c){var d=this._preds[c];if(d)return e.keys(d)},i.prototype.successors=function(c){var d=this._sucs[c];if(d)return e.keys(d)},i.prototype.neighbors=function(c){var d=this.predecessors(c);if(d)return e.union(d,this.successors(c))},i.prototype.isLeaf=function(c){var d;return this.isDirected()?d=this.successors(c):d=this.neighbors(c),d.length===0},i.prototype.filterNodes=function(c){var d=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});d.setGraph(this.graph());var h=this;e.each(this._nodes,function(p,m){c(m)&&d.setNode(m,p)}),e.each(this._edgeObjs,function(p){d.hasNode(p.v)&&d.hasNode(p.w)&&d.setEdge(p,h.edge(p))});var f={};function g(p){var m=h.parent(p);return m===void 0||d.hasNode(m)?(f[p]=m,m):m in f?f[m]:g(m)}return this._isCompound&&e.each(d.nodes(),function(p){d.setParent(p,g(p))}),d},i.prototype.setDefaultEdgeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultEdgeLabelFn=c,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return e.values(this._edgeObjs)},i.prototype.setPath=function(c,d){var h=this,f=arguments;return e.reduce(c,function(g,p){return f.length>1?h.setEdge(g,p,d):h.setEdge(g,p),p}),this},i.prototype.setEdge=function(){var c,d,h,f,g=!1,p=arguments[0];typeof p=="object"&&p!==null&&"v"in p?(c=p.v,d=p.w,h=p.name,arguments.length===2&&(f=arguments[1],g=!0)):(c=p,d=arguments[1],h=arguments[3],arguments.length>2&&(f=arguments[2],g=!0)),c=""+c,d=""+d,e.isUndefined(h)||(h=""+h);var m=s(this._isDirected,c,d,h);if(e.has(this._edgeLabels,m))return g&&(this._edgeLabels[m]=f),this;if(!e.isUndefined(h)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(d),this._edgeLabels[m]=g?f:this._defaultEdgeLabelFn(c,d,h);var v=u(this._isDirected,c,d,h);return c=v.v,d=v.w,Object.freeze(v),this._edgeObjs[m]=v,o(this._preds[d],c),o(this._sucs[c],d),this._in[d][m]=v,this._out[c][m]=v,this._edgeCount++,this},i.prototype.edge=function(c,d,h){var f=arguments.length===1?l(this._isDirected,arguments[0]):s(this._isDirected,c,d,h);return this._edgeLabels[f]},i.prototype.hasEdge=function(c,d,h){var f=arguments.length===1?l(this._isDirected,arguments[0]):s(this._isDirected,c,d,h);return e.has(this._edgeLabels,f)},i.prototype.removeEdge=function(c,d,h){var f=arguments.length===1?l(this._isDirected,arguments[0]):s(this._isDirected,c,d,h),g=this._edgeObjs[f];return g&&(c=g.v,d=g.w,delete this._edgeLabels[f],delete this._edgeObjs[f],a(this._preds[d],c),a(this._sucs[c],d),delete this._in[d][f],delete this._out[c][f],this._edgeCount--),this},i.prototype.inEdges=function(c,d){var h=this._in[c];if(h){var f=e.values(h);return d?e.filter(f,function(g){return g.v===d}):f}},i.prototype.outEdges=function(c,d){var h=this._out[c];if(h){var f=e.values(h);return d?e.filter(f,function(g){return g.w===d}):f}},i.prototype.nodeEdges=function(c,d){var h=this.inEdges(c,d);if(h)return h.concat(this.outEdges(c,d))};function o(c,d){c[d]?c[d]++:c[d]=1}function a(c,d){--c[d]||delete c[d]}function s(c,d,h,f){var g=""+d,p=""+h;if(!c&&g>p){var m=g;g=p,p=m}return g+r+p+r+(e.isUndefined(f)?t:f)}function u(c,d,h,f){var g=""+d,p=""+h;if(!c&&g>p){var m=g;g=p,p=m}var v={v:g,w:p};return f&&(v.name=f),v}function l(c,d){return s(c,d.v,d.w,d.name)}return ko}var Ao,Cl;function ix(){return Cl||(Cl=1,Ao="2.1.8"),Ao}var Ro,Il;function ox(){return Il||(Il=1,Ro={Graph:Us(),version:ix()}),Ro}var qo,Ml;function ax(){if(Ml)return qo;Ml=1;var e=Ve(),t=Us();qo={write:n,read:o};function n(a){var s={options:{directed:a.isDirected(),multigraph:a.isMultigraph(),compound:a.isCompound()},nodes:r(a),edges:i(a)};return e.isUndefined(a.graph())||(s.value=e.clone(a.graph())),s}function r(a){return e.map(a.nodes(),function(s){var u=a.node(s),l=a.parent(s),c={v:s};return e.isUndefined(u)||(c.value=u),e.isUndefined(l)||(c.parent=l),c})}function i(a){return e.map(a.edges(),function(s){var u=a.edge(s),l={v:s.v,w:s.w};return e.isUndefined(s.name)||(l.name=s.name),e.isUndefined(u)||(l.value=u),l})}function o(a){var s=new t(a.options).setGraph(a.value);return e.each(a.nodes,function(u){s.setNode(u.v,u.value),u.parent&&s.setParent(u.v,u.parent)}),e.each(a.edges,function(u){s.setEdge({v:u.v,w:u.w,name:u.name},u.value)}),s}return qo}var Lo,Tl;function sx(){if(Tl)return Lo;Tl=1;var e=Ve();Lo=t;function t(n){var r={},i=[],o;function a(s){e.has(r,s)||(r[s]=!0,o.push(s),e.each(n.successors(s),a),e.each(n.predecessors(s),a))}return e.each(n.nodes(),function(s){o=[],a(s),o.length&&i.push(o)}),i}return Lo}var $o,kl;function vp(){if(kl)return $o;kl=1;var e=Ve();$o=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,r){var i=this._keyIndices;if(n=String(n),!e.has(i,n)){var o=this._arr,a=o.length;return i[n]=a,o.push({key:n,priority:r}),this._decrease(a),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)},t.prototype._heapify=function(n){var r=this._arr,i=2*n,o=i+1,a=n;i<r.length&&(a=r[i].priority<r[a].priority?i:a,o<r.length&&(a=r[o].priority<r[a].priority?o:a),a!==n&&(this._swap(n,a),this._heapify(a)))},t.prototype._decrease=function(n){for(var r=this._arr,i=r[n].priority,o;n!==0&&(o=n>>1,!(r[o].priority<i));)this._swap(n,o),n=o},t.prototype._swap=function(n,r){var i=this._arr,o=this._keyIndices,a=i[n],s=i[r];i[n]=s,i[r]=a,o[s.key]=n,o[a.key]=r},$o}var Po,Al;function yp(){if(Al)return Po;Al=1;var e=Ve(),t=vp();Po=r;var n=e.constant(1);function r(o,a,s,u){return i(o,String(a),s||n,u||function(l){return o.outEdges(l)})}function i(o,a,s,u){var l={},c=new t,d,h,f=function(g){var p=g.v!==d?g.v:g.w,m=l[p],v=s(g),b=h.distance+v;if(v<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+g+" Weight: "+v);b<m.distance&&(m.distance=b,m.predecessor=d,c.decrease(p,b))};for(o.nodes().forEach(function(g){var p=g===a?0:Number.POSITIVE_INFINITY;l[g]={distance:p},c.add(g,p)});c.size()>0&&(d=c.removeMin(),h=l[d],h.distance!==Number.POSITIVE_INFINITY);)u(d).forEach(f);return l}return Po}var Fo,Rl;function cx(){if(Rl)return Fo;Rl=1;var e=yp(),t=Ve();Fo=n;function n(r,i,o){return t.transform(r.nodes(),function(a,s){a[s]=e(r,s,i,o)},{})}return Fo}var Do,ql;function wp(){if(ql)return Do;ql=1;var e=Ve();Do=t;function t(n){var r=0,i=[],o={},a=[];function s(u){var l=o[u]={onStack:!0,lowlink:r,index:r++};if(i.push(u),n.successors(u).forEach(function(h){e.has(o,h)?o[h].onStack&&(l.lowlink=Math.min(l.lowlink,o[h].index)):(s(h),l.lowlink=Math.min(l.lowlink,o[h].lowlink))}),l.lowlink===l.index){var c=[],d;do d=i.pop(),o[d].onStack=!1,c.push(d);while(u!==d);a.push(c)}}return n.nodes().forEach(function(u){e.has(o,u)||s(u)}),a}return Do}var Oo,Ll;function ux(){if(Ll)return Oo;Ll=1;var e=Ve(),t=wp();Oo=n;function n(r){return e.filter(t(r),function(i){return i.length>1||i.length===1&&r.hasEdge(i[0],i[0])})}return Oo}var zo,$l;function lx(){if($l)return zo;$l=1;var e=Ve();zo=n;var t=e.constant(1);function n(i,o,a){return r(i,o||t,a||function(s){return i.outEdges(s)})}function r(i,o,a){var s={},u=i.nodes();return u.forEach(function(l){s[l]={},s[l][l]={distance:0},u.forEach(function(c){l!==c&&(s[l][c]={distance:Number.POSITIVE_INFINITY})}),a(l).forEach(function(c){var d=c.v===l?c.w:c.v,h=o(c);s[l][d]={distance:h,predecessor:l}})}),u.forEach(function(l){var c=s[l];u.forEach(function(d){var h=s[d];u.forEach(function(f){var g=h[l],p=c[f],m=h[f],v=g.distance+p.distance;v<m.distance&&(m.distance=v,m.predecessor=p.predecessor)})})}),s}return zo}var Ho,Pl;function bp(){if(Pl)return Ho;Pl=1;var e=Ve();Ho=t,t.CycleException=n;function t(r){var i={},o={},a=[];function s(u){if(e.has(o,u))throw new n;e.has(i,u)||(o[u]=!0,i[u]=!0,e.each(r.predecessors(u),s),delete o[u],a.push(u))}if(e.each(r.sinks(),s),e.size(i)!==r.nodeCount())throw new n;return a}function n(){}return n.prototype=new Error,Ho}var Bo,Fl;function dx(){if(Fl)return Bo;Fl=1;var e=bp();Bo=t;function t(n){try{e(n)}catch(r){if(r instanceof e.CycleException)return!1;throw r}return!0}return Bo}var Vo,Dl;function _p(){if(Dl)return Vo;Dl=1;var e=Ve();Vo=t;function t(r,i,o){e.isArray(i)||(i=[i]);var a=(r.isDirected()?r.successors:r.neighbors).bind(r),s=[],u={};return e.each(i,function(l){if(!r.hasNode(l))throw new Error("Graph does not have node: "+l);n(r,l,o==="post",u,a,s)}),s}function n(r,i,o,a,s,u){e.has(a,i)||(a[i]=!0,o||u.push(i),e.each(s(i),function(l){n(r,l,o,a,s,u)}),o&&u.push(i))}return Vo}var Go,Ol;function fx(){if(Ol)return Go;Ol=1;var e=_p();Go=t;function t(n,r){return e(n,r,"post")}return Go}var Uo,zl;function hx(){if(zl)return Uo;zl=1;var e=_p();Uo=t;function t(n,r){return e(n,r,"pre")}return Uo}var Yo,Hl;function px(){if(Hl)return Yo;Hl=1;var e=Ve(),t=Us(),n=vp();Yo=r;function r(i,o){var a=new t,s={},u=new n,l;function c(h){var f=h.v===l?h.w:h.v,g=u.priority(f);if(g!==void 0){var p=o(h);p<g&&(s[f]=l,u.decrease(f,p))}}if(i.nodeCount()===0)return a;e.each(i.nodes(),function(h){u.add(h,Number.POSITIVE_INFINITY),a.setNode(h)}),u.decrease(i.nodes()[0],0);for(var d=!1;u.size()>0;){if(l=u.removeMin(),e.has(s,l))a.setEdge(l,s[l]);else{if(d)throw new Error("Input graph is not connected: "+i);d=!0}i.nodeEdges(l).forEach(c)}return a}return Yo}var Wo,Bl;function gx(){return Bl||(Bl=1,Wo={components:sx(),dijkstra:yp(),dijkstraAll:cx(),findCycles:ux(),floydWarshall:lx(),isAcyclic:dx(),postorder:fx(),preorder:hx(),prim:px(),tarjan:wp(),topsort:bp()}),Wo}var Zo,Vl;function mx(){if(Vl)return Zo;Vl=1;var e=ox();return Zo={Graph:e.Graph,json:ax(),alg:gx(),version:e.version},Zo}var gr;if(typeof hs=="function")try{gr=mx()}catch{}gr||(gr=window.graphlib);var Ke=gr,Xo,Gl;function vx(){if(Gl)return Xo;Gl=1;var e=Jh(),t=1,n=4;function r(i){return e(i,t|n)}return Xo=r,Xo}var Ko,Ul;function yx(){if(Ul)return Ko;Ul=1;var e=ws(),t=dm(),n=bs(),r=Rn(),i=Object.prototype,o=i.hasOwnProperty,a=e(function(s,u){s=Object(s);var l=-1,c=u.length,d=c>2?u[2]:void 0;for(d&&n(u[0],u[1],d)&&(c=1);++l<c;)for(var h=u[l],f=r(h),g=-1,p=f.length;++g<p;){var m=f[g],v=s[m];(v===void 0||t(v,i[m])&&!o.call(s,m))&&(s[m]=h[m])}return s});return Ko=a,Ko}var jo,Yl;function wx(){if(Yl)return jo;Yl=1;var e=mt(),t=Ln(),n=Ut();function r(i){return function(o,a,s){var u=Object(o);if(!t(o)){var l=e(a,3);o=n(o),a=function(d){return l(u[d],d,u)}}var c=i(o,a,s);return c>-1?u[l?o[c]:c]:void 0}}return jo=r,jo}var Qo,Wl;function bx(){if(Wl)return Qo;Wl=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return Qo=t,Qo}var Jo,Zl;function _x(){if(Zl)return Jo;Zl=1;var e=bx(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return Jo=n,Jo}var ea,Xl;function xx(){if(Xl)return ea;Xl=1;var e=_x(),t=qn,n=sn(),r=0/0,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt;function u(l){if(typeof l=="number")return l;if(n(l))return r;if(t(l)){var c=typeof l.valueOf=="function"?l.valueOf():l;l=t(c)?c+"":c}if(typeof l!="string")return l===0?l:+l;l=e(l);var d=o.test(l);return d||a.test(l)?s(l.slice(2),d?2:8):i.test(l)?r:+l}return ea=u,ea}var ta,Kl;function xp(){if(Kl)return ta;Kl=1;var e=xx(),t=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=e(i),i===t||i===-t){var o=i<0?-1:1;return o*n}return i===i?i:0}return ta=r,ta}var na,jl;function Ex(){if(jl)return na;jl=1;var e=xp();function t(n){var r=e(n),i=r%1;return r===r?i?r-i:r:0}return na=t,na}var ra,Ql;function Sx(){if(Ql)return ra;Ql=1;var e=gp(),t=mt(),n=Ex(),r=Math.max;function i(o,a,s){var u=o==null?0:o.length;if(!u)return-1;var l=s==null?0:n(s);return l<0&&(l=r(u+l,0)),e(o,t(a,3),l)}return ra=i,ra}var ia,Jl;function Nx(){if(Jl)return ia;Jl=1;var e=wx(),t=Sx(),n=e(t);return ia=n,ia}var oa,ed;function Ep(){if(ed)return oa;ed=1;var e=Gs();function t(n){var r=n==null?0:n.length;return r?e(n,1):[]}return oa=t,oa}var aa,td;function Cx(){if(td)return aa;td=1;var e=rf(),t=ep(),n=Rn();function r(i,o){return i==null?i:e(i,t(o),n)}return aa=r,aa}var sa,nd;function Ix(){if(nd)return sa;nd=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return sa=e,sa}var ca,rd;function Mx(){if(rd)return ca;rd=1;var e=fm(),t=Bs(),n=mt();function r(i,o){var a={};return o=n(o,3),t(i,function(s,u,l){e(a,u,o(s,u,l))}),a}return ca=r,ca}var ua,id;function Ys(){if(id)return ua;id=1;var e=sn();function t(n,r,i){for(var o=-1,a=n.length;++o<a;){var s=n[o],u=r(s);if(u!=null&&(l===void 0?u===u&&!e(u):i(u,l)))var l=u,c=s}return c}return ua=t,ua}var la,od;function Tx(){if(od)return la;od=1;function e(t,n){return t>n}return la=e,la}var da,ad;function kx(){if(ad)return da;ad=1;var e=Ys(),t=Tx(),n=$n();function r(i){return i&&i.length?e(i,n,t):void 0}return da=r,da}var fa,sd;function Ax(){if(sd)return fa;sd=1;var e=pm,t=hm,n=t(function(r,i,o){e(r,i,o)});return fa=n,fa}var ha,cd;function Sp(){if(cd)return ha;cd=1;function e(t,n){return t<n}return ha=e,ha}var pa,ud;function Rx(){if(ud)return pa;ud=1;var e=Ys(),t=Sp(),n=$n();function r(i){return i&&i.length?e(i,n,t):void 0}return pa=r,pa}var ga,ld;function qx(){if(ld)return ga;ld=1;var e=Ys(),t=mt(),n=Sp();function r(i,o){return i&&i.length?e(i,t(o,2),n):void 0}return ga=r,ga}var ma,dd;function Lx(){if(dd)return ma;dd=1;var e=gm(),t=function(){return e.Date.now()};return ma=t,ma}var va,fd;function $x(){if(fd)return va;fd=1;var e=ms(),t=Lr(),n=af(),r=qn,i=zn();function o(a,s,u,l){if(!r(a))return a;s=t(s,a);for(var c=-1,d=s.length,h=d-1,f=a;f!=null&&++c<d;){var g=i(s[c]),p=u;if(g==="__proto__"||g==="constructor"||g==="prototype")return a;if(c!=h){var m=f[g];p=l?l(m,g,f):void 0,p===void 0&&(p=r(m)?m:n(s[c+1])?[]:{})}e(f,g,p),f=f[g]}return a}return va=o,va}var ya,hd;function Px(){if(hd)return ya;hd=1;var e=$r(),t=$x(),n=Lr();function r(i,o,a){for(var s=-1,u=o.length,l={};++s<u;){var c=o[s],d=e(i,c);a(d,c)&&t(l,n(c,i),d)}return l}return ya=r,ya}var wa,pd;function Fx(){if(pd)return wa;pd=1;var e=Px(),t=sp();function n(r,i){return e(r,i,function(o,a){return t(r,a)})}return wa=n,wa}var ba,gd;function Dx(){if(gd)return ba;gd=1;var e=Ep(),t=vm(),n=mm();function r(i){return n(t(i,void 0,e),i+"")}return ba=r,ba}var _a,md;function Ox(){if(md)return _a;md=1;var e=Fx(),t=Dx(),n=t(function(r,i){return r==null?{}:e(r,i)});return _a=n,_a}var xa,vd;function zx(){if(vd)return xa;vd=1;var e=Math.ceil,t=Math.max;function n(r,i,o,a){for(var s=-1,u=t(e((i-r)/(o||1)),0),l=Array(u);u--;)l[a?u:++s]=r,r+=o;return l}return xa=n,xa}var Ea,yd;function Hx(){if(yd)return Ea;yd=1;var e=zx(),t=bs(),n=xp();function r(i){return function(o,a,s){return s&&typeof s!="number"&&t(o,a,s)&&(a=s=void 0),o=n(o),a===void 0?(a=o,o=0):a=n(a),s=s===void 0?o<a?1:-1:n(s),e(o,a,s,i)}}return Ea=r,Ea}var Sa,wd;function Bx(){if(wd)return Sa;wd=1;var e=Hx(),t=e();return Sa=t,Sa}var Na,bd;function Vx(){if(bd)return Na;bd=1;function e(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}return Na=e,Na}var Ca,_d;function Gx(){if(_d)return Ca;_d=1;var e=sn();function t(n,r){if(n!==r){var i=n!==void 0,o=n===null,a=n===n,s=e(n),u=r!==void 0,l=r===null,c=r===r,d=e(r);if(!l&&!d&&!s&&n>r||s&&u&&c&&!l&&!d||o&&u&&c||!i&&c||!a)return 1;if(!o&&!s&&!d&&n<r||d&&i&&a&&!o&&!s||l&&i&&a||!u&&a||!c)return-1}return 0}return Ca=t,Ca}var Ia,xd;function Ux(){if(xd)return Ia;xd=1;var e=Gx();function t(n,r,i){for(var o=-1,a=n.criteria,s=r.criteria,u=a.length,l=i.length;++o<u;){var c=e(a[o],s[o]);if(c){if(o>=l)return c;var d=i[o];return c*(d=="desc"?-1:1)}}return n.index-r.index}return Ia=t,Ia}var Ma,Ed;function Yx(){if(Ed)return Ma;Ed=1;var e=qr(),t=$r(),n=mt(),r=fp(),i=Vx(),o=gs(),a=Ux(),s=$n(),u=Me();function l(c,d,h){d.length?d=e(d,function(p){return u(p)?function(m){return t(m,p.length===1?p[0]:p)}:p}):d=[s];var f=-1;d=e(d,o(n));var g=r(c,function(p,m,v){var b=e(d,function(S){return S(p)});return{criteria:b,index:++f,value:p}});return i(g,function(p,m){return a(p,m,h)})}return Ma=l,Ma}var Ta,Sd;function Wx(){if(Sd)return Ta;Sd=1;var e=Gs(),t=Yx(),n=ws(),r=bs(),i=n(function(o,a){if(o==null)return[];var s=a.length;return s>1&&r(o,a[0],a[1])?a=[]:s>2&&r(a[0],a[1],a[2])&&(a=[a[0]]),t(o,e(a,1),[])});return Ta=i,Ta}var ka,Nd;function Zx(){if(Nd)return ka;Nd=1;var e=op(),t=0;function n(r){var i=++t;return e(r)+i}return ka=n,ka}var Aa,Cd;function Xx(){if(Cd)return Aa;Cd=1;function e(t,n,r){for(var i=-1,o=t.length,a=n.length,s={};++i<o;){var u=i<a?n[i]:void 0;r(s,t[i],u)}return s}return Aa=e,Aa}var Ra,Id;function Kx(){if(Id)return Ra;Id=1;var e=ms(),t=Xx();function n(r,i){return t(r||[],i||[],e)}return Ra=n,Ra}var mr;if(typeof hs=="function")try{mr={cloneDeep:vx(),constant:uf(),defaults:yx(),each:np(),filter:up(),find:Nx(),flatten:Ep(),forEach:tp(),forIn:Cx(),has:lp(),isUndefined:dp(),last:Ix(),map:hp(),mapValues:Mx(),max:kx(),merge:Ax(),min:Rx(),minBy:qx(),now:Lx(),pick:Ox(),range:Bx(),reduce:pp(),sortBy:Wx(),uniqueId:Zx(),values:mp(),zipObject:Kx()}}catch{}mr||(mr=window._);var he=mr,jx=Pr;function Pr(){var e={};e._next=e._prev=e,this._sentinel=e}Pr.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return Np(t),t};Pr.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&Np(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t};Pr.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,Qx)),n=n._prev;return"["+e.join(", ")+"]"};function Np(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function Qx(e,t){if(e!=="_next"&&e!=="_prev")return t}var ut=he,Jx=Ke.Graph,eE=jx,tE=rE,nE=ut.constant(1);function rE(e,t){if(e.nodeCount()<=1)return[];var n=oE(e,t||nE),r=iE(n.graph,n.buckets,n.zeroIdx);return ut.flatten(ut.map(r,function(i){return e.outEdges(i.v,i.w)}),!0)}function iE(e,t,n){for(var r=[],i=t[t.length-1],o=t[0],a;e.nodeCount();){for(;a=o.dequeue();)qa(e,t,n,a);for(;a=i.dequeue();)qa(e,t,n,a);if(e.nodeCount()){for(var s=t.length-2;s>0;--s)if(a=t[s].dequeue(),a){r=r.concat(qa(e,t,n,a,!0));break}}}return r}function qa(e,t,n,r,i){var o=i?[]:void 0;return ut.forEach(e.inEdges(r.v),function(a){var s=e.edge(a),u=e.node(a.v);i&&o.push({v:a.v,w:a.w}),u.out-=s,as(t,n,u)}),ut.forEach(e.outEdges(r.v),function(a){var s=e.edge(a),u=a.w,l=e.node(u);l.in-=s,as(t,n,l)}),e.removeNode(r.v),o}function oE(e,t){var n=new Jx,r=0,i=0;ut.forEach(e.nodes(),function(s){n.setNode(s,{v:s,in:0,out:0})}),ut.forEach(e.edges(),function(s){var u=n.edge(s.v,s.w)||0,l=t(s),c=u+l;n.setEdge(s.v,s.w,c),i=Math.max(i,n.node(s.v).out+=l),r=Math.max(r,n.node(s.w).in+=l)});var o=ut.range(i+r+3).map(function(){return new eE}),a=r+1;return ut.forEach(n.nodes(),function(s){as(o,a,n.node(s))}),{graph:n,buckets:o,zeroIdx:a}}function as(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}var Ft=he,aE=tE,sE={run:cE,undo:lE};function cE(e){var t=e.graph().acyclicer==="greedy"?aE(e,n(e)):uE(e);Ft.forEach(t,function(r){var i=e.edge(r);e.removeEdge(r),i.forwardName=r.name,i.reversed=!0,e.setEdge(r.w,r.v,i,Ft.uniqueId("rev"))});function n(r){return function(i){return r.edge(i).weight}}}function uE(e){var t=[],n={},r={};function i(o){Ft.has(r,o)||(r[o]=!0,n[o]=!0,Ft.forEach(e.outEdges(o),function(a){Ft.has(n,a.w)?t.push(a):i(a.w)}),delete n[o])}return Ft.forEach(e.nodes(),i),t}function lE(e){Ft.forEach(e.edges(),function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}})}var se=he,Cp=Ke.Graph,qe={addDummyNode:Ip,simplify:dE,asNonCompoundGraph:fE,successorWeights:hE,predecessorWeights:pE,intersectRect:gE,buildLayerMatrix:mE,normalizeRanks:vE,removeEmptyRanks:yE,addBorderNode:wE,maxRank:Mp,partition:bE,time:_E,notime:xE};function Ip(e,t,n,r){var i;do i=se.uniqueId(r);while(e.hasNode(i));return n.dummy=t,e.setNode(i,n),i}function dE(e){var t=new Cp().setGraph(e.graph());return se.forEach(e.nodes(),function(n){t.setNode(n,e.node(n))}),se.forEach(e.edges(),function(n){var r=t.edge(n.v,n.w)||{weight:0,minlen:1},i=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),t}function fE(e){var t=new Cp({multigraph:e.isMultigraph()}).setGraph(e.graph());return se.forEach(e.nodes(),function(n){e.children(n).length||t.setNode(n,e.node(n))}),se.forEach(e.edges(),function(n){t.setEdge(n,e.edge(n))}),t}function hE(e){var t=se.map(e.nodes(),function(n){var r={};return se.forEach(e.outEdges(n),function(i){r[i.w]=(r[i.w]||0)+e.edge(i).weight}),r});return se.zipObject(e.nodes(),t)}function pE(e){var t=se.map(e.nodes(),function(n){var r={};return se.forEach(e.inEdges(n),function(i){r[i.v]=(r[i.v]||0)+e.edge(i).weight}),r});return se.zipObject(e.nodes(),t)}function gE(e,t){var n=e.x,r=e.y,i=t.x-n,o=t.y-r,a=e.width/2,s=e.height/2;if(!i&&!o)throw new Error("Not possible to find intersection inside of the rectangle");var u,l;return Math.abs(o)*a>Math.abs(i)*s?(o<0&&(s=-s),u=s*i/o,l=s):(i<0&&(a=-a),u=a,l=a*o/i),{x:n+u,y:r+l}}function mE(e){var t=se.map(se.range(Mp(e)+1),function(){return[]});return se.forEach(e.nodes(),function(n){var r=e.node(n),i=r.rank;se.isUndefined(i)||(t[i][r.order]=n)}),t}function vE(e){var t=se.min(se.map(e.nodes(),function(n){return e.node(n).rank}));se.forEach(e.nodes(),function(n){var r=e.node(n);se.has(r,"rank")&&(r.rank-=t)})}function yE(e){var t=se.min(se.map(e.nodes(),function(o){return e.node(o).rank})),n=[];se.forEach(e.nodes(),function(o){var a=e.node(o).rank-t;n[a]||(n[a]=[]),n[a].push(o)});var r=0,i=e.graph().nodeRankFactor;se.forEach(n,function(o,a){se.isUndefined(o)&&a%i!==0?--r:r&&se.forEach(o,function(s){e.node(s).rank+=r})})}function wE(e,t,n,r){var i={width:0,height:0};return arguments.length>=4&&(i.rank=n,i.order=r),Ip(e,"border",i,t)}function Mp(e){return se.max(se.map(e.nodes(),function(t){var n=e.node(t).rank;if(!se.isUndefined(n))return n}))}function bE(e,t){var n={lhs:[],rhs:[]};return se.forEach(e,function(r){t(r)?n.lhs.push(r):n.rhs.push(r)}),n}function _E(e,t){var n=se.now();try{return t()}finally{console.log(e+" time: "+(se.now()-n)+"ms")}}function xE(e,t){return t()}var Tp=he,EE=qe,SE={run:NE,undo:IE};function NE(e){e.graph().dummyChains=[],Tp.forEach(e.edges(),function(t){CE(e,t)})}function CE(e,t){var n=t.v,r=e.node(n).rank,i=t.w,o=e.node(i).rank,a=t.name,s=e.edge(t),u=s.labelRank;if(o!==r+1){e.removeEdge(t);var l,c,d;for(d=0,++r;r<o;++d,++r)s.points=[],c={width:0,height:0,edgeLabel:s,edgeObj:t,rank:r},l=EE.addDummyNode(e,"edge",c,"_d"),r===u&&(c.width=s.width,c.height=s.height,c.dummy="edge-label",c.labelpos=s.labelpos),e.setEdge(n,l,{weight:s.weight},a),d===0&&e.graph().dummyChains.push(l),n=l;e.setEdge(n,i,{weight:s.weight},a)}}function IE(e){Tp.forEach(e.graph().dummyChains,function(t){var n=e.node(t),r=n.edgeLabel,i;for(e.setEdge(n.edgeObj,r);n.dummy;)i=e.successors(t)[0],e.removeNode(t),r.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height),t=i,n=e.node(t)})}var Kn=he,Fr={longestPath:ME,slack:TE};function ME(e){var t={};function n(r){var i=e.node(r);if(Kn.has(t,r))return i.rank;t[r]=!0;var o=Kn.min(Kn.map(e.outEdges(r),function(a){return n(a.w)-e.edge(a).minlen}));return(o===Number.POSITIVE_INFINITY||o===void 0||o===null)&&(o=0),i.rank=o}Kn.forEach(e.sources(),n)}function TE(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}var vr=he,kE=Ke.Graph,yr=Fr.slack,kp=AE;function AE(e){var t=new kE({directed:!1}),n=e.nodes()[0],r=e.nodeCount();t.setNode(n,{});for(var i,o;RE(t,e)<r;)i=qE(t,e),o=t.hasNode(i.v)?yr(e,i):-yr(e,i),LE(t,e,o);return t}function RE(e,t){function n(r){vr.forEach(t.nodeEdges(r),function(i){var o=i.v,a=r===o?i.w:o;!e.hasNode(a)&&!yr(t,i)&&(e.setNode(a,{}),e.setEdge(r,a,{}),n(a))})}return vr.forEach(e.nodes(),n),e.nodeCount()}function qE(e,t){return vr.minBy(t.edges(),function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return yr(t,n)})}function LE(e,t,n){vr.forEach(e.nodes(),function(r){t.node(r).rank+=n})}var gt=he,$E=kp,PE=Fr.slack,FE=Fr.longestPath,DE=Ke.alg.preorder,OE=Ke.alg.postorder,zE=qe.simplify,HE=Yt;Yt.initLowLimValues=Zs;Yt.initCutValues=Ws;Yt.calcCutValue=Ap;Yt.leaveEdge=qp;Yt.enterEdge=Lp;Yt.exchangeEdges=$p;function Yt(e){e=zE(e),FE(e);var t=$E(e);Zs(t),Ws(t,e);for(var n,r;n=qp(t);)r=Lp(t,e,n),$p(t,e,n,r)}function Ws(e,t){var n=OE(e,e.nodes());n=n.slice(0,n.length-1),gt.forEach(n,function(r){BE(e,t,r)})}function BE(e,t,n){var r=e.node(n),i=r.parent;e.edge(n,i).cutvalue=Ap(e,t,n)}function Ap(e,t,n){var r=e.node(n),i=r.parent,o=!0,a=t.edge(n,i),s=0;return a||(o=!1,a=t.edge(i,n)),s=a.weight,gt.forEach(t.nodeEdges(n),function(u){var l=u.v===n,c=l?u.w:u.v;if(c!==i){var d=l===o,h=t.edge(u).weight;if(s+=d?h:-h,GE(e,n,c)){var f=e.edge(n,c).cutvalue;s+=d?-f:f}}}),s}function Zs(e,t){arguments.length<2&&(t=e.nodes()[0]),Rp(e,{},1,t)}function Rp(e,t,n,r,i){var o=n,a=e.node(r);return t[r]=!0,gt.forEach(e.neighbors(r),function(s){gt.has(t,s)||(n=Rp(e,t,n,s,r))}),a.low=o,a.lim=n++,i?a.parent=i:delete a.parent,n}function qp(e){return gt.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function Lp(e,t,n){var r=n.v,i=n.w;t.hasEdge(r,i)||(r=n.w,i=n.v);var o=e.node(r),a=e.node(i),s=o,u=!1;o.lim>a.lim&&(s=a,u=!0);var l=gt.filter(t.edges(),function(c){return u===Md(e,e.node(c.v),s)&&u!==Md(e,e.node(c.w),s)});return gt.minBy(l,function(c){return PE(t,c)})}function $p(e,t,n,r){var i=n.v,o=n.w;e.removeEdge(i,o),e.setEdge(r.v,r.w,{}),Zs(e),Ws(e,t),VE(e,t)}function VE(e,t){var n=gt.find(e.nodes(),function(i){return!t.node(i).parent}),r=DE(e,n);r=r.slice(1),gt.forEach(r,function(i){var o=e.node(i).parent,a=t.edge(i,o),s=!1;a||(a=t.edge(o,i),s=!0),t.node(i).rank=t.node(o).rank+(s?a.minlen:-a.minlen)})}function GE(e,t,n){return e.hasEdge(t,n)}function Md(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}var UE=Fr,Pp=UE.longestPath,YE=kp,WE=HE,ZE=XE;function XE(e){switch(e.graph().ranker){case"network-simplex":Td(e);break;case"tight-tree":jE(e);break;case"longest-path":KE(e);break;default:Td(e)}}var KE=Pp;function jE(e){Pp(e),YE(e)}function Td(e){WE(e)}var ss=he,QE=JE;function JE(e){var t=tS(e);ss.forEach(e.graph().dummyChains,function(n){for(var r=e.node(n),i=r.edgeObj,o=eS(e,t,i.v,i.w),a=o.path,s=o.lca,u=0,l=a[u],c=!0;n!==i.w;){if(r=e.node(n),c){for(;(l=a[u])!==s&&e.node(l).maxRank<r.rank;)u++;l===s&&(c=!1)}if(!c){for(;u<a.length-1&&e.node(l=a[u+1]).minRank<=r.rank;)u++;l=a[u]}e.setParent(n,l),n=e.successors(n)[0]}})}function eS(e,t,n,r){var i=[],o=[],a=Math.min(t[n].low,t[r].low),s=Math.max(t[n].lim,t[r].lim),u,l;u=n;do u=e.parent(u),i.push(u);while(u&&(t[u].low>a||s>t[u].lim));for(l=u,u=r;(u=e.parent(u))!==l;)o.push(u);return{path:i.concat(o.reverse()),lca:l}}function tS(e){var t={},n=0;function r(i){var o=n;ss.forEach(e.children(i),r),t[i]={low:o,lim:n++}}return ss.forEach(e.children(),r),t}var lt=he,cs=qe,nS={run:rS,cleanup:aS};function rS(e){var t=cs.addDummyNode(e,"root",{},"_root"),n=iS(e),r=lt.max(lt.values(n))-1,i=2*r+1;e.graph().nestingRoot=t,lt.forEach(e.edges(),function(a){e.edge(a).minlen*=i});var o=oS(e)+1;lt.forEach(e.children(),function(a){Fp(e,t,i,o,r,n,a)}),e.graph().nodeRankFactor=i}function Fp(e,t,n,r,i,o,a){var s=e.children(a);if(!s.length){a!==t&&e.setEdge(t,a,{weight:0,minlen:n});return}var u=cs.addBorderNode(e,"_bt"),l=cs.addBorderNode(e,"_bb"),c=e.node(a);e.setParent(u,a),c.borderTop=u,e.setParent(l,a),c.borderBottom=l,lt.forEach(s,function(d){Fp(e,t,n,r,i,o,d);var h=e.node(d),f=h.borderTop?h.borderTop:d,g=h.borderBottom?h.borderBottom:d,p=h.borderTop?r:2*r,m=f!==g?1:i-o[a]+1;e.setEdge(u,f,{weight:p,minlen:m,nestingEdge:!0}),e.setEdge(g,l,{weight:p,minlen:m,nestingEdge:!0})}),e.parent(a)||e.setEdge(t,u,{weight:0,minlen:i+o[a]})}function iS(e){var t={};function n(r,i){var o=e.children(r);o&&o.length&&lt.forEach(o,function(a){n(a,i+1)}),t[r]=i}return lt.forEach(e.children(),function(r){n(r,1)}),t}function oS(e){return lt.reduce(e.edges(),function(t,n){return t+e.edge(n).weight},0)}function aS(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,lt.forEach(e.edges(),function(n){var r=e.edge(n);r.nestingEdge&&e.removeEdge(n)})}var La=he,sS=qe,cS=uS;function uS(e){function t(n){var r=e.children(n),i=e.node(n);if(r.length&&La.forEach(r,t),La.has(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var o=i.minRank,a=i.maxRank+1;o<a;++o)kd(e,"borderLeft","_bl",n,i,o),kd(e,"borderRight","_br",n,i,o)}}La.forEach(e.children(),t)}function kd(e,t,n,r,i,o){var a={width:0,height:0,rank:o,borderType:t},s=i[t][o-1],u=sS.addDummyNode(e,"border",a,n);i[t][o]=u,e.setParent(u,r),s&&e.setEdge(s,u,{weight:1})}var nt=he,lS={adjust:dS,undo:fS};function dS(e){var t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&Dp(e)}function fS(e){var t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&hS(e),(t==="lr"||t==="rl")&&(pS(e),Dp(e))}function Dp(e){nt.forEach(e.nodes(),function(t){Ad(e.node(t))}),nt.forEach(e.edges(),function(t){Ad(e.edge(t))})}function Ad(e){var t=e.width;e.width=e.height,e.height=t}function hS(e){nt.forEach(e.nodes(),function(t){$a(e.node(t))}),nt.forEach(e.edges(),function(t){var n=e.edge(t);nt.forEach(n.points,$a),nt.has(n,"y")&&$a(n)})}function $a(e){e.y=-e.y}function pS(e){nt.forEach(e.nodes(),function(t){Pa(e.node(t))}),nt.forEach(e.edges(),function(t){var n=e.edge(t);nt.forEach(n.points,Pa),nt.has(n,"x")&&Pa(n)})}function Pa(e){var t=e.x;e.x=e.y,e.y=t}var st=he,gS=mS;function mS(e){var t={},n=st.filter(e.nodes(),function(s){return!e.children(s).length}),r=st.max(st.map(n,function(s){return e.node(s).rank})),i=st.map(st.range(r+1),function(){return[]});function o(s){if(!st.has(t,s)){t[s]=!0;var u=e.node(s);i[u.rank].push(s),st.forEach(e.successors(s),o)}}var a=st.sortBy(n,function(s){return e.node(s).rank});return st.forEach(a,o),i}var yt=he,vS=yS;function yS(e,t){for(var n=0,r=1;r<t.length;++r)n+=wS(e,t[r-1],t[r]);return n}function wS(e,t,n){for(var r=yt.zipObject(n,yt.map(n,function(l,c){return c})),i=yt.flatten(yt.map(t,function(l){return yt.sortBy(yt.map(e.outEdges(l),function(c){return{pos:r[c.w],weight:e.edge(c).weight}}),"pos")}),!0),o=1;o<n.length;)o<<=1;var a=2*o-1;o-=1;var s=yt.map(new Array(a),function(){return 0}),u=0;return yt.forEach(i.forEach(function(l){var c=l.pos+o;s[c]+=l.weight;for(var d=0;c>0;)c%2&&(d+=s[c+1]),c=c-1>>1,s[c]+=l.weight;u+=l.weight*d})),u}var Rd=he,bS=_S;function _S(e,t){return Rd.map(t,function(n){var r=e.inEdges(n);if(r.length){var i=Rd.reduce(r,function(o,a){var s=e.edge(a),u=e.node(a.v);return{sum:o.sum+s.weight*u.order,weight:o.weight+s.weight}},{sum:0,weight:0});return{v:n,barycenter:i.sum/i.weight,weight:i.weight}}else return{v:n}})}var $e=he,xS=ES;function ES(e,t){var n={};$e.forEach(e,function(i,o){var a=n[i.v]={indegree:0,in:[],out:[],vs:[i.v],i:o};$e.isUndefined(i.barycenter)||(a.barycenter=i.barycenter,a.weight=i.weight)}),$e.forEach(t.edges(),function(i){var o=n[i.v],a=n[i.w];!$e.isUndefined(o)&&!$e.isUndefined(a)&&(a.indegree++,o.out.push(n[i.w]))});var r=$e.filter(n,function(i){return!i.indegree});return SS(r)}function SS(e){var t=[];function n(o){return function(a){a.merged||($e.isUndefined(a.barycenter)||$e.isUndefined(o.barycenter)||a.barycenter>=o.barycenter)&&NS(o,a)}}function r(o){return function(a){a.in.push(o),--a.indegree===0&&e.push(a)}}for(;e.length;){var i=e.pop();t.push(i),$e.forEach(i.in.reverse(),n(i)),$e.forEach(i.out,r(i))}return $e.map($e.filter(t,function(o){return!o.merged}),function(o){return $e.pick(o,["vs","i","barycenter","weight"])})}function NS(e,t){var n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}var vn=he,CS=qe,IS=MS;function MS(e,t){var n=CS.partition(e,function(c){return vn.has(c,"barycenter")}),r=n.lhs,i=vn.sortBy(n.rhs,function(c){return-c.i}),o=[],a=0,s=0,u=0;r.sort(TS(!!t)),u=qd(o,i,u),vn.forEach(r,function(c){u+=c.vs.length,o.push(c.vs),a+=c.barycenter*c.weight,s+=c.weight,u=qd(o,i,u)});var l={vs:vn.flatten(o,!0)};return s&&(l.barycenter=a/s,l.weight=s),l}function qd(e,t,n){for(var r;t.length&&(r=vn.last(t)).i<=n;)t.pop(),e.push(r.vs),n++;return n}function TS(e){return function(t,n){return t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}}var Et=he,kS=bS,AS=xS,RS=IS,qS=Op;function Op(e,t,n,r){var i=e.children(t),o=e.node(t),a=o?o.borderLeft:void 0,s=o?o.borderRight:void 0,u={};a&&(i=Et.filter(i,function(g){return g!==a&&g!==s}));var l=kS(e,i);Et.forEach(l,function(g){if(e.children(g.v).length){var p=Op(e,g.v,n,r);u[g.v]=p,Et.has(p,"barycenter")&&$S(g,p)}});var c=AS(l,n);LS(c,u);var d=RS(c,r);if(a&&(d.vs=Et.flatten([a,d.vs,s],!0),e.predecessors(a).length)){var h=e.node(e.predecessors(a)[0]),f=e.node(e.predecessors(s)[0]);Et.has(d,"barycenter")||(d.barycenter=0,d.weight=0),d.barycenter=(d.barycenter*d.weight+h.order+f.order)/(d.weight+2),d.weight+=2}return d}function LS(e,t){Et.forEach(e,function(n){n.vs=Et.flatten(n.vs.map(function(r){return t[r]?t[r].vs:r}),!0)})}function $S(e,t){Et.isUndefined(e.barycenter)?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight)}var yn=he,PS=Ke.Graph,FS=DS;function DS(e,t,n){var r=OS(e),i=new PS({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(function(o){return e.node(o)});return yn.forEach(e.nodes(),function(o){var a=e.node(o),s=e.parent(o);(a.rank===t||a.minRank<=t&&t<=a.maxRank)&&(i.setNode(o),i.setParent(o,s||r),yn.forEach(e[n](o),function(u){var l=u.v===o?u.w:u.v,c=i.edge(l,o),d=yn.isUndefined(c)?0:c.weight;i.setEdge(l,o,{weight:e.edge(u).weight+d})}),yn.has(a,"minRank")&&i.setNode(o,{borderLeft:a.borderLeft[t],borderRight:a.borderRight[t]}))}),i}function OS(e){for(var t;e.hasNode(t=yn.uniqueId("_root")););return t}var zS=he,HS=BS;function BS(e,t,n){var r={},i;zS.forEach(n,function(o){for(var a=e.parent(o),s,u;a;){if(s=e.parent(a),s?(u=r[s],r[s]=a):(u=i,i=a),u&&u!==a){t.setEdge(u,a);return}a=s}})}var Ct=he,VS=gS,GS=vS,US=qS,YS=FS,WS=HS,ZS=Ke.Graph,Ld=qe,XS=KS;function KS(e){var t=Ld.maxRank(e),n=$d(e,Ct.range(1,t+1),"inEdges"),r=$d(e,Ct.range(t-1,-1,-1),"outEdges"),i=VS(e);Pd(e,i);for(var o=Number.POSITIVE_INFINITY,a,s=0,u=0;u<4;++s,++u){jS(s%2?n:r,s%4>=2),i=Ld.buildLayerMatrix(e);var l=GS(e,i);l<o&&(u=0,a=Ct.cloneDeep(i),o=l)}Pd(e,a)}function $d(e,t,n){return Ct.map(t,function(r){return YS(e,r,n)})}function jS(e,t){var n=new ZS;Ct.forEach(e,function(r){var i=r.graph().root,o=US(r,i,n,t);Ct.forEach(o.vs,function(a,s){r.node(a).order=s}),WS(r,n,o.vs)})}function Pd(e,t){Ct.forEach(t,function(n){Ct.forEach(n,function(r,i){e.node(r).order=i})})}var j=he,QS=Ke.Graph,JS=qe,e2={positionX:r2,findType1Conflicts:zp,findType2Conflicts:Hp,addConflict:Xs,hasConflict:Bp,verticalAlignment:Vp,horizontalCompaction:Gp,alignCoordinates:Yp,findSmallestWidthAlignment:Up,balance:Wp};function zp(e,t){var n={};function r(i,o){var a=0,s=0,u=i.length,l=j.last(o);return j.forEach(o,function(c,d){var h=t2(e,c),f=h?e.node(h).order:u;(h||c===l)&&(j.forEach(o.slice(s,d+1),function(g){j.forEach(e.predecessors(g),function(p){var m=e.node(p),v=m.order;(v<a||f<v)&&!(m.dummy&&e.node(g).dummy)&&Xs(n,p,g)})}),s=d+1,a=f)}),o}return j.reduce(t,r),n}function Hp(e,t){var n={};function r(o,a,s,u,l){var c;j.forEach(j.range(a,s),function(d){c=o[d],e.node(c).dummy&&j.forEach(e.predecessors(c),function(h){var f=e.node(h);f.dummy&&(f.order<u||f.order>l)&&Xs(n,h,c)})})}function i(o,a){var s=-1,u,l=0;return j.forEach(a,function(c,d){if(e.node(c).dummy==="border"){var h=e.predecessors(c);h.length&&(u=e.node(h[0]).order,r(a,l,d,s,u),l=d,s=u)}r(a,l,a.length,u,o.length)}),a}return j.reduce(t,i),n}function t2(e,t){if(e.node(t).dummy)return j.find(e.predecessors(t),function(n){return e.node(n).dummy})}function Xs(e,t,n){if(t>n){var r=t;t=n,n=r}var i=e[t];i||(e[t]=i={}),i[n]=!0}function Bp(e,t,n){if(t>n){var r=t;t=n,n=r}return j.has(e[t],n)}function Vp(e,t,n,r){var i={},o={},a={};return j.forEach(t,function(s){j.forEach(s,function(u,l){i[u]=u,o[u]=u,a[u]=l})}),j.forEach(t,function(s){var u=-1;j.forEach(s,function(l){var c=r(l);if(c.length){c=j.sortBy(c,function(p){return a[p]});for(var d=(c.length-1)/2,h=Math.floor(d),f=Math.ceil(d);h<=f;++h){var g=c[h];o[l]===l&&u<a[g]&&!Bp(n,l,g)&&(o[g]=l,o[l]=i[l]=i[g],u=a[g])}}})}),{root:i,align:o}}function Gp(e,t,n,r,i){var o={},a=n2(e,t,n,i),s=i?"borderLeft":"borderRight";function u(d,h){for(var f=a.nodes(),g=f.pop(),p={};g;)p[g]?d(g):(p[g]=!0,f.push(g),f=f.concat(h(g))),g=f.pop()}function l(d){o[d]=a.inEdges(d).reduce(function(h,f){return Math.max(h,o[f.v]+a.edge(f))},0)}function c(d){var h=a.outEdges(d).reduce(function(g,p){return Math.min(g,o[p.w]-a.edge(p))},Number.POSITIVE_INFINITY),f=e.node(d);h!==Number.POSITIVE_INFINITY&&f.borderType!==s&&(o[d]=Math.max(o[d],h))}return u(l,a.predecessors.bind(a)),u(c,a.successors.bind(a)),j.forEach(r,function(d){o[d]=o[n[d]]}),o}function n2(e,t,n,r){var i=new QS,o=e.graph(),a=i2(o.nodesep,o.edgesep,r);return j.forEach(t,function(s){var u;j.forEach(s,function(l){var c=n[l];if(i.setNode(c),u){var d=n[u],h=i.edge(d,c);i.setEdge(d,c,Math.max(a(e,l,u),h||0))}u=l})}),i}function Up(e,t){return j.minBy(j.values(t),function(n){var r=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return j.forIn(n,function(o,a){var s=o2(e,a)/2;r=Math.max(o+s,r),i=Math.min(o-s,i)}),r-i})}function Yp(e,t){var n=j.values(t),r=j.min(n),i=j.max(n);j.forEach(["u","d"],function(o){j.forEach(["l","r"],function(a){var s=o+a,u=e[s],l;if(u!==t){var c=j.values(u);l=a==="l"?r-j.min(c):i-j.max(c),l&&(e[s]=j.mapValues(u,function(d){return d+l}))}})})}function Wp(e,t){return j.mapValues(e.ul,function(n,r){if(t)return e[t.toLowerCase()][r];var i=j.sortBy(j.map(e,r));return(i[1]+i[2])/2})}function r2(e){var t=JS.buildLayerMatrix(e),n=j.merge(zp(e,t),Hp(e,t)),r={},i;j.forEach(["u","d"],function(a){i=a==="u"?t:j.values(t).reverse(),j.forEach(["l","r"],function(s){s==="r"&&(i=j.map(i,function(d){return j.values(d).reverse()}));var u=(a==="u"?e.predecessors:e.successors).bind(e),l=Vp(e,i,n,u),c=Gp(e,i,l.root,l.align,s==="r");s==="r"&&(c=j.mapValues(c,function(d){return-d})),r[a+s]=c})});var o=Up(e,r);return Yp(r,o),Wp(r,e.graph().align)}function i2(e,t,n){return function(r,i,o){var a=r.node(i),s=r.node(o),u=0,l;if(u+=a.width/2,j.has(a,"labelpos"))switch(a.labelpos.toLowerCase()){case"l":l=-a.width/2;break;case"r":l=a.width/2;break}if(l&&(u+=n?l:-l),l=0,u+=(a.dummy?t:e)/2,u+=(s.dummy?t:e)/2,u+=s.width/2,j.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":l=s.width/2;break;case"r":l=-s.width/2;break}return l&&(u+=n?l:-l),l=0,u}}function o2(e,t){return e.node(t).width}var wn=he,Zp=qe,a2=e2.positionX,s2=c2;function c2(e){e=Zp.asNonCompoundGraph(e),u2(e),wn.forEach(a2(e),function(t,n){e.node(n).x=t})}function u2(e){var t=Zp.buildLayerMatrix(e),n=e.graph().ranksep,r=0;wn.forEach(t,function(i){var o=wn.max(wn.map(i,function(a){return e.node(a).height}));wn.forEach(i,function(a){e.node(a).y=r+o/2}),r+=o+n})}var J=he,Fd=sE,Dd=SE,l2=ZE,d2=qe.normalizeRanks,f2=QE,h2=qe.removeEmptyRanks,Od=nS,p2=cS,zd=lS,g2=XS,m2=s2,Mt=qe,v2=Ke.Graph,y2=w2;function w2(e,t){var n=t&&t.debugTiming?Mt.time:Mt.notime;n("layout",function(){var r=n("  buildLayoutGraph",function(){return k2(e)});n("  runLayout",function(){b2(r,n)}),n("  updateInputGraph",function(){_2(e,r)})})}function b2(e,t){t("    makeSpaceForEdgeLabels",function(){A2(e)}),t("    removeSelfEdges",function(){z2(e)}),t("    acyclic",function(){Fd.run(e)}),t("    nestingGraph.run",function(){Od.run(e)}),t("    rank",function(){l2(Mt.asNonCompoundGraph(e))}),t("    injectEdgeLabelProxies",function(){R2(e)}),t("    removeEmptyRanks",function(){h2(e)}),t("    nestingGraph.cleanup",function(){Od.cleanup(e)}),t("    normalizeRanks",function(){d2(e)}),t("    assignRankMinMax",function(){q2(e)}),t("    removeEdgeLabelProxies",function(){L2(e)}),t("    normalize.run",function(){Dd.run(e)}),t("    parentDummyChains",function(){f2(e)}),t("    addBorderSegments",function(){p2(e)}),t("    order",function(){g2(e)}),t("    insertSelfEdges",function(){H2(e)}),t("    adjustCoordinateSystem",function(){zd.adjust(e)}),t("    position",function(){m2(e)}),t("    positionSelfEdges",function(){B2(e)}),t("    removeBorderNodes",function(){O2(e)}),t("    normalize.undo",function(){Dd.undo(e)}),t("    fixupEdgeLabelCoords",function(){F2(e)}),t("    undoCoordinateSystem",function(){zd.undo(e)}),t("    translateGraph",function(){$2(e)}),t("    assignNodeIntersects",function(){P2(e)}),t("    reversePoints",function(){D2(e)}),t("    acyclic.undo",function(){Fd.undo(e)})}function _2(e,t){J.forEach(e.nodes(),function(n){var r=e.node(n),i=t.node(n);r&&(r.x=i.x,r.y=i.y,t.children(n).length&&(r.width=i.width,r.height=i.height))}),J.forEach(e.edges(),function(n){var r=e.edge(n),i=t.edge(n);r.points=i.points,J.has(i,"x")&&(r.x=i.x,r.y=i.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}var x2=["nodesep","edgesep","ranksep","marginx","marginy"],E2={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},S2=["acyclicer","ranker","rankdir","align"],N2=["width","height"],C2={width:0,height:0},I2=["minlen","weight","width","height","labeloffset"],M2={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},T2=["labelpos"];function k2(e){var t=new v2({multigraph:!0,compound:!0}),n=Da(e.graph());return t.setGraph(J.merge({},E2,Fa(n,x2),J.pick(n,S2))),J.forEach(e.nodes(),function(r){var i=Da(e.node(r));t.setNode(r,J.defaults(Fa(i,N2),C2)),t.setParent(r,e.parent(r))}),J.forEach(e.edges(),function(r){var i=Da(e.edge(r));t.setEdge(r,J.merge({},M2,Fa(i,I2),J.pick(i,T2)))}),t}function A2(e){var t=e.graph();t.ranksep/=2,J.forEach(e.edges(),function(n){var r=e.edge(n);r.minlen*=2,r.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function R2(e){J.forEach(e.edges(),function(t){var n=e.edge(t);if(n.width&&n.height){var r=e.node(t.v),i=e.node(t.w),o={rank:(i.rank-r.rank)/2+r.rank,e:t};Mt.addDummyNode(e,"edge-proxy",o,"_ep")}})}function q2(e){var t=0;J.forEach(e.nodes(),function(n){var r=e.node(n);r.borderTop&&(r.minRank=e.node(r.borderTop).rank,r.maxRank=e.node(r.borderBottom).rank,t=J.max(t,r.maxRank))}),e.graph().maxRank=t}function L2(e){J.forEach(e.nodes(),function(t){var n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function $2(e){var t=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,i=0,o=e.graph(),a=o.marginx||0,s=o.marginy||0;function u(l){var c=l.x,d=l.y,h=l.width,f=l.height;t=Math.min(t,c-h/2),n=Math.max(n,c+h/2),r=Math.min(r,d-f/2),i=Math.max(i,d+f/2)}J.forEach(e.nodes(),function(l){u(e.node(l))}),J.forEach(e.edges(),function(l){var c=e.edge(l);J.has(c,"x")&&u(c)}),t-=a,r-=s,J.forEach(e.nodes(),function(l){var c=e.node(l);c.x-=t,c.y-=r}),J.forEach(e.edges(),function(l){var c=e.edge(l);J.forEach(c.points,function(d){d.x-=t,d.y-=r}),J.has(c,"x")&&(c.x-=t),J.has(c,"y")&&(c.y-=r)}),o.width=n-t+a,o.height=i-r+s}function P2(e){J.forEach(e.edges(),function(t){var n=e.edge(t),r=e.node(t.v),i=e.node(t.w),o,a;n.points?(o=n.points[0],a=n.points[n.points.length-1]):(n.points=[],o=i,a=r),n.points.unshift(Mt.intersectRect(r,o)),n.points.push(Mt.intersectRect(i,a))})}function F2(e){J.forEach(e.edges(),function(t){var n=e.edge(t);if(J.has(n,"x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function D2(e){J.forEach(e.edges(),function(t){var n=e.edge(t);n.reversed&&n.points.reverse()})}function O2(e){J.forEach(e.nodes(),function(t){if(e.children(t).length){var n=e.node(t),r=e.node(n.borderTop),i=e.node(n.borderBottom),o=e.node(J.last(n.borderLeft)),a=e.node(J.last(n.borderRight));n.width=Math.abs(a.x-o.x),n.height=Math.abs(i.y-r.y),n.x=o.x+n.width/2,n.y=r.y+n.height/2}}),J.forEach(e.nodes(),function(t){e.node(t).dummy==="border"&&e.removeNode(t)})}function z2(e){J.forEach(e.edges(),function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function H2(e){var t=Mt.buildLayerMatrix(e);J.forEach(t,function(n){var r=0;J.forEach(n,function(i,o){var a=e.node(i);a.order=o+r,J.forEach(a.selfEdges,function(s){Mt.addDummyNode(e,"selfedge",{width:s.label.width,height:s.label.height,rank:a.rank,order:o+ ++r,e:s.e,label:s.label},"_se")}),delete a.selfEdges})})}function B2(e){J.forEach(e.nodes(),function(t){var n=e.node(t);if(n.dummy==="selfedge"){var r=e.node(n.e.v),i=r.x+r.width/2,o=r.y,a=n.x-i,s=r.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:i+2*a/3,y:o-s},{x:i+5*a/6,y:o-s},{x:i+a,y:o},{x:i+5*a/6,y:o+s},{x:i+2*a/3,y:o+s}],n.label.x=n.x,n.label.y=n.y}})}function Fa(e,t){return J.mapValues(J.pick(e,t),Number)}function Da(e){var t={};return J.forEach(e,function(n,r){t[r.toLowerCase()]=n}),t}var jn=he,V2=qe,G2=Ke.Graph,U2={debugOrdering:Y2};function Y2(e){var t=V2.buildLayerMatrix(e),n=new G2({compound:!0,multigraph:!0}).setGraph({});return jn.forEach(e.nodes(),function(r){n.setNode(r,{label:r}),n.setParent(r,"layer"+e.node(r).rank)}),jn.forEach(e.edges(),function(r){n.setEdge(r.v,r.w,{},r.name)}),jn.forEach(t,function(r,i){var o="layer"+i;n.setNode(o,{rank:"same"}),jn.reduce(r,function(a,s){return n.setEdge(a,s,{style:"invis"}),s})}),n}var W2="0.8.5",Ks={graphlib:Ke,layout:y2,debug:U2,util:{time:qe.time,notime:qe.notime},version:W2};const St=new Ks.graphlib.Graph;St.setDefaultEdgeLabel(()=>({}));const Hd=130,Bd=28,Z2=(e,t="LR")=>{const n=t==="LR";return St.setGraph({rankdir:t}),e.forEach(r=>{St.setNode(r.id,{width:Hd,height:Bd})}),Ks.layout(St),e.map(r=>{const i=St.node(r.id);return r.targetPosition=n?H.Left:H.Top,r.sourcePosition=n?H.Right:H.Bottom,r.position={x:i.x-Hd/2+Math.random()/1e3,y:i.y-Bd/2},r})},X2=(e,t="LR")=>(St.setGraph({rankdir:t}),e.forEach(n=>{St.setEdge(n.source,n.target)}),Ks.layout(St),e),Qn=33,K2=({id:e,sourceX:t,sourceY:n,targetX:r,targetY:i,sourcePosition:o,targetPosition:a,style:s={},markerType:u,markerEndId:l,selected:c,data:{onEdgeClick:d}})=>{const[h,f,g]=$s({sourceX:t,sourceY:n,sourcePosition:o,targetX:r,targetY:i,targetPosition:a}),p=nb(u,l);return re(Ie,{children:[x("path",{id:e,style:s,className:"react-flow__edge-path",d:h,markerEnd:p}),c&&x("foreignObject",{width:Qn,height:Qn,x:f-Qn/2,y:g-Qn/2,className:"edgebutton-foreignobject",requiredExtensions:"http://www.w3.org/1999/xhtml",children:x("button",{className:"edgebutton",onClick:m=>d(m,e),children:x(gf,{})})})]})},j2=({data:e,selected:t})=>re(Ie,{children:[x(It,{position:H.Right,type:"source"}),x("div",{className:`react-flow__node-default keycloak__authentication__conditional_node ${t?"selected":""}`,children:x("div",{children:e.label})}),x(It,{position:H.Left,type:"target"})]}),Q2=le(j2),J2=({data:{label:e},prefix:t,selected:n})=>re(Ie,{children:[x(It,{position:H.Right,type:"source"}),x("div",{className:`react-flow__node-default keycloak__authentication__subflow_node ${n?"selected":""}`,children:re("div",{children:[t," ",e]})}),x(It,{position:H.Left,type:"target"})]}),Xp=le(J2),eN=({...e})=>x(Xp,{...e,prefix:"Start"}),tN=({...e})=>x(Xp,{...e,prefix:"End"}),Bt=(e,t)=>({id:`edge-${e}-to-${t}`,type:"buttonEdge",source:e,target:t,data:{onEdgeClick:(n,r)=>{n.stopPropagation(),alert(`hello ${r}`)}}}),Kp=e=>{let t;return e.executionList&&(t="startSubFlow"),us(e)&&(t="conditional"),{id:e.id,type:t,sourcePosition:H.Right,targetPosition:H.Left,data:{label:e.displayName},position:{x:0,y:0}}},nN=e=>[Kp(e)],rN=(e,t,n)=>[Bt(e.id,t.id),Bt(t.id,n.id)],iN=e=>[Kp(e)],oN=(e,t,n,r,i,o)=>{const a=[];return i?a.push(Bt(e.id,t.id)):a.push(Bt(r.id,t.id)),o&&a.push(Bt(t.id,n.id)),a},aN=e=>{const t=[];t.push({id:e.id,type:"startSubFlow",sourcePosition:H.Right,targetPosition:H.Left,data:{label:e.displayName},position:{x:0,y:0}});const n=`flow-end-${e.id}`;return t.push({id:n,type:"endSubFlow",sourcePosition:H.Right,targetPosition:H.Left,data:{label:e.displayName},position:{x:0,y:0}}),t.concat(jp(e.executionList||[]))},sN=(e,t,n,r)=>{const i=[],o=`flow-end-${e.id}`;return i.push(Bt(r&&r.requirement!=="ALTERNATIVE"?r.id:t.id,e.id)),i.push(Bt(o,n.id)),i.concat(Qp(e,e.executionList||[],{...e,id:o}))},jp=e=>{let t=[];for(let n=0;n<e.length;n++){const r=e[n];r.executionList?t=t.concat(aN(r)):r.requirement==="ALTERNATIVE"||r.requirement==="DISABLED"?t=t.concat(nN(r)):t=t.concat(iN(r))}return t},Qp=(e,t,n)=>{let r=[];for(let i=0;i<t.length;i++){const o=t[i];o.executionList?r=r.concat(sN(o,e,n,t[i-1])):o.requirement==="ALTERNATIVE"||o.requirement==="DISABLED"?r=r.concat(rN(e,o,n)):r=r.concat(oN(e,o,n,t[i-1],i===0,i===t.length-1))}return r},cN={conditional:Q2,startSubFlow:eN,endSubFlow:tN},uN={buttonEdge:K2};function Vd(e){return Z2([{id:"start",sourcePosition:H.Right,type:"input",data:{label:"Start"},position:{x:0,y:0},className:"keycloak__authentication__input_node"},{id:"end",targetPosition:H.Left,type:"output",data:{label:"End"},position:{x:0,y:0},className:"keycloak__authentication__output_node"},...jp(e)])}function Gd(e){return X2(Qp({id:"start"},e,{id:"end"}))}const lN=({executionList:{expandableList:e}})=>{const[t,n]=ie(!1),r=Fe(()=>Vd(e),[]),i=Fe(()=>Gd(e),[]),[o,a,s]=$1(r),[u,l,c]=P1(i);return a_(()=>{a(Vd(e)),l(Gd(e))},[e]),re(Yh,{nodes:o,edges:u,onNodesChange:s,onEdgesChange:c,onInit:f=>f.fitView(),nodeTypes:cN,edgeTypes:uN,onNodeClick:()=>{n(!t)},nodesConnectable:!1,children:[x(Y1,{}),x(J1,{}),x(o_,{})]})},dN=()=>{const{t:e}=Be();return x(mf,{"aria-labelledby":"headerName",id:"header",children:re(vf,{children:[x(yf,{className:"keycloak__authentication__header-drag-button","aria-label":e("disabled")}),x(wf,{className:"keycloak__authentication__header",dataListCells:[x(Qt,{id:"headerName",children:e("steps")},"step"),x(Qt,{children:e("requirement")},"requirement"),x(Qt,{},"config")]})]})})},fN=({id:e,title:t,alias:n})=>x(Fg,{"data-testid":t,className:"keycloak__authentication__title",isFlat:!0,children:re(Dg,{"data-id":e,id:`title-id-${e}`,children:[t," ",x("br",{}),x(jd,{component:Qd.small,children:n})]})}),hN=({flow:e,onChange:t})=>{const{t:n}=Be(),[r,i]=ie(!1),o=e.requirementChoices.map((a,s)=>x(Ha,{value:a,children:n(`requirements.${a}`)},s));return re(Ie,{children:[e.requirementChoices&&e.requirementChoices.length>1&&x(Oa,{className:"keycloak__authentication__requirement-dropdown",variant:za.single,onToggle:i,onSelect:(a,s)=>{e.requirement=s.toString(),t(e),i(!1)},selections:[e.requirement],isOpen:r,children:o}),(!e.requirementChoices||e.requirementChoices.length<=1)&&x(Ie,{children:n(`requirements.${e.requirement}`)})]})},pN=({execution:e})=>{const{t}=Be(),{addAlert:n,addError:r}=fs(),[i,o]=ie(!1),[a,s]=ie(),[u,l]=ie(),c=br(),{register:d,setValue:h,handleSubmit:f,formState:{errors:g}}=c,p=v=>{Og(v||{},h)};Mn(async()=>{const v=await fe.authenticationManagement.getConfigDescription({providerId:e.providerId});let b;return e.authenticationConfig&&(b=await fe.authenticationManagement.getConfig({id:e.authenticationConfig})),{configDescription:v,config:b}},({configDescription:v,config:b})=>{l(v),s(b)},[]),ue(()=>{a&&p(a)},[a]);const m=async v=>{const b=zg(v);try{if(a){const S={id:a.id,alias:a.alias,config:b.config};await fe.authenticationManagement.updateConfig(S),s({...S})}else{const S={id:e.id,alias:b.alias,config:b.config},{id:w}=await fe.authenticationManagement.createConfig(S);s({...S.config,id:w,alias:S.alias})}n(t("configSaveSuccess"),wt.success),o(!1)}catch(S){r("configSaveError",S)}};return re(Ie,{children:[x(_r,{content:t("settings"),children:x(_e,{variant:"plain","aria-label":t("settings"),onClick:()=>o(!0),children:x(qm,{})})}),u&&x(Tn,{variant:kn.small,isOpen:i,title:t("executionConfig",{name:u.name}),onClose:()=>o(!1),children:re(An,{id:"execution-config-form",onSubmit:f(m),children:[x(Rt,{label:t("alias"),fieldId:"alias",helperTextInvalid:t("required"),validated:g.alias?Ce.error:Ce.default,isRequired:!0,labelIcon:x(qt,{helpText:t("authenticationAliasHelp"),fieldLabelId:"alias"}),children:x(rr,{isReadOnly:!!a,id:"alias","data-testid":"alias",validated:g.alias?Ce.error:Ce.default,...d("alias",{required:!0})})}),x(Xd,{...c,children:x(Im,{stringify:!0,properties:u.properties||[]})}),re(jg,{children:[x(_e,{"data-testid":"save",variant:"primary",type:"submit",children:t("save")}),x(_e,{"data-testid":"cancel",variant:ft.link,onClick:()=>{o(!1)},children:t("cancel")}),a&&re(_e,{className:"pf-u-ml-4xl","data-testid":"clear",variant:ft.link,onClick:async()=>{await fe.authenticationManagement.delConfig({id:a.id}),s(void 0),o(!1)},children:[t("clear")," ",x(bf,{})]})]})]})})]})},gN=({execution:e,onAddExecution:t,onAddFlow:n})=>{const{t:r}=Be(),[i,o]=ie(!1),[a,s]=ie(),[u,l]=ie();return Mn(()=>fe.authenticationManagement.getFlow({flowId:e.flowId}),({providerId:c})=>l(c),[]),x(_r,{content:r("add"),children:re(Ie,{children:[x(Hg,{isPlain:!0,position:"right","data-testid":`${e.displayName}-edit-dropdown`,isOpen:i,toggle:x(Bg,{onToggle:o,"aria-label":r("add"),children:x(gf,{})}),dropdownItems:[x(Lt,{onClick:()=>s(u==="form-flow"?"form":"basic"),children:r("addStep")},"addStep"),x(Lt,{onClick:()=>s("condition"),children:r("addCondition")},"addCondition"),x(Lt,{onClick:()=>s("subFlow"),children:r("addSubFlow")},"addSubFlow")],onSelect:()=>o(!1)}),a&&a!=="subFlow"&&x(_s,{name:e.displayName,type:a,onSelect:c=>{c&&t(e,c),s(void 0)}}),a==="subFlow"&&x(xs,{name:e.displayName,onCancel:()=>s(void 0),onConfirm:c=>{n(e,c),s(void 0)}})]})})},mN=({execution:e,onRowChange:t})=>{const{t:n}=Be(),{register:r,reset:i,handleSubmit:o,formState:{errors:a,isValid:s}}=br({mode:"onChange",defaultValues:e}),[u,l]=Ba();ue(()=>i(e),[e]);const c=d=>{t({...e,...d}),l()};return re(Ie,{children:[x(_r,{content:n("edit"),children:x(_e,{variant:"plain","data-testid":`${e.id}-edit`,"aria-label":n("edit"),onClick:l,children:x(Nm,{})})}),u&&x(Tn,{title:n("editFlow"),onClose:l,variant:kn.small,actions:[x(_e,{"data-testid":"confirm",type:"submit",form:"edit-flow-form",isDisabled:!s,children:n("edit")},"confirm"),x(_e,{"data-testid":"cancel",variant:ft.link,onClick:l,children:n("cancel")},"cancel")],isOpen:!0,children:re(An,{id:"edit-flow-form",onSubmit:o(c),isHorizontal:!0,children:[x(Rt,{label:n("name"),fieldId:"name",helperTextInvalid:n("required"),validated:a.displayName?Ce.error:Ce.default,labelIcon:x(qt,{helpText:n("flowNameHelp"),fieldLabelId:"name"}),isRequired:!0,children:x(rr,{id:"name","data-testid":"displayName",validated:a.displayName?Ce.error:Ce.default,...r("displayName",{required:!0}),isRequired:!0})}),x(Rt,{label:n("description"),fieldId:"kc-description",labelIcon:x(qt,{helpText:n("flowDescriptionHelp"),fieldLabelId:"description"}),validated:a.description?Ce.error:Ce.default,helperTextInvalid:a.description?.message,children:x(Mm,{id:"kc-description","data-testid":"description",validated:a.description?Ce.error:Ce.default,...r("description",{maxLength:{value:255,message:n("maxLength",{length:255})}})})})]})})]})},Jp=({builtIn:e,execution:t,onRowClick:n,onRowChange:r,onAddExecution:i,onAddFlow:o,onDelete:a})=>{const{t:s}=Be(),u=!!t.executionList?.length;return re(Ie,{children:[x(mf,{className:"keycloak__authentication__flow-item",id:t.id,isExpanded:!t.isCollapsed,"aria-labelledby":`title-id-${t.id}`,children:re(vf,{className:"keycloak__authentication__flow-row","aria-level":t.level+1,role:"heading","aria-labelledby":t.id,children:[x(Tm,{children:x(yf,{"aria-label":s("dragHelp")})}),u&&x(_f,{onClick:()=>n(t),isExpanded:!t.isCollapsed,id:`toggle1-${t.id}`,"aria-controls":t.executionList[0].id}),x(wf,{dataListCells:[re(Qt,{children:[!t.authenticationFlow&&x(fN,{id:t.id,alias:t.alias,title:t.displayName},t.id),t.authenticationFlow&&re(Ie,{children:[t.displayName," ",x("br",{})," ",re(jd,{component:Qd.small,children:[t.alias," ",t.description]})]})]},`${t.id}-name`),x(Qt,{children:x(hN,{flow:t,onChange:r})},`${t.id}-requirement`),re(Qt,{children:[t.configurable&&x(pN,{execution:t}),t.authenticationFlow&&!e&&re(Ie,{children:[x(gN,{execution:t,onAddExecution:i,onAddFlow:o}),x(mN,{execution:t,onRowChange:r})]}),!e&&x(_r,{content:s("delete"),children:x(_e,{variant:"plain","data-testid":`${t.displayName}-delete`,"aria-label":s("delete"),onClick:()=>a(t),children:x(bf,{})})})]},`${t.id}-config`)]})]})}),!t.isCollapsed&&u&&t.executionList?.map(l=>x(Jp,{builtIn:e,execution:l,onRowClick:n,onRowChange:r,onAddExecution:i,onAddFlow:o,onDelete:a},l.id))]})};class eg{oldIndex;newIndex;constructor(t,n){this.oldIndex=t,this.newIndex=n}}class Ud extends eg{parent;constructor(t,n,r){super(t,n),this.parent=r}}class js{#e;expandableList;constructor(t){this.#e=t;const n={executionList:[],isCollapsed:!1};this.#t(0,-1,n),this.expandableList=n.executionList}#t(t,n,r){for(let i=t;i<this.#e.length;i++){const o=this.#e[i],a=o.level||0;if(a<=n)return i-1;const s=this.#e[i+1]?.level||0;if(a<s){const l={...o,executionList:[],isCollapsed:!1};i=this.#t(i+1,a,l),r.executionList?.push(l)}else r.executionList?.push(o)}return this.#e.length}order(t){let n=[];for(const r of t||this.expandableList)n.push(r),r.executionList&&!r.isCollapsed&&(n=n.concat(this.order(r.executionList)));return n}findExecution(t,n){let r=(n||this.expandableList).find(i=>i.id===t);if(!r){for(const i of n||this.expandableList)if(i.executionList&&(r=this.findExecution(t,i.executionList),r))return r}return r}#n(t){for(let n=0;n<this.#e.length;n++){const r=this.#e[n];if(n+1<this.#e.length&&this.#e[n+1].level>r.level&&r.level+1===t)return r}}getChange(t,n){const r=this.order(),i=n.findIndex(s=>s===t.id),o=r[r.findIndex(s=>s.id===t.id)],a=r[i];if(a.level!==o.level){if(a.level>0){const s=this.#n(a.level);return new Ud(s?.executionList?.length||0,a.index,s)}return new Ud(this.expandableList.length,a.index)}return new eg(o.index,a.index)}clone(){const t=new js([]);return t.#e=this.#e,t.expandableList=this.expandableList,t}}const us=e=>e.displayName?.startsWith("Condition ");function mC(){const{t:e}=Be(),{realm:t}=Vg(),{addAlert:n,addError:r}=fs(),{id:i,usedBy:o,builtIn:a}=Gg(),s=Ug(),[u,l]=ie(0),c=()=>l(new Date().getTime()),[d,h]=ie(!0),[f,g]=ie(),[p,m]=ie(),[v,b]=ie(),[S,w]=ie(""),[k,M]=ie(),[L,$]=ie(),[A,D]=ie(),[F,O,C]=Ba(),[y,I]=ie(!1),[_,R]=Ba();Mn(async()=>{const V=(await fe.authenticationManagement.getFlows()).find(ae=>ae.id===i);if(!V)throw new Error(e("notFound"));const Z=await fe.authenticationManagement.getExecutions({flow:V.alias});return{flow:V,executions:Z}},({flow:B,executions:V})=>{g(B),m(new js(V))},[u]);const P=async(B,V)=>{try{let Z=B.id;if("parent"in V){let oe={};"authenticationConfig"in B&&(oe=await fe.authenticationManagement.getConfig({id:B.authenticationConfig})),await fe.authenticationManagement.delExecution({id:Z});const me=await fe.authenticationManagement.addExecutionToFlow({flow:V.parent?.displayName||f?.alias,provider:B.providerId});if(oe.id){const ce={id:me.id,alias:oe.alias,config:oe.config};await fe.authenticationManagement.createConfig(ce)}Z=me.id}const ae=V.newIndex-V.oldIndex;for(let oe=0;oe<Math.abs(ae);oe++)ae>0?await fe.authenticationManagement.lowerPriorityExecution({id:Z}):await fe.authenticationManagement.raisePriorityExecution({id:Z});c(),n(e("updateFlowSuccess"),wt.success)}catch(Z){r("updateFlowError",Z)}},E=async B=>{const{executionList:V,isCollapsed:Z,...ae}=B;try{await fe.authenticationManagement.updateExecution({flow:f?.alias},ae),c(),n(e("updateFlowSuccess"),wt.success)}catch(oe){r("updateFlowError",oe)}},T=async(B,V)=>{try{await fe.authenticationManagement.addExecutionToFlow({flow:B,provider:V.id}),c(),n(e("updateFlowSuccess"),wt.success)}catch(Z){r("updateFlowError",Z)}},q=async(B,{name:V,description:Z="",type:ae,provider:oe})=>{try{await fe.authenticationManagement.addFlowToFlow({flow:B,alias:V,description:Z,provider:oe,type:ae}),c(),n(e("updateFlowSuccess"),wt.success)}catch(me){r("updateFlowError",me)}},[z,U]=rc({titleKey:"deleteConfirmExecution",children:re(ic,{i18nKey:"deleteConfirmExecutionMessage",children:[" ",x("strong",{children:{name:A?.displayName}}),"."]}),continueButtonLabel:"delete",continueButtonVariant:ft.danger,onConfirm:async()=>{try{await fe.authenticationManagement.delExecution({id:A?.id}),n(e("deleteExecutionSuccess"),wt.success),c()}catch(B){r("deleteExecutionError",B)}}}),[G,X]=rc({titleKey:"deleteConfirmFlow",children:re(ic,{i18nKey:"deleteConfirmFlowMessage",children:[" ",x("strong",{children:{flow:f?.alias||""}}),"."]}),continueButtonLabel:"delete",continueButtonVariant:ft.danger,onConfirm:async()=>{try{await fe.authenticationManagement.deleteFlow({flowId:f.id}),s(Yg({realm:t})),n(e("deleteFlowSuccess"),wt.success)}catch(B){r("deleteFlowError",B)}}}),Q=p?.expandableList.length!==0,ne=[...o!=="DEFAULT"?[x(Lt,{"data-testid":"set-as-default",onClick:R,children:e("bindFlow")},"default")]:[],x(Lt,{onClick:()=>C(!0),children:e("duplicate")},"duplicate"),...a?[]:[x(Lt,{"data-testid":"edit-flow",onClick:()=>I(!0),children:e("editInfo")},"edit"),x(Lt,{"data-testid":"delete-flow",onClick:()=>G(),children:e("delete")},"delete")]];return re(Ie,{children:[_&&x(Zg,{flowAlias:f?.alias,onClose:()=>{R(),c()}}),F&&x(Xg,{name:f?.alias,description:f?.description,toggleDialog:O,onComplete:()=>{c(),C(!1)}}),y&&x(Hm,{flow:f,toggleDialog:()=>{I(!y),c()}}),x(X,{}),x(Wg,{titleKey:f?.alias||"",badges:[{text:x(Zd,{children:e(`used.${o}`)})},a?{text:x(zm,{}),id:"builtIn"}:{}],dropdownItems:ne}),re(Kd,{variant:"light",children:[p&&Q&&re(Ie,{children:[x(km,{id:"toolbar",children:re(Am,{children:[x(Vr,{children:re(xf,{children:[x(or,{icon:x(Fm,{}),"aria-label":e("tableView"),buttonId:"tableView",isSelected:d,onChange:()=>h(!0)}),x(or,{icon:x($m,{}),"aria-label":e("diagramView"),buttonId:"diagramView",isSelected:!d,onChange:()=>h(!1)})]})}),x(Vr,{children:x(_e,{"data-testid":"addStep",variant:"secondary",onClick:()=>M(!0),children:e("addStep")})}),x(Vr,{children:x(_e,{"data-testid":"addSubFlow",variant:"secondary",onClick:()=>$(!0),children:e("addSubFlow")})})]})}),x(U,{}),d&&re(Cm,{"aria-label":e("flows"),onDragFinish:B=>{const V=B.slice(1);w(e("onDragFinish",{list:v?.displayName}));const Z=p.getChange(v,V);P(v,Z)},onDragStart:B=>{const V=p.findExecution(B);w(e("onDragStart",{item:V.displayName})),b(V),V.isCollapsed||(V.isCollapsed=!0,m(p.clone()))},onDragMove:()=>w(e("onDragMove",{item:v?.displayName})),onDragCancel:()=>w(e("onDragCancel")),itemOrder:["header",...p.order().map(B=>B.id)],children:[x(dN,{}),x(Ie,{children:p.expandableList.map(B=>x(Jp,{builtIn:!!a,execution:B,onRowClick:V=>{V.isCollapsed=!V.isCollapsed,m(p.clone())},onRowChange:E,onAddExecution:(V,Z)=>T(V.displayName,Z),onAddFlow:(V,Z)=>q(V.displayName,Z),onDelete:V=>{D(V),z()}},B.id))})]}),f&&re(Ie,{children:[k&&x(_s,{name:f.alias,type:f.providerId==="client-flow"?"client":"basic",onSelect:B=>{B&&T(f.alias,B),M(!1)}}),L&&x(xs,{name:f.alias,onCancel:()=>$(!1),onConfirm:B=>{q(f.alias,B),$(!1)}})]}),x("div",{className:"pf-screen-reader","aria-live":"assertive",children:S})]}),!d&&p?.expandableList&&x(lN,{executionList:p}),!p?.expandableList||f&&!Q&&x(Gm,{flow:f,onAddExecution:B=>T(f.alias,B),onAddFlow:B=>q(f.alias,B)})]})]})}export{mC as default,us as providerConditionFilter};
//# sourceMappingURL=FlowDetails-Oow3_jpi.js.map
